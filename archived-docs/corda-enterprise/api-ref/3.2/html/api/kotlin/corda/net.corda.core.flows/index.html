<HTML>
<HEAD>
<meta charset="UTF-8">
<title>net.corda.core.flows - corda</title>
<link rel="stylesheet" href="../../style.css">

<meta name="docsearch:language" content="en">
<meta name="docsearch:version" content="3.2">
<meta name="docsearch:project" content="corda-enterprise">
</head>
<BODY>
<a href="../index.html">corda</a>&nbsp;/&nbsp;<a href="./index.html">net.corda.core.flows</a><br/>
<br/>
<h2>Package net.corda.core.flows</h2>
<p>Base data types and abstract classes for implementing Corda flows. To implement a new flow start with <a href="-flow-logic/index.html">FlowLogic</a>, or
see <a href="-collect-signatures-flow/index.html">CollectSignaturesFlow</a> for a simple example flow. Flows are started via a node's <a href="../net.corda.core.node/-service-hub/index.html">ServiceHub</a>.</p>
<p>Corda flows are a tool for modelling the interactions between two or more nodes as they negotiate a workflow.
This can range from a simple case of completing a trade which has been agreed upon externally, to more complex
processes such as handling fixing of interest rate swaps.</p>
<h3>Types</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="-abstract-state-replacement-flow/index.html">AbstractStateReplacementFlow</a></p>
</td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">class </span><span class="identifier">AbstractStateReplacementFlow</span></code>
<p>Abstract flow to be used for replacing one state with another, for example when changing the notary of a state.
Notably this requires a one to one replacement of states, states cannot be split, merged or issued as part of these
flows.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-collect-signature-flow/index.html">CollectSignatureFlow</a></p>
</td>
<td>
<code><span class="keyword">class </span><span class="identifier">CollectSignatureFlow</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="-flow-logic/index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html"><span class="identifier">List</span></a><span class="symbol">&lt;</span><a href="../net.corda.core.crypto/-transaction-signature/index.html"><span class="identifier">TransactionSignature</span></a><span class="symbol">&gt;</span><span class="symbol">&gt;</span></code>
<p>Get and check the required signature.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-collect-signatures-flow/index.html">CollectSignaturesFlow</a></p>
</td>
<td>
<code><span class="keyword">class </span><span class="identifier">CollectSignaturesFlow</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="-flow-logic/index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><a href="../net.corda.core.transactions/-signed-transaction/index.html"><span class="identifier">SignedTransaction</span></a><span class="symbol">&gt;</span></code>
<p>The <a href="-collect-signatures-flow/index.html">CollectSignaturesFlow</a> is used to automate the collection of counterparty signatures for a given transaction.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-contract-upgrade-flow/index.html">ContractUpgradeFlow</a></p>
</td>
<td>
<code><span class="keyword">object </span><span class="identifier">ContractUpgradeFlow</span></code>
<p>A flow to be used for authorising and upgrading state objects of an old contract to a new contract.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-data-vending-flow/index.html">DataVendingFlow</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">class </span><span class="identifier">DataVendingFlow</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="-flow-logic/index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Void.html"><span class="identifier">Void</span></a><span class="symbol">?</span><span class="symbol">&gt;</span></code></td>
</tr>
<tr>
<td>
<p><a href="-finality-flow/index.html">FinalityFlow</a></p>
</td>
<td>
<code><span class="keyword">class </span><span class="identifier">FinalityFlow</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="-flow-logic/index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><a href="../net.corda.core.transactions/-signed-transaction/index.html"><span class="identifier">SignedTransaction</span></a><span class="symbol">&gt;</span></code>
<p>Verifies the given transaction, then sends it to the named notary. If the notary agrees that the transaction
is acceptable then it is from that point onwards committed to the ledger, and will be written through to the
vault. Additionally it will be distributed to the parties reflected in the participants list of the states.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-flow-info/index.html">FlowInfo</a></p>
</td>
<td>
<code><span class="keyword">data</span> <span class="keyword">class </span><span class="identifier">FlowInfo</span></code>
<p>Version and name of the CorDapp hosting the other side of the flow.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-flow-initiator/index.html">FlowInitiator</a></p>
</td>
<td>
<code><span class="keyword">sealed</span> <span class="keyword">class </span><span class="identifier">FlowInitiator</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/security/Principal.html"><span class="identifier">Principal</span></a></code>
<p>Please note that <a href="-flow-initiator/index.html">FlowInitiator</a> has been superceded by <a href="../net.corda.core.context/-invocation-context/index.html">net.corda.core.context.InvocationContext</a>, which offers
more detail for the same event.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-flow-logic/index.html">FlowLogic</a></p>
</td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">class </span><span class="identifier">FlowLogic</span><span class="symbol">&lt;</span><span class="keyword">out</span>&nbsp;<span class="identifier">T</span><span class="symbol">&gt;</span></code>
<p>A sub-class of <a href="-flow-logic/index.html">FlowLogic</a> implements a flow using direct, straight line blocking code. Thus you
can write complex flow logic in an ordinary fashion, without having to think about callbacks, restarting after
a node crash, how many instances of your flow there are running and so on.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-flow-logic-ref.html">FlowLogicRef</a></p>
</td>
<td>
<code><span class="keyword">interface </span><span class="identifier">FlowLogicRef</span></code>
<p>A handle interface representing a <a href="-flow-logic/index.html">FlowLogic</a> instance which would be possible to safely pass out of the contract sandbox.
Use FlowLogicRefFactory to construct a concrete security checked instance.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-flow-logic-ref-factory/index.html">FlowLogicRefFactory</a></p>
</td>
<td>
<code><span class="keyword">interface </span><span class="identifier">FlowLogicRefFactory</span></code>
<p>The public factory interface for creating validated <a href="-flow-logic-ref.html">FlowLogicRef</a> instances as part of the scheduling framework.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-flow-session/index.html">FlowSession</a></p>
</td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">class </span><span class="identifier">FlowSession</span></code>
<p>A <a href="-flow-session/index.html">FlowSession</a> is a handle on a communication sequence between two paired flows, possibly running on separate nodes.
It is used to send and receive messages between the flows as well as to query information about the counter-flow.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-flow-stack-snapshot/index.html">FlowStackSnapshot</a></p>
</td>
<td>
<code><span class="keyword">data</span> <span class="keyword">class </span><span class="identifier">FlowStackSnapshot</span></code>
<p>Main data object representing snapshot of the flow stack, extracted from the Quasar stack.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-notarisation-payload/index.html">NotarisationPayload</a></p>
</td>
<td>
<code><span class="keyword">data</span> <span class="keyword">class </span><span class="identifier">NotarisationPayload</span></code>
<p>Container for the transaction and notarisation request signature.
This is the payload that gets sent by a client to a notary service for committing the input states of the <a href="-notarisation-payload/transaction.html">transaction</a>.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-notarisation-request/index.html">NotarisationRequest</a></p>
</td>
<td>
<code><span class="keyword">class </span><span class="identifier">NotarisationRequest</span></code>
<p>A notarisation request specifies a list of states to consume and the id of the consuming transaction. Its primary
purpose is for notarisation traceability â€“ a signature over the notarisation request, <a href="-notarisation-request-signature/index.html">NotarisationRequestSignature</a>,
allows a notary to prove that a certain party requested the consumption of a particular state.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-notarisation-request-signature/index.html">NotarisationRequestSignature</a></p>
</td>
<td>
<code><span class="keyword">data</span> <span class="keyword">class </span><span class="identifier">NotarisationRequestSignature</span></code>
<p>A wrapper around a digital signature used for notarisation requests.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-notarisation-response/index.html">NotarisationResponse</a></p>
</td>
<td>
<code><span class="keyword">data</span> <span class="keyword">class </span><span class="identifier">NotarisationResponse</span></code>
<p>Payload returned by the notary service flow to the client.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-notary-change-flow/index.html">NotaryChangeFlow</a></p>
</td>
<td>
<code><span class="keyword">class </span><span class="identifier">NotaryChangeFlow</span><span class="symbol">&lt;</span><span class="keyword">out</span>&nbsp;<span class="identifier">T</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../net.corda.core.contracts/-contract-state/index.html"><span class="identifier">ContractState</span></a><span class="symbol">&gt;</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="-abstract-state-replacement-flow/-instigator/index.html"><span class="identifier">Instigator</span></a><span class="symbol">&lt;</span><a href="-notary-change-flow/index.html#T"><span class="identifier">T</span></a><span class="symbol">,</span>&nbsp;<a href="-notary-change-flow/index.html#T"><span class="identifier">T</span></a><span class="symbol">,</span>&nbsp;<a href="../net.corda.core.identity/-party/index.html"><span class="identifier">Party</span></a><span class="symbol">&gt;</span></code>
<p>A flow to be used for changing a state's Notary. This is required since all input states to a transaction
must point to the same notary.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-notary-error/index.html">NotaryError</a></p>
</td>
<td>
<code><span class="keyword">sealed</span> <span class="keyword">class </span><span class="identifier">NotaryError</span></code>
<p>Specifies the cause for notarisation request failure.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-notary-flow/index.html">NotaryFlow</a></p>
</td>
<td>
<code><span class="keyword">class </span><span class="identifier">NotaryFlow</span></code></td>
</tr>
<tr>
<td>
<p><a href="-receive-state-and-ref-flow/index.html">ReceiveStateAndRefFlow</a></p>
</td>
<td>
<code><span class="keyword">class </span><span class="identifier">ReceiveStateAndRefFlow</span><span class="symbol">&lt;</span><span class="keyword">out</span>&nbsp;<span class="identifier">T</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../net.corda.core.contracts/-contract-state/index.html"><span class="identifier">ContractState</span></a><span class="symbol">&gt;</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="-flow-logic/index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html"><span class="identifier">List</span></a><span class="symbol">&lt;</span><a href="../net.corda.core.contracts/-state-and-ref/index.html"><span class="identifier">StateAndRef</span></a><span class="symbol">&lt;</span><a href="-receive-state-and-ref-flow/index.html#T"><span class="identifier">T</span></a><span class="symbol">&gt;</span><span class="symbol">&gt;</span><span class="symbol">&gt;</span></code>
<p>The <a href="-receive-state-and-ref-flow/index.html">ReceiveStateAndRefFlow</a> should be called in response to the <a href="-send-state-and-ref-flow/index.html">SendStateAndRefFlow</a>.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-receive-transaction-flow/index.html">ReceiveTransactionFlow</a></p>
</td>
<td>
<code><span class="keyword">class </span><span class="identifier">ReceiveTransactionFlow</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="-flow-logic/index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><a href="../net.corda.core.transactions/-signed-transaction/index.html"><span class="identifier">SignedTransaction</span></a><span class="symbol">&gt;</span></code>
<p>The <a href="-receive-transaction-flow/index.html">ReceiveTransactionFlow</a> should be called in response to the <a href="-send-transaction-flow/index.html">SendTransactionFlow</a>.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-send-state-and-ref-flow/index.html">SendStateAndRefFlow</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">class </span><span class="identifier">SendStateAndRefFlow</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="-data-vending-flow/index.html"><span class="identifier">DataVendingFlow</span></a></code>
<p>The <a href="-send-state-and-ref-flow/index.html">SendStateAndRefFlow</a> should be used to send a list of input <a href="../net.corda.core.contracts/-state-and-ref/index.html">StateAndRef</a> to another peer that wishes to verify
the input's integrity by resolving and checking the dependencies as well. The other side should invoke <a href="-receive-state-and-ref-flow/index.html">ReceiveStateAndRefFlow</a>
at the right point in the conversation to receive the input state and ref and perform the resolution back-and-forth
required to check the dependencies.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-send-transaction-flow/index.html">SendTransactionFlow</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">class </span><span class="identifier">SendTransactionFlow</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="-data-vending-flow/index.html"><span class="identifier">DataVendingFlow</span></a></code>
<p>The <a href="-send-transaction-flow/index.html">SendTransactionFlow</a> should be used to send a transaction to another peer that wishes to verify that transaction's
integrity by resolving and checking the dependencies as well. The other side should invoke <a href="-receive-transaction-flow/index.html">ReceiveTransactionFlow</a> at
the right point in the conversation to receive the sent transaction and perform the resolution back-and-forth required
to check the dependencies and download any missing attachments.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-sign-transaction-flow/index.html">SignTransactionFlow</a></p>
</td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">class </span><span class="identifier">SignTransactionFlow</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="-flow-logic/index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><a href="../net.corda.core.transactions/-signed-transaction/index.html"><span class="identifier">SignedTransaction</span></a><span class="symbol">&gt;</span></code>
<p>The <a href="-sign-transaction-flow/index.html">SignTransactionFlow</a> should be called in response to the <a href="-collect-signatures-flow/index.html">CollectSignaturesFlow</a>. It automates the signing of
a transaction providing the transaction:</p>
</td>
</tr>
<tr>
<td>
<p><a href="-stack-frame-data-token/index.html">StackFrameDataToken</a></p>
</td>
<td>
<code><span class="keyword">data</span> <span class="keyword">class </span><span class="identifier">StackFrameDataToken</span></code>
<p>Token class, used to indicate stack presence of the corda internal data. Since this data is of no use for
a CordApp developer, it is skipped from serialisation and its presence is only marked by this token.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-state-consumption-details/index.html">StateConsumptionDetails</a></p>
</td>
<td>
<code><span class="keyword">data</span> <span class="keyword">class </span><span class="identifier">StateConsumptionDetails</span></code>
<p>Contains information about the consuming transaction for a particular state.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-state-machine-run-id/index.html">StateMachineRunId</a></p>
</td>
<td>
<code><span class="keyword">data</span> <span class="keyword">class </span><span class="identifier">StateMachineRunId</span></code>
<p>A unique identifier for a single state machine run, valid across node restarts. Note that a single run always
has at least one flow, but that flow may also invoke sub-flows: they all share the same run id.</p>
</td>
</tr>
</tbody>
</table>
<h3>Annotations</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="-initiated-by/index.html">InitiatedBy</a></p>
</td>
<td>
<code><span class="keyword">annotation</span> <span class="keyword">class </span><span class="identifier">InitiatedBy</span></code>
<p>This annotation is required by any <a href="-flow-logic/index.html">FlowLogic</a> that is designed to be initiated by a counterparty flow. The class must
have at least a constructor which takes in a single <a href="../net.corda.core.identity/-party/index.html">net.corda.core.identity.Party</a> parameter which represents the
initiating counterparty. The <a href="-flow-logic/index.html">FlowLogic</a> that does the initiating is specified by the <a href="-initiated-by/value.html">value</a> property and itself must be annotated
with <a href="-initiating-flow/index.html">InitiatingFlow</a>.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-initiating-flow/index.html">InitiatingFlow</a></p>
</td>
<td>
<code><span class="keyword">annotation</span> <span class="keyword">class </span><span class="identifier">InitiatingFlow</span></code>
<p>This annotation is required by any <a href="-flow-logic/index.html">FlowLogic</a> which has been designated to initiate communication with a counterparty
and request they start their side of the flow communication.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-schedulable-flow/index.html">SchedulableFlow</a></p>
</td>
<td>
<code><span class="keyword">annotation</span> <span class="keyword">class </span><span class="identifier">SchedulableFlow</span></code>
<p>Any <a href="-flow-logic/index.html">FlowLogic</a> which is schedulable and is designed to be invoked by a <a href="../net.corda.core.contracts/-schedulable-state/index.html">net.corda.core.contracts.SchedulableState</a>
must have this annotation. If it's missing <a href="-flow-logic-ref-factory/create.html">FlowLogicRefFactory.create</a> will throw an exception when it comes time
to schedule the next activity in <a href="../net.corda.core.contracts/-schedulable-state/next-scheduled-activity.html">net.corda.core.contracts.SchedulableState.nextScheduledActivity</a>.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-startable-by-r-p-c/index.html">StartableByRPC</a></p>
</td>
<td>
<code><span class="keyword">annotation</span> <span class="keyword">class </span><span class="identifier">StartableByRPC</span></code>
<p>Any <a href="-flow-logic/index.html">FlowLogic</a> which is to be started by the RPC interface (<a href="../net.corda.core.messaging/-corda-r-p-c-ops/start-flow-dynamic.html">net.corda.core.messaging.CordaRPCOps.startFlowDynamic</a>
and <a href="../net.corda.core.messaging/-corda-r-p-c-ops/start-tracked-flow-dynamic.html">net.corda.core.messaging.CordaRPCOps.startTrackedFlowDynamic</a>) must have this annotation. If it's missing the
flow will not be allowed to start and an exception will be thrown.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-startable-by-service/index.html">StartableByService</a></p>
</td>
<td>
<code><span class="keyword">annotation</span> <span class="keyword">class </span><span class="identifier">StartableByService</span></code>
<p>Any <a href="-flow-logic/index.html">FlowLogic</a> which is to be started by the <a href="#">AppServiceHub</a> interface from
within a <a href="#">CordaService</a> must have this annotation. If it's missing the
flow will not be allowed to start and an exception will be thrown.</p>
</td>
</tr>
</tbody>
</table>
<h3>Exceptions</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="-flow-exception/index.html">FlowException</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">class </span><span class="identifier">FlowException</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../net.corda.core/-corda-exception/index.html"><span class="identifier">CordaException</span></a><span class="symbol">, </span><span class="identifier">IdentifiableException</span></code>
<p>Exception which can be thrown by a <a href="-flow-logic/index.html">FlowLogic</a> at any point in its logic to unexpectedly bring it to a permanent end.
The exception will propagate to all counterparty flows and will be thrown on their end the next time they wait on a
<a href="-flow-session/receive.html">FlowSession.receive</a> or <a href="-flow-session/send-and-receive.html">FlowSession.sendAndReceive</a>. Any flow which no longer needs to do a receive, or has already
ended, will not receive the exception (if this is required then have them wait for a confirmation message).</p>
</td>
</tr>
<tr>
<td>
<p><a href="-illegal-flow-logic-exception/index.html">IllegalFlowLogicException</a></p>
</td>
<td>
<code><span class="keyword">class </span><span class="identifier">IllegalFlowLogicException</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-illegal-argument-exception/index.html"><span class="identifier">IllegalArgumentException</span></a></code>
<p>Thrown if the structure of a class implementing a flow is not correct. There can be several causes for this such as
not inheriting from <a href="-flow-logic/index.html">FlowLogic</a>, not having a valid constructor and so on.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-notary-exception/index.html">NotaryException</a></p>
</td>
<td>
<code><span class="keyword">class </span><span class="identifier">NotaryException</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="-flow-exception/index.html"><span class="identifier">FlowException</span></a></code>
<p>Exception thrown by the notary service if any issues are encountered while trying to commit a transaction. The
underlying <a href="-notary-exception/error.html">error</a> specifies the cause of failure.</p>
</td>
</tr>
<tr>
<td>
<p><a href="-state-replacement-exception/index.html">StateReplacementException</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">class </span><span class="identifier">StateReplacementException</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="-flow-exception/index.html"><span class="identifier">FlowException</span></a></code></td>
</tr>
<tr>
<td>
<p><a href="-unexpected-flow-end-exception/index.html">UnexpectedFlowEndException</a></p>
</td>
<td>
<code><span class="keyword">class </span><span class="identifier">UnexpectedFlowEndException</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../net.corda.core/-corda-runtime-exception/index.html"><span class="identifier">CordaRuntimeException</span></a><span class="symbol">, </span><span class="identifier">IdentifiableException</span></code>
<p>Thrown when a flow session ends unexpectedly due to a type mismatch (the other side sent an object of a type
that we were not expecting), or the other side had an internal error, or the other side terminated when we
were waiting for a response.</p>
</td>
</tr>
</tbody>
</table>

<style>
    @import url("https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,500,600");
    #cookies-eu-banner {
        background-color: rgba(83, 88, 95, 0.9);
        border-radius: 3px;
        color: #fff;
        font-family: 'Source Sans Pro', sans-serif;
        font-size: 13px;
        font-weight: 400;
        left: 3px;
        position: fixed;
        padding: 6px;
        right: 3px;
        text-align: center;
        top: 100px;
        z-index: 1000;
    }
    
    #cookies-eu-banner h3,
    #cookies-eu-banner p {
        color: #fff;
        font-size: 18px;
        letter-spacing: 0;
    }
    
    #cookies-eu-banner h3 {
        font-size: 24px;
        font-style: normal;
        font-weight: 400;
        line-height: 1.2;
        margin: 9px 0 0;
        text-transform: uppercase;
    }
    
    #cookies-eu-banner p {
        margin-bottom: 10px;
        padding: 8px 36px 0;
        text-align: justify;
        line-height: 1.4em;
    }
    
    #cookies-eu-banner fieldset {
        min-width: 0;
        padding: 0;
        margin: 0;
        border: 0;
    }
    
    #cookies-eu-banner legend {
        color: inherit;
        display: block;
        font-size: 18px;
        line-height: inherit;
        max-width: 100%;
        margin-bottom: 16px;
        padding: 0;
        white-space: normal;
        width: 100%;
    }
    
    #cookies-eu-banner a {
        color: #62AAF1;
    }
    
    #cookies-eu-banner .cookies-button-group {
        display: flex;
        justify-content: center;
    }
    
    #cookies-eu-accept,
    #cookies-eu-accept-all {
        background-color: #ec1d24;
        border: none;
        border-radius: 6px;
        color: #fff;
        font-size: 12px;
        font-weight: 600;
        margin: 0 10px 10px;
        max-height: 40px;
        height: 40px;
        line-height: 1.1;
        text-decoration: none;
        width: 150px;
    }
    
    .cookies-checkbox {
        display: inline-block;
        margin: 5px 10px;
    }
    
    .cookies-checkbox label {
        font-size: 16px;
        margin-left: 3px;
    }
    
    @media screen and (min-width: 768px) {
        #cookies-eu-banner {
            bottom: 5px;
            top: inherit;
        }
        #cookies-eu-accept,
        #cookies-eu-accept-all {
            font-size: 14px;
        }
    }
</style>
<div id="cookies-eu-banner" style="display: none;">
    <h3 style="text-transform:none">Your privacy</h3>
    <div class='cookie-flex'>
        <p>
            We use cookies to improve your experience on our site, and to help us understand how people use our documentation. For more detailed information, see our <a href="https://www.r3.com/privacy-policy/">privacy policy</a> and <a href="#">cookie declaration</a>.
        </p>
        <form id='cookie-consent-form'>
            <fieldset>
                <legend>
                    Please select from the following options to continue to our site.
                </legend>
                <div class='cookies-button-group'>
                    <button id="cookies-eu-accept" type="button">
                      Allow cookies selected
                    </button>
                    <button id="cookies-eu-accept-all" type="button">
                      Allow all cookies
                    </button>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="necessary"
                      name="necessary"
                      autocomplete="off"
                      checked
                      disabled />
                        <input
                        name="necessary"
                        type="hidden"
                        value="on"/>
                        <label for="necessary">Necessary</label>
                    </span>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="preferences"
                      name="preferences"
                      autocomplete="off" />
                      <label for="preferences">Preferences</label>
                    </span>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="statistics"
                      name="statistics"
                      autocomplete="off" />
                      <label for="statistics">Statistics</label>
                    </span>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="marketing"
                      name="marketing"
                      autocomplete="off" />
                      <label for="marketing">Marketing</label>
                    </span>
                </div>
            </fieldset>
        </form>
    </div>
</div>
<script class='api-keys'>
    var gaKey = 'UA-87760032-1';
    var algolia_appId = "UX2KMUWFAL";
    var algolia_apiKey = "1fe3367db02689b4aeebc59efad5abaf";
    var algolia_index = "docs.corda.net";
</script>
<script class='cookies-eu-banner'>
    ! function(root, factory) {
        "use strict";
        "function" == typeof define && define.amd ? define([], factory) : "object" == typeof exports ? module.exports = factory() : root.CookiesEuBanner = factory()
    }(window, function() {
        "use strict";
        var document = window.document,
            CookiesEuBanner = function(launchFunction, waitAccept, useLocalStorage, undefined) {
                if (!(this instanceof CookiesEuBanner)) return new CookiesEuBanner(launchFunction);
                this.cookieTimeout = 33696e6, this.bots = /bot|crawler|spider|crawling/i, this.cookieName = "hasConsent", this.trackingCookiesNames = ["__utma", "__utmb", "__utmc", "__utmt", "__utmv", "__utmz", "_ga", "_gat", "_gid"], this.launchFunction = launchFunction, this.waitAccept = waitAccept || !1, this.useLocalStorage = useLocalStorage || !1, this.init()
            };
        return CookiesEuBanner.prototype = {
            init: function() {
                var isBot = this.bots.test(navigator.userAgent);
                navigator.doNotTrack || navigator.msDoNotTrack || window.doNotTrack;
                return isBot || !1 === this.hasConsent() ? (this.removeBanner(0), !1) : !0 === this.hasConsent() ? (this.launchFunction(), !0) : (this.showBanner(), void(this.waitAccept || this.setConsent(!0)))
            },
            showBanner: function() {
                var _this = this,
                    getElementById = document.getElementById.bind(document),
                    banner = getElementById("cookies-eu-banner"),
                    rejectButton = getElementById("cookies-eu-reject"),
                    acceptButton = getElementById("cookies-eu-accept"),
                    moreLink = getElementById("cookies-eu-more"),
                    waitRemove = void 0 === banner.dataset.waitRemove ? 0 : parseInt(banner.dataset.waitRemove),
                    addClickListener = this.addClickListener,
                    removeBanner = _this.removeBanner.bind(_this, waitRemove);
                banner.style.display = "block", moreLink && addClickListener(moreLink, function() {
                    _this.deleteCookie(_this.cookieName)
                }), acceptButton && addClickListener(acceptButton, function() {
                    removeBanner(), _this.setConsent(!0), _this.launchFunction()
                }), rejectButton && addClickListener(rejectButton, function() {
                    removeBanner(), _this.setConsent(!1), _this.trackingCookiesNames.map(_this.deleteCookie)
                })
            },
            setConsent: function(consent) {
                if (this.useLocalStorage) return localStorage.setItem(this.cookieName, consent);
                this.setCookie(this.cookieName, consent)
            },
            hasConsent: function() {
                function isCookieSetTo(value) {
                    return -1 < document.cookie.indexOf(cookieName + "=" + value) || localStorage.getItem(cookieName) === value
                }
                var cookieName = this.cookieName;
                return !!isCookieSetTo("true") || !isCookieSetTo("false") && null
            },
            setCookie: function(name, value) {
                var date = new Date;
                date.setTime(date.getTime() + this.cookieTimeout), document.cookie = name + "=" + value + ";SameSite=Strict;expires=" + date.toGMTString() + ";path=/"
            },
            deleteCookie: function(name) {
                var hostname = document.location.hostname.replace(/^www\./, ""),
                    commonSuffix = "; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/";
                document.cookie = name + "=; domain=." + hostname + commonSuffix, document.cookie = name + "=" + commonSuffix
            },
            addClickListener: function(DOMElement, callback) {
                if (DOMElement.attachEvent) return DOMElement.attachEvent("onclick", callback);
                DOMElement.addEventListener("click", callback)
            },
            removeBanner: function(wait) {
                setTimeout(function() {
                    var banner = document.getElementById("cookies-eu-banner");
                    banner && banner.parentNode && banner.parentNode.removeChild(banner)
                }, wait)
            }
        }, CookiesEuBanner
    });
</script>
<script class='google-analytics'>
    function googleAnalytics() {
        var i, s, o, r, a, m;
        i = window, s = document, o = "script", r = "ga", i.GoogleAnalyticsObject = r, i.ga = i.ga || function() {
            (i.ga.q = i.ga.q || []).push(arguments)
        }, i.ga.l = +new Date, a = s.createElement(o), m = s.getElementsByTagName(o)[0], a.async = 1, a.src = "//www.google-analytics.com/analytics.js", m.parentNode.insertBefore(a, m), window.ga("create", "UA-87760032-1", "auto"), window.ga("send", "pageview")
    }
</script>
<script class='docSearchInit'>
    function docSearchInit() {
        var algoliaOptions;
        document.querySelector("#search-input") && (algoliaOptions = {
            hitsPerPage: 5,
            facetFilters: facetFilters
        }, /404.html/.test(window.location.pathname) && delete algoliaOptions.facetFilters, window.docsearch({
            appId: algolia_appId,
            apiKey: algolia_apiKey,
            indexName: algolia_index,
            inputSelector: "#search-input",
            algoliaOptions: algoliaOptions
        }))
    }
</script>
<script class='corda-cookie-banner'>
    const docsearchLoad = (resolve, reject) => {
        const script = document.createElement('script');
        document.body.appendChild(script);
        script.onload = resolve;
        script.onerror = reject;
        script.async = true;
        script.src = "https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.js";
    };

    class DocsiteCookies {
        constructor() {
            this.name = 'corda_cookie';
            this.cookiesAccepted = {
                set: true,
                necessary: true,
                preferences: false,
                statistics: false,
                marketing: false
            };
            this.form = document.querySelector('#cookie-consent-form');
            this.handleAllCookies();

            new CookiesEuBanner(() => {
                this.cookieBanner();
            }, true);
        }

        handleAllCookies() {
            const acceptButton = document.querySelector('#cookies-eu-accept');
            const allCookiesButton = document.querySelector('#cookies-eu-accept-all');

            allCookiesButton.addEventListener('click', e => {
                e.preventDefault();
                this.allowAllCookies(this.form);
                acceptButton.click();
            });
        }

        cookieBanner() {
            if (!this.checkConsent()) {
                this.formToCookie(this.name, this.form);
                this.setAdditionalServices();
            } else {
                this.setAdditionalServices();
            }
        }

        allowAllCookies(form) {
            let cookiePreferences = form.querySelectorAll('.cookies-checkbox');
            for (let cookie of cookiePreferences) {
                cookie.querySelector('input').checked = true;
            }
        }

        formToCookie(name, form) {
            const thirteenMonthsInMils = 31104000000;

            let date = new Date();
            date.setTime(date.getTime() + thirteenMonthsInMils);

            let formData = new FormData(form);
            for (var pair of formData.entries()) {
                switch (pair[0]) {
                    case "necessary":
                        this.cookiesAccepted.necessary = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    case "preferences":
                        this.cookiesAccepted.preferences = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    case "statistics":
                        this.cookiesAccepted.statistics = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    case "marketing":
                        this.cookiesAccepted.marketing = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    default:
                        break;
                }
            }
            let cookieValue = JSON.stringify(this.cookiesAccepted);

            document.cookie = `${name}=${cookieValue};SameSite=Strict;expires=${date.toGMTString()};path=/`;
        }

        checkConsent() {
            let cookieName = this.name;
            let cookieValue = this.getCookie(cookieName);

            if (cookieValue) {
                if (cookieValue.set === true) {
                    return true;
                } else {
                    return false;
                }
            } else {
                return false;
            }
        }

        getCookie(name) {
            let value = "; " + document.cookie;
            let parts = value.split("; " + name + "=");
            let cValue = "";

            if (parts.length == 2) {
                cValue = parts.pop().split(";").shift();
            }

            if (hasJsonStructure(cValue)) {
                return JSON.parse(cValue);
            } else {
                return cValue;
            }
        }

        setAdditionalServices() {
            let cookieConsent = this.getCookie(this.name);
            for (let [key, value] of Object.entries(cookieConsent)) {
                if (key === 'necessary' && value === true) {
                    new Promise(docsearchLoad)
                        .then(() => {
                            docSearchInit();
                        })
                        .catch(err => console.log(err));
                }
                if (key === 'statistics' && value === true) {
                    googleAnalytics();
                }
            }
        }
    }

    function hasJsonStructure(str) {
        if (typeof str !== 'string') return false;
        try {
            const result = JSON.parse(str);
            const type = Object.prototype.toString.call(result);
            return type === '[object Object]' ||
                type === '[object Array]';
        } catch (err) {
            return false;
        }
    }
</script>
<script class='initialise'>
    new DocsiteCookies();
</script>
</body>
</HTML>
