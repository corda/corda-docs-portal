---
description: "Review the metrics generated for the messaging patterns library. This messaging patterns library contains several embedded metrics that provide measurements for all workers through their Kafka consumers and producers."
date: '2023-06-14'
version: 'Corda 5.1'
title: "Messaging"
menu:
  corda51:
    parent: corda51-cluster-metrics
    identifier: corda51-cluster-messaging
    weight: 1200
section_menu: corda51
---

# Messaging

The messaging patterns library contains several embedded metrics that provide measurements for all workers through their {{< tooltip >}}Kafka{{< /tooltip >}} consumers and producers.

<style>
table th:first-of-type {
    width: 25%;
}
table th:nth-of-type(2) {
    width: 10%;
}
table th:nth-of-type(3) {
    width: 20%;
}
table th:nth-of-type(4) {
    width: 45%;
}
</style>

| Metric | Type | Tags | Description |
| :----------- | :----------- | :----------- | :----------- |
| `corda_messaging_processor_time_seconds` | Timer | <ul><li>`messagepattern_type`</li><li>`messagepattern_clientid`</li><li>`operation_name`</li></ul> | The time spent in the consumerâ€™s `onNext` or `onSnapshot` functions. The following subscription processors have this metric wrapping the calls to `onNext` functions: <ul><li>`PubSubSubscriptionImpl`</li><li>`CordaRPCSenderImpl`</li><li>`CompactedSubscriptionImpl` (`onNext` and `onSnapshot`)</li><li>`EventLogSubscriptionImpl`</li><li>`PubSubSubscriptionImpl`</li><li>`RPCSubscriptionImpl`</li><li>`StateAndEventSubscriptionImpl`</li></ul> |
| `corda_consumer_records_consumed` | Gauge | <ul><li>`messagepattern_clientid`</li><li>`partition`</li></ul> | The size of batches polled from Kafka in consumers. |
| `corda_corda_consumer_poll_time_seconds` | Timer | <ul><li>`messagepattern_clientid`</li></ul> | Poll times for all Kafka consumers. |
| `corda_consumer_partitioned_inmemory_store` | Gauge | <ul><li>`messagepattern_type`</li><li>`messagepattern.clientid`</li><li>`partition`</li></ul> | Measure for the number of in-memory {{< tooltip >}}states{{< /tooltip >}} held in consumers with partitions. |
| `corda_consumer_compacted_inmemory_store` | Gauge | <ul><li>`messagepattern_type`</li><li>`messagepattern.clientid`</li></ul> | Measure for the number of in-memory states held in compacted consumers. |
| `corda_producer_chunks_generated` | DistributionSummary | <ul><li>`messagepattern_clientid`</li><li>`topic`</li></ul> | The number of chunks generated by Kafka producers. |

Tags:
* `partition`: The partition of the Kafka topic published to or consumed from.
* `messagepattern_type`: The message pattern type.
* `messagepattern_clientid`: The message pattern client ID.
* `operation_name`: The name of the operation that the metric is related to.
* `topic`: The name of the Kafka topic published to or consumed from.
