<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_221) on Tue Dec 15 12:34:58 GMT 2020 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>FlowLogic</title>
<meta name="date" content="2020-12-15">
<meta name="keywords" content="net.corda.core.flows.FlowLogic class">
<meta name="keywords" content="Companion">
<meta name="keywords" content="getLogger()">
<meta name="keywords" content="getRunId()">
<meta name="keywords" content="getServiceHub()">
<meta name="keywords" content="isKilled()">
<meta name="keywords" content="initiateFlow()">
<meta name="keywords" content="getOurIdentityAndCert()">
<meta name="keywords" content="getOurIdentity()">
<meta name="keywords" content="getFlowInfo()">
<meta name="keywords" content="sendAndReceive()">
<meta name="keywords" content="receive()">
<meta name="keywords" content="send()">
<meta name="keywords" content="receiveAllMap()">
<meta name="keywords" content="receiveAll()">
<meta name="keywords" content="sendAll()">
<meta name="keywords" content="sendAllMap()">
<meta name="keywords" content="subFlow()">
<meta name="keywords" content="checkFlowPermission()">
<meta name="keywords" content="recordAuditEvent()">
<meta name="keywords" content="getProgressTracker()">
<meta name="keywords" content="call()">
<meta name="keywords" content="track()">
<meta name="keywords" content="trackStepsTreeIndex()">
<meta name="keywords" content="trackStepsTree()">
<meta name="keywords" content="waitForLedgerCommit()">
<meta name="keywords" content="waitForStateConsumption()">
<meta name="keywords" content="flowStackSnapshot()">
<meta name="keywords" content="persistFlowStackSnapshot()">
<meta name="keywords" content="await()">
<meta name="keywords" content="checkFlowIsNotKilled()">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>

<meta name="docsearch:language" content="en">
<meta name="docsearch:version" content="4.5">
<meta name="docsearch:project" content="corda-os">
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="FlowLogic";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":42,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":42,"i19":10,"i20":10,"i21":10,"i22":42,"i23":10,"i24":10,"i25":42,"i26":10,"i27":10,"i28":10,"i29":10,"i30":10,"i31":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"],32:["t6","Deprecated Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../net/corda/core/flows/FlowInitiator.html" title="class in net.corda.core.flows"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../net/corda/core/flows/FlowLogicRef.html" title="interface in net.corda.core.flows"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?net/corda/core/flows/FlowLogic.html" target="_top">Frames</a></li>
<li><a href="FlowLogic.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">net.corda.core.flows</div>
<h2 title="Class FlowLogic" class="title">Class FlowLogic&lt;T&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>net.corda.core.flows.FlowLogic&lt;T&gt;</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../net/corda/finance/flows/AbstractCashFlow.html" title="class in net.corda.finance.flows">AbstractCashFlow</a>, <a href="../../../../net/corda/core/flows/AbstractStateReplacementFlow.Acceptor.html" title="class in net.corda.core.flows">AbstractStateReplacementFlow.Acceptor</a>, <a href="../../../../net/corda/core/flows/ContractUpgradeFlow.Authorise.html" title="class in net.corda.core.flows">ContractUpgradeFlow.Authorise</a>, <a href="../../../../net/corda/finance/flows/TwoPartyTradeFlow.Buyer.html" title="class in net.corda.finance.flows">TwoPartyTradeFlow.Buyer</a>, <a href="../../../../net/corda/finance/flows/CashExitResponderFlow.html" title="class in net.corda.finance.flows">CashExitResponderFlow</a>, <a href="../../../../net/corda/finance/flows/CashPaymentReceiverFlow.html" title="class in net.corda.finance.flows">CashPaymentReceiverFlow</a>, <a href="../../../../net/corda/core/flows/CollectSignatureFlow.html" title="class in net.corda.core.flows">CollectSignatureFlow</a>, <a href="../../../../net/corda/core/flows/CollectSignaturesFlow.html" title="class in net.corda.core.flows">CollectSignaturesFlow</a>, <a href="../../../../net/corda/core/flows/DataVendingFlow.html" title="class in net.corda.core.flows">DataVendingFlow</a>, <a href="../../../../net/corda/core/flows/ContractUpgradeFlow.Deauthorise.html" title="class in net.corda.core.flows">ContractUpgradeFlow.Deauthorise</a>, <a href="../../../../net/corda/core/flows/FinalityFlow.html" title="class in net.corda.core.flows">FinalityFlow</a>, <a href="../../../../net/corda/core/flows/AbstractStateReplacementFlow.Instigator.html" title="class in net.corda.core.flows">AbstractStateReplacementFlow.Instigator</a>, <a href="../../../../net/corda/finance/flows/TwoPartyDealFlow.Primary.html" title="class in net.corda.finance.flows">TwoPartyDealFlow.Primary</a>, <a href="../../../../net/corda/core/flows/ReceiveFinalityFlow.html" title="class in net.corda.core.flows">ReceiveFinalityFlow</a>, <a href="../../../../net/corda/core/flows/ReceiveStateAndRefFlow.html" title="class in net.corda.core.flows">ReceiveStateAndRefFlow</a>, <a href="../../../../net/corda/core/flows/ReceiveTransactionFlow.html" title="class in net.corda.core.flows">ReceiveTransactionFlow</a>, <a href="../../../../net/corda/finance/flows/TwoPartyDealFlow.Secondary.html" title="class in net.corda.finance.flows">TwoPartyDealFlow.Secondary</a>, <a href="../../../../net/corda/finance/flows/TwoPartyTradeFlow.Seller.html" title="class in net.corda.finance.flows">TwoPartyTradeFlow.Seller</a>, <a href="../../../../net/corda/core/flows/SignTransactionFlow.html" title="class in net.corda.core.flows">SignTransactionFlow</a>, <a href="../../../../net/corda/core/flows/WithReferencedStatesFlow.html" title="class in net.corda.core.flows">WithReferencedStatesFlow</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">FlowLogic&lt;T&gt;</span></pre>
<div class="block"><p><p>A sub-class of <a href="../../../../net/corda/core/flows/FlowLogic.html" title="class in net.corda.core.flows"><code>class FlowLogic</code></a> implements a flow using direct, straight line blocking code. Thus you
can write complex flow logic in an ordinary fashion, without having to think about callbacks, restarting after
a node crash, how many instances of your flow there are running and so on.</p></p><p><p><p>Invoking the network will cause the call stack to be suspended onto the heap and then serialized to a database using
the Quasar fibers framework. Because of this, if you need access to data that might change over time, you should
request it just-in-time via the <a href="../../../../net/corda/core/flows/FlowLogic.html#getServiceHub--"><code>FlowLogic.getServiceHub</code></a> property which is provided. Don't try and keep data you got from a
service across calls to send/receive/sendAndReceive because the world might change in arbitrary ways out from
underneath you, for instance, if the node is restarted or reconfigured!</p><p>Additionally, be aware of what data you pin either via the stack or in your <a href="../../../../net/corda/core/flows/FlowLogic.html" title="class in net.corda.core.flows"><code>class FlowLogic</code></a> implementation. Very large
objects or datasets will hurt performance by increasing the amount of data stored in each checkpoint.</p><p>If you'd like to use another FlowLogic class as a component of your own, construct it on the fly and then pass
it to the <a href="../../../../net/corda/core/flows/FlowLogic.html#subFlow-subLogic-"><code>FlowLogic.subFlow</code></a> method. It will return the result of that flow when it completes.</p><p>If your flow (whether it's a top-level flow or a subflow) is supposed to initiate a session with the counterparty
and request they start their counterpart flow, then make sure it's annotated with <a href="../../../../net/corda/core/flows/InitiatingFlow.html" title="interface in net.corda.core.flows"><code>interface InitiatingFlow</code></a>. This annotation
also has a version property to allow you to version your flow and enables a node to restrict support for the flow to
that particular version.</p><p>Functions that suspend the flow (including all functions on <a href="../../../../net/corda/core/flows/FlowSession.html" title="class in net.corda.core.flows"><code>class FlowSession</code></a>) accept a maySkipCheckpoint parameter
defaulting to false, false meaning a checkpoint should always be created on suspend. This parameter may be set to
true which allows the implementation to potentially optimise away the checkpoint, saving a roundtrip to the database.</p><p>This option however comes with a big warning sign: Setting the parameter to true requires the flow's code to be
replayable from the previous checkpoint (or start of flow) up until the next checkpoint (or end of flow) in order to
prepare for hard failures. As suspending functions always commit the flow's database transaction regardless of this
parameter the flow must be prepared for scenarios where a previous running of the flow <em>already committed itsrelevant database transactions</em>. Only set this option to true if you know what you're doing.</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowLogic.html" title="class in net.corda.core.flows"><code>class FlowLogic</code></a>, 
<a href="../../../../net/corda/core/flows/FlowLogic.html#getServiceHub--"><code>FlowLogic.getServiceHub</code></a>, 
<a href="../../../../net/corda/core/flows/FlowLogic.html" title="class in net.corda.core.flows"><code>class FlowLogic</code></a>, 
<a href="../../../../net/corda/core/flows/FlowLogic.html#subFlow-subLogic-"><code>FlowLogic.subFlow</code></a>, 
<a href="../../../../net/corda/core/flows/InitiatingFlow.html" title="interface in net.corda.core.flows"><code>interface InitiatingFlow</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html" title="class in net.corda.core.flows"><code>class FlowSession</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.Companion.html" title="class in net.corda.core.flows">FlowLogic.Companion</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../../net/corda/core/flows/FlowLogic.Companion.html" title="type parameter in FlowLogic.Companion">FlowLogic.Companion</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#Companion">Companion</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#FlowLogic--">FlowLogic</a></span>()</code>
<div class="block">A sub-class of <a href="../../../../net/corda/core/flows/FlowLogic.html" title="class in net.corda.core.flows"><code>class FlowLogic</code></a> implements a flow using direct, straight line blocking code. Thus you
can write complex flow logic in an ordinary fashion, without having to think about callbacks, restarting after
a node crash, how many instances of your flow there are running and so on.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t6" class="tableTab"><span><a href="javascript:show(32);">Deprecated Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>&lt;R&gt;&nbsp;R</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#await-operation-">await</a></span>(<a href="../../../../net/corda/core/flows/FlowExternalAsyncOperation.html" title="type parameter in FlowExternalAsyncOperation">FlowExternalAsyncOperation</a>&lt;R&gt;&nbsp;operation)</code>
<div class="block">Executes the specified operation and suspends until operation completion.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>&lt;R&gt;&nbsp;R</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#await-operation-">await</a></span>(<a href="../../../../net/corda/core/flows/FlowExternalOperation.html" title="type parameter in FlowExternalOperation">FlowExternalOperation</a>&lt;R&gt;&nbsp;operation)</code>
<div class="block">Executes the specified operation and suspends until operation completion.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>T</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#call--">call</a></span>()</code>
<div class="block">This is where you fill out your business logic.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#checkFlowIsNotKilled--">checkFlowIsNotKilled</a></span>()</code>
<div class="block">Helper function that throws a <a href="../../../../net/corda/core/flows/KilledFlowException.html" title="class in net.corda.core.flows"><code>exception KilledFlowException</code></a> if the current <a href="../../../../net/corda/core/flows/FlowLogic.html" title="class in net.corda.core.flows"><code>class FlowLogic</code></a> has been killed.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#checkFlowIsNotKilled-lazyMessage-">checkFlowIsNotKilled</a></span>(Function0&lt;? extends java.lang.Object&gt;&nbsp;lazyMessage)</code>
<div class="block">Helper function that throws a <a href="../../../../net/corda/core/flows/KilledFlowException.html" title="class in net.corda.core.flows"><code>exception KilledFlowException</code></a> if the current <a href="../../../../net/corda/core/flows/FlowLogic.html" title="class in net.corda.core.flows"><code>class FlowLogic</code></a> has been killed. The provided message is added to the
thrown <a href="../../../../net/corda/core/flows/KilledFlowException.html" title="class in net.corda.core.flows"><code>exception KilledFlowException</code></a>.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#checkFlowPermission-permissionName-extraAuditData-">checkFlowPermission</a></span>(java.lang.String&nbsp;permissionName,
                   java.util.Map&lt;java.lang.String,java.lang.String&gt;&nbsp;extraAuditData)</code>
<div class="block">Flows can call this method to ensure that the active FlowInitiator is authorised for a particular action.
This provides fine grained control over application level permissions, when RPC control over starting the flow is insufficient,
or the permission is runtime dependent upon the choices made inside long lived flow code.
For example some users may have restricted limits on how much cash they can transfer, or whether they can change certain fields.
An audit event is always recorded whenever this method is used.
If the permission is not granted for the FlowInitiator a FlowException is thrown.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/flows/FlowStackSnapshot.html" title="type parameter in FlowStackSnapshot">FlowStackSnapshot</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#flowStackSnapshot--">flowStackSnapshot</a></span>()</code>
<div class="block">Returns a shallow copy of the Quasar stack frames at the time of call to <a href="../../../../net/corda/core/flows/FlowLogic.html#flowStackSnapshot--"><code>FlowLogic.flowStackSnapshot</code></a>. Use this to inspect
what objects would be serialised at the time of call to a suspending action (e.g. send/receive).
Note: This logic is only available during tests and is not meant to be used during the production deployment.
Therefore the default implementation does nothing.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/flows/FlowInfo.html" title="type parameter in FlowInfo">FlowInfo</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#getFlowInfo-otherParty-">getFlowInfo</a></span>(<a href="../../../../net/corda/core/identity/Party.html" title="type parameter in Party">Party</a>&nbsp;otherParty)</code>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;&nbsp;</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>NonExistentClass</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#getLogger--">getLogger</a></span>()</code>
<div class="block">This is where you should log things to.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/identity/Party.html" title="type parameter in Party">Party</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#getOurIdentity--">getOurIdentity</a></span>()</code>
<div class="block">Specifies the identity to use for this flow. This will be one of the multiple identities that belong to this node.
This is the same as calling <code>ourIdentityAndCert.party</code>.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/identity/PartyAndCertificate.html" title="type parameter in PartyAndCertificate">PartyAndCertificate</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#getOurIdentityAndCert--">getOurIdentityAndCert</a></span>()</code>
<div class="block">Specifies the identity, with certificate, to use for this flow. This will be one of the multiple identities that
belong to this node.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/utilities/ProgressTracker.html" title="type parameter in ProgressTracker">ProgressTracker</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#getProgressTracker--">getProgressTracker</a></span>()</code>
<div class="block">Override this to provide a <a href="../../../../net/corda/core/utilities/ProgressTracker.html" title="class in net.corda.core.utilities"><code>class ProgressTracker</code></a>. If one is provided and stepped, the framework will do something
helpful with the progress reports e.g record to the audit service. If this flow is invoked as a subflow of another,
then the tracker will be made a child of the current step in the parent. If it's null, this flow doesn't track
progress.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/flows/StateMachineRunId.html" title="type parameter in StateMachineRunId">StateMachineRunId</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#getRunId--">getRunId</a></span>()</code>
<div class="block">Returns a wrapped <a href="http://docs.oracle.com/javase/8/docs/api/java/util/UUID.html">java.util.UUID</a> object that identifies this state machine run (i.e. subflows have the same
identifier as their parents).</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/node/ServiceHub.html" title="type parameter in ServiceHub">ServiceHub</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#getServiceHub--">getServiceHub</a></span>()</code>
<div class="block">Provides access to big, heavy classes that may be reconstructed from time to time, e.g. across restarts. It is
only available once the flow has started, which means it cannot be accessed in the constructor. Either
access this lazily or from inside <a href="../../../../net/corda/core/flows/FlowLogic.html#call--"><code>FlowLogic.call</code></a>.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/flows/FlowSession.html" title="type parameter in FlowSession">FlowSession</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#initiateFlow-destination-">initiateFlow</a></span>(<a href="../../../../net/corda/core/flows/Destination.html" title="type parameter in Destination">Destination</a>&nbsp;destination)</code>
<div class="block">Creates a communication session with destination. Subsequently you may send/receive using this session object. How the messaging
is routed depends on the <a href="../../../../net/corda/core/flows/Destination.html" title="interface in net.corda.core.flows"><code>interface Destination</code></a> type, including whether this call does any initial communication.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/flows/FlowSession.html" title="type parameter in FlowSession">FlowSession</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#initiateFlow-party-">initiateFlow</a></span>(<a href="../../../../net/corda/core/identity/Party.html" title="type parameter in Party">Party</a>&nbsp;party)</code>
<div class="block">Creates a communication session with party. Subsequently you may send/receive using this session object. Note
that this function does not communicate in itself, the counter-flow will be kicked off by the first send/receive.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#isKilled--">isKilled</a></span>()</code>
<div class="block">Returns <code>true</code> when the current <a href="../../../../net/corda/core/flows/FlowLogic.html" title="class in net.corda.core.flows"><code>class FlowLogic</code></a> has been killed (has received a command to halt its progress and terminate).</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#persistFlowStackSnapshot--">persistFlowStackSnapshot</a></span>()</code>
<div class="block">Persists a shallow copy of the Quasar stack frames at the time of call to <a href="../../../../net/corda/core/flows/FlowLogic.html#persistFlowStackSnapshot--"><code>FlowLogic.persistFlowStackSnapshot</code></a>.
Use this to track the monitor evolution of the quasar stack values during the flow execution.
The flow stack snapshot is stored in a file located in {baseDir}/flowStackSnapshots/YYYY-MM-DD/{flowId}/
where baseDir is the node running directory and flowId is the flow unique identifier generated by the platform.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>&lt;R&gt;&nbsp;<a href="../../../../net/corda/core/utilities/UntrustworthyData.html" title="type parameter in UntrustworthyData">UntrustworthyData</a>&lt;R&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#receive-receiveType-otherParty-">receive</a></span>(java.lang.Class&lt;R&gt;&nbsp;receiveType,
       <a href="../../../../net/corda/core/identity/Party.html" title="type parameter in Party">Party</a>&nbsp;otherParty)</code>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;&nbsp;</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>&lt;R&gt;&nbsp;java.util.List&lt;net.corda.core.utilities.UntrustworthyData&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#receiveAll-receiveType-sessions-maySkipCheckpoint-">receiveAll</a></span>(java.lang.Class&lt;R&gt;&nbsp;receiveType,
          java.util.List&lt;? extends net.corda.core.flows.FlowSession&gt;&nbsp;sessions,
          boolean&nbsp;maySkipCheckpoint)</code>
<div class="block">Suspends until a message has been received for each session in the specified sessions.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>java.util.Map&lt;net.corda.core.flows.FlowSession,net.corda.core.utilities.UntrustworthyData&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#receiveAllMap-sessions-maySkipCheckpoint-">receiveAllMap</a></span>(java.util.Map&lt;net.corda.core.flows.FlowSession,? extends java.lang.Class&lt;? extends java.lang.Object&gt;&gt;&nbsp;sessions,
             boolean&nbsp;maySkipCheckpoint)</code>
<div class="block">Suspends until a message has been received for each session in the specified sessions.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#recordAuditEvent-eventType-comment-extraAuditData-">recordAuditEvent</a></span>(java.lang.String&nbsp;eventType,
                java.lang.String&nbsp;comment,
                java.util.Map&lt;java.lang.String,java.lang.String&gt;&nbsp;extraAuditData)</code>
<div class="block">Flows can call this method to record application level flow audit events</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#send-otherParty-payload-">send</a></span>(<a href="../../../../net/corda/core/identity/Party.html" title="type parameter in Party">Party</a>&nbsp;otherParty,
    java.lang.Object&nbsp;payload)</code>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;&nbsp;</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#sendAll-payload-sessions-maySkipCheckpoint-">sendAll</a></span>(java.lang.Object&nbsp;payload,
       java.util.Set&lt;? extends net.corda.core.flows.FlowSession&gt;&nbsp;sessions,
       boolean&nbsp;maySkipCheckpoint)</code>
<div class="block">Queues the given payload for sending to the provided sessions and continues without suspending.</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#sendAllMap-payloadsPerSession-maySkipCheckpoint-">sendAllMap</a></span>(java.util.Map&lt;net.corda.core.flows.FlowSession,? extends java.lang.Object&gt;&nbsp;payloadsPerSession,
          boolean&nbsp;maySkipCheckpoint)</code>
<div class="block">Queues the given payloads for sending to the provided sessions and continues without suspending.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>&lt;R&gt;&nbsp;<a href="../../../../net/corda/core/utilities/UntrustworthyData.html" title="type parameter in UntrustworthyData">UntrustworthyData</a>&lt;R&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#sendAndReceive-receiveType-otherParty-payload-">sendAndReceive</a></span>(java.lang.Class&lt;R&gt;&nbsp;receiveType,
              <a href="../../../../net/corda/core/identity/Party.html" title="type parameter in Party">Party</a>&nbsp;otherParty,
              java.lang.Object&nbsp;payload)</code>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;&nbsp;</div>
</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>&lt;R&gt;&nbsp;R</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#subFlow-subLogic-">subFlow</a></span>(<a href="../../../../net/corda/core/flows/FlowLogic.html" title="type parameter in FlowLogic">FlowLogic</a>&lt;? extends R&gt;&nbsp;subLogic)</code>
<div class="block">Invokes the given subflow. This function returns once the subflow completes successfully with the result
returned by that subflow's <a href="../../../../net/corda/core/flows/FlowLogic.html#call--"><code>FlowLogic.call</code></a> method. If the subflow has a progress tracker, it is attached to the
current step in this flow's progress tracker.</div>
</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/messaging/DataFeed.html" title="type parameter in DataFeed">DataFeed</a>&lt;java.lang.String,java.lang.String&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#track--">track</a></span>()</code>
<div class="block">Returns a pair of the current progress step, as a string, and an observable of stringified changes to the
<a href="../../../../net/corda/core/flows/FlowLogic.html#getProgressTracker--"><code>FlowLogic.getProgressTracker</code></a>.</div>
</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/messaging/DataFeed.html" title="type parameter in DataFeed">DataFeed</a>&lt;java.util.List,java.util.List&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#trackStepsTree--">trackStepsTree</a></span>()</code>
<div class="block">Returns a pair of the current steps tree of current <a href="../../../../net/corda/core/flows/FlowLogic.html#getProgressTracker--"><code>FlowLogic.getProgressTracker</code></a> as pairs of zero-based depth and stringified step
label and observable of upcoming changes to the structure.</div>
</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/messaging/DataFeed.html" title="type parameter in DataFeed">DataFeed</a>&lt;java.lang.Integer,java.lang.Integer&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#trackStepsTreeIndex--">trackStepsTreeIndex</a></span>()</code>
<div class="block">Returns a pair of the current progress step index (as integer) in steps tree of current <a href="../../../../net/corda/core/flows/FlowLogic.html#getProgressTracker--"><code>FlowLogic.getProgressTracker</code></a>, and an observable
of its upcoming changes.</div>
</td>
</tr>
<tr id="i30" class="altColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="type parameter in SignedTransaction">SignedTransaction</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#waitForLedgerCommit-hash-maySkipCheckpoint-">waitForLedgerCommit</a></span>(<a href="../../../../net/corda/core/crypto/SecureHash.html" title="type parameter in SecureHash">SecureHash</a>&nbsp;hash,
                   boolean&nbsp;maySkipCheckpoint)</code>
<div class="block">Suspends the flow until the transaction with the specified ID is received, successfully verified and
sent to the vault for processing. Note that this call suspends until the transaction is considered
valid by the local node, but that doesn't imply the vault will consider it relevant.</div>
</td>
</tr>
<tr id="i31" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowLogic.html#waitForStateConsumption-stateRefs-">waitForStateConsumption</a></span>(java.util.Set&lt;net.corda.core.contracts.StateRef&gt;&nbsp;stateRefs)</code>
<div class="block">Suspends the current flow until all the provided <a href="../../../../net/corda/core/contracts/StateRef.html" title="class in net.corda.core.contracts"><code>class StateRef</code></a>s have been consumed.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="Companion">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Companion</h4>
<pre>public static&nbsp;<a href="../../../../net/corda/core/flows/FlowLogic.Companion.html" title="type parameter in FlowLogic.Companion">FlowLogic.Companion</a> Companion</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="FlowLogic--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>FlowLogic</h4>
<pre>public&nbsp;FlowLogic()</pre>
<div class="block"><p><p>A sub-class of <a href="../../../../net/corda/core/flows/FlowLogic.html" title="class in net.corda.core.flows"><code>class FlowLogic</code></a> implements a flow using direct, straight line blocking code. Thus you
can write complex flow logic in an ordinary fashion, without having to think about callbacks, restarting after
a node crash, how many instances of your flow there are running and so on.</p></p><p><p><p>Invoking the network will cause the call stack to be suspended onto the heap and then serialized to a database using
the Quasar fibers framework. Because of this, if you need access to data that might change over time, you should
request it just-in-time via the <a href="../../../../net/corda/core/flows/FlowLogic.html#getServiceHub--"><code>FlowLogic.getServiceHub</code></a> property which is provided. Don't try and keep data you got from a
service across calls to send/receive/sendAndReceive because the world might change in arbitrary ways out from
underneath you, for instance, if the node is restarted or reconfigured!</p><p>Additionally, be aware of what data you pin either via the stack or in your <a href="../../../../net/corda/core/flows/FlowLogic.html" title="class in net.corda.core.flows"><code>class FlowLogic</code></a> implementation. Very large
objects or datasets will hurt performance by increasing the amount of data stored in each checkpoint.</p><p>If you'd like to use another FlowLogic class as a component of your own, construct it on the fly and then pass
it to the <a href="../../../../net/corda/core/flows/FlowLogic.html#subFlow-subLogic-"><code>FlowLogic.subFlow</code></a> method. It will return the result of that flow when it completes.</p><p>If your flow (whether it's a top-level flow or a subflow) is supposed to initiate a session with the counterparty
and request they start their counterpart flow, then make sure it's annotated with <a href="../../../../net/corda/core/flows/InitiatingFlow.html" title="interface in net.corda.core.flows"><code>interface InitiatingFlow</code></a>. This annotation
also has a version property to allow you to version your flow and enables a node to restrict support for the flow to
that particular version.</p><p>Functions that suspend the flow (including all functions on <a href="../../../../net/corda/core/flows/FlowSession.html" title="class in net.corda.core.flows"><code>class FlowSession</code></a>) accept a maySkipCheckpoint parameter
defaulting to false, false meaning a checkpoint should always be created on suspend. This parameter may be set to
true which allows the implementation to potentially optimise away the checkpoint, saving a roundtrip to the database.</p><p>This option however comes with a big warning sign: Setting the parameter to true requires the flow's code to be
replayable from the previous checkpoint (or start of flow) up until the next checkpoint (or end of flow) in order to
prepare for hard failures. As suspending functions always commit the flow's database transaction regardless of this
parameter the flow must be prepared for scenarios where a previous running of the flow <em>already committed itsrelevant database transactions</em>. Only set this option to true if you know what you're doing.</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowLogic.html" title="class in net.corda.core.flows"><code>class FlowLogic</code></a>, 
<a href="../../../../net/corda/core/flows/FlowLogic.html#getServiceHub--"><code>FlowLogic.getServiceHub</code></a>, 
<a href="../../../../net/corda/core/flows/FlowLogic.html" title="class in net.corda.core.flows"><code>class FlowLogic</code></a>, 
<a href="../../../../net/corda/core/flows/FlowLogic.html#subFlow-subLogic-"><code>FlowLogic.subFlow</code></a>, 
<a href="../../../../net/corda/core/flows/InitiatingFlow.html" title="interface in net.corda.core.flows"><code>interface InitiatingFlow</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html" title="class in net.corda.core.flows"><code>class FlowSession</code></a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getLogger--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLogger</h4>
<pre>public&nbsp;NonExistentClass&nbsp;getLogger()</pre>
<div class="block"><p><p>This is where you should log things to.</p></p></div>
</li>
</ul>
<a name="getRunId--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRunId</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/flows/StateMachineRunId.html" title="type parameter in StateMachineRunId">StateMachineRunId</a>&nbsp;getRunId()</pre>
<div class="block"><p><p>Returns a wrapped <a href="http://docs.oracle.com/javase/8/docs/api/java/util/UUID.html">java.util.UUID</a> object that identifies this state machine run (i.e. subflows have the same
identifier as their parents).</p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="http://docs.oracle.com/javase/8/docs/api/java/util/UUID.html">java.util.UUID</a></dd>
</dl>
</li>
</ul>
<a name="getServiceHub--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getServiceHub</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/node/ServiceHub.html" title="type parameter in ServiceHub">ServiceHub</a>&nbsp;getServiceHub()</pre>
<div class="block"><p><p>Provides access to big, heavy classes that may be reconstructed from time to time, e.g. across restarts. It is
only available once the flow has started, which means it cannot be accessed in the constructor. Either
access this lazily or from inside <a href="../../../../net/corda/core/flows/FlowLogic.html#call--"><code>FlowLogic.call</code></a>.</p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowLogic.html#call--"><code>FlowLogic.call</code></a></dd>
</dl>
</li>
</ul>
<a name="isKilled--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isKilled</h4>
<pre>public&nbsp;boolean&nbsp;isKilled()</pre>
<div class="block"><p><p>Returns <code>true</code> when the current <a href="../../../../net/corda/core/flows/FlowLogic.html" title="class in net.corda.core.flows"><code>class FlowLogic</code></a> has been killed (has received a command to halt its progress and terminate).</p></p><p><p><p>Check this property in long-running computation loops to exit a flow that has been killed:</p><code><pre>
while (!isKilled) {
  // do some computation
}
</pre></code><p>Ideal usage would include throwing a <a href="../../../../net/corda/core/flows/KilledFlowException.html" title="class in net.corda.core.flows"><code>exception KilledFlowException</code></a> which will lead to the termination of the flow:</p><code><pre>
for (item in list) {
  if (isKilled) {
    throw KilledFlowException(runId)
  }
  // do some computation
}
</pre></code><p>Note, once the <a href="../../../../net/corda/core/flows/FlowLogic.html#isKilled--"><code>FlowLogic.isKilled</code></a> flag is set to <code>true</code> the flow may terminate once it reaches the next API function marked with the
@<a href="#">Suspendable</a> annotation. Therefore, it is possible to write a flow that does not interact with the <a href="../../../../net/corda/core/flows/FlowLogic.html#isKilled--"><code>FlowLogic.isKilled</code></a> flag while still
terminating correctly.</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowLogic.html" title="class in net.corda.core.flows"><code>class FlowLogic</code></a>, 
<a href="../../../../net/corda/core/flows/KilledFlowException.html" title="class in net.corda.core.flows"><code>exception KilledFlowException</code></a>, 
<a href="../../../../net/corda/core/flows/FlowLogic.html#isKilled--"><code>FlowLogic.isKilled</code></a>, 
<a href="#">Suspendable</a>, 
<a href="../../../../net/corda/core/flows/FlowLogic.html#isKilled--"><code>FlowLogic.isKilled</code></a></dd>
</dl>
</li>
</ul>
<a name="initiateFlow-destination-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initiateFlow</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/flows/FlowSession.html" title="type parameter in FlowSession">FlowSession</a>&nbsp;initiateFlow(<a href="../../../../net/corda/core/flows/Destination.html" title="type parameter in Destination">Destination</a>&nbsp;destination)</pre>
<div class="block"><p><p>Creates a communication session with destination. Subsequently you may send/receive using this session object. How the messaging
is routed depends on the <a href="../../../../net/corda/core/flows/Destination.html" title="interface in net.corda.core.flows"><code>interface Destination</code></a> type, including whether this call does any initial communication.</p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/Destination.html" title="interface in net.corda.core.flows"><code>interface Destination</code></a></dd>
</dl>
</li>
</ul>
<a name="initiateFlow-party-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initiateFlow</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/flows/FlowSession.html" title="type parameter in FlowSession">FlowSession</a>&nbsp;initiateFlow(<a href="../../../../net/corda/core/identity/Party.html" title="type parameter in Party">Party</a>&nbsp;party)</pre>
<div class="block"><p><p>Creates a communication session with party. Subsequently you may send/receive using this session object. Note
that this function does not communicate in itself, the counter-flow will be kicked off by the first send/receive.</p></p></div>
</li>
</ul>
<a name="getOurIdentityAndCert--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOurIdentityAndCert</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/identity/PartyAndCertificate.html" title="type parameter in PartyAndCertificate">PartyAndCertificate</a>&nbsp;getOurIdentityAndCert()</pre>
<div class="block"><p><p>Specifies the identity, with certificate, to use for this flow. This will be one of the multiple identities that
belong to this node.</p></p></div>
</li>
</ul>
<a name="getOurIdentity--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOurIdentity</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/identity/Party.html" title="type parameter in Party">Party</a>&nbsp;getOurIdentity()</pre>
<div class="block"><p><p>Specifies the identity to use for this flow. This will be one of the multiple identities that belong to this node.
This is the same as calling <code>ourIdentityAndCert.party</code>.</p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/node/NodeInfo.html#getLegalIdentities--"><code>NodeInfo.getLegalIdentities</code></a></dd>
</dl>
</li>
</ul>
<a name="getFlowInfo-otherParty-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFlowInfo</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/flows/FlowInfo.html" title="type parameter in FlowInfo">FlowInfo</a>&nbsp;getFlowInfo(<a href="../../../../net/corda/core/identity/Party.html" title="type parameter in Party">Party</a>&nbsp;otherParty)</pre>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;</div>
<div class="block"><p><p>Returns a <a href="../../../../net/corda/core/flows/FlowInfo.html" title="class in net.corda.core.flows"><code>class FlowInfo</code></a> object describing the flow otherParty is using. With FlowInfo.flowVersion it
provides the necessary information needed for the evolution of flows and enabling backwards compatibility.</p></p><p><p><p>This method can be called before any send or receive has been done with otherParty. In such a case this will force
them to start their flow.</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowInfo.html" title="class in net.corda.core.flows"><code>class FlowInfo</code></a></dd>
</dl>
</li>
</ul>
<a name="sendAndReceive-receiveType-otherParty-payload-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendAndReceive</h4>
<pre>public&nbsp;&lt;R&gt;&nbsp;<a href="../../../../net/corda/core/utilities/UntrustworthyData.html" title="type parameter in UntrustworthyData">UntrustworthyData</a>&lt;R&gt;&nbsp;sendAndReceive(java.lang.Class&lt;R&gt;&nbsp;receiveType,
                                               <a href="../../../../net/corda/core/identity/Party.html" title="type parameter in Party">Party</a>&nbsp;otherParty,
                                               java.lang.Object&nbsp;payload)</pre>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;</div>
<div class="block"><p><p>Serializes and queues the given payload object for sending to the otherParty. Suspends until a response
is received, which must be of the given receiveType. Remember that when receiving data from other parties the data
should not be trusted until it's been thoroughly verified for consistency and that all expectations are
satisfied, as a malicious peer may send you subtly corrupted data in order to exploit your code.</p></p><p><p><p>Note that this function is not just a simple send+receive pair: it is more efficient and more correct to
use this when you expect to do a message swap than do use <a href="../../../../net/corda/core/flows/FlowLogic.html#send-otherParty-payload-"><code>FlowLogic.send</code></a> and then receive in turn.</p></p></p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an <a href="../../../../net/corda/core/utilities/UntrustworthyData.html" title="class in net.corda.core.utilities"><code>class UntrustworthyData</code></a> wrapper around the received object.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowLogic.html#send-otherParty-payload-"><code>FlowLogic.send</code></a></dd>
</dl>
</li>
</ul>
<a name="receive-receiveType-otherParty-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receive</h4>
<pre>public&nbsp;&lt;R&gt;&nbsp;<a href="../../../../net/corda/core/utilities/UntrustworthyData.html" title="type parameter in UntrustworthyData">UntrustworthyData</a>&lt;R&gt;&nbsp;receive(java.lang.Class&lt;R&gt;&nbsp;receiveType,
                                        <a href="../../../../net/corda/core/identity/Party.html" title="type parameter in Party">Party</a>&nbsp;otherParty)</pre>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;</div>
<div class="block"><p><p>Suspends until the specified otherParty sends us a message of type receiveType.</p></p><p><p><p>Remember that when receiving data from other parties the data should not be trusted until it's been thoroughly
verified for consistency and that all expectations are satisfied, as a malicious peer may send you subtly
corrupted data in order to exploit your code.</p></p></p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an <a href="../../../../net/corda/core/utilities/UntrustworthyData.html" title="class in net.corda.core.utilities"><code>class UntrustworthyData</code></a> wrapper around the received object.</dd>
</dl>
</li>
</ul>
<a name="send-otherParty-payload-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>send</h4>
<pre>public&nbsp;void&nbsp;send(<a href="../../../../net/corda/core/identity/Party.html" title="type parameter in Party">Party</a>&nbsp;otherParty,
                 java.lang.Object&nbsp;payload)</pre>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;</div>
<div class="block"><p><p>Queues the given payload for sending to the otherParty and continues without suspending.</p></p><p><p><p>Note that the other party may receive the message at some arbitrary later point or not at all: if otherParty
is offline then message delivery will be retried until it comes back or until the message is older than the
network's event horizon time.</p></p></p></div>
</li>
</ul>
<a name="receiveAllMap-sessions-maySkipCheckpoint-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receiveAllMap</h4>
<pre>public&nbsp;java.util.Map&lt;net.corda.core.flows.FlowSession,net.corda.core.utilities.UntrustworthyData&gt;&nbsp;receiveAllMap(java.util.Map&lt;net.corda.core.flows.FlowSession,? extends java.lang.Class&lt;? extends java.lang.Object&gt;&gt;&nbsp;sessions,
                                                                                                                boolean&nbsp;maySkipCheckpoint)</pre>
<div class="block"><p><p>Suspends until a message has been received for each session in the specified sessions.</p></p><p><p><p>Consider <a href="#">receiveAllreceiveTypeClass,sessionsListListUntrustworthyData</a> when the same type is expected from all sessions.</p><p>Remember that when receiving data from other parties the data should not be trusted until it's been thoroughly
verified for consistency and that all expectations are satisfied, as a malicious peer may send you subtly
corrupted data in order to exploit your code.</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#">receiveAllreceiveTypeClass,sessionsListListUntrustworthyData</a></dd>
</dl>
</li>
</ul>
<a name="receiveAll-receiveType-sessions-maySkipCheckpoint-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receiveAll</h4>
<pre>public&nbsp;&lt;R&gt;&nbsp;java.util.List&lt;net.corda.core.utilities.UntrustworthyData&gt;&nbsp;receiveAll(java.lang.Class&lt;R&gt;&nbsp;receiveType,
                                                                                 java.util.List&lt;? extends net.corda.core.flows.FlowSession&gt;&nbsp;sessions,
                                                                                 boolean&nbsp;maySkipCheckpoint)</pre>
<div class="block"><p><p>Suspends until a message has been received for each session in the specified sessions.</p></p><p><p><p>Consider <a href="#">sessionsMapFlowSession,ClassMapFlowSession,UntrustworthyData</a> when sessions are expected to receive different types.</p><p>Remember that when receiving data from other parties the data should not be trusted until it's been thoroughly
verified for consistency and that all expectations are satisfied, as a malicious peer may send you subtly
corrupted data in order to exploit your code.</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#">sessionsMapFlowSession,ClassMapFlowSession,UntrustworthyData</a></dd>
</dl>
</li>
</ul>
<a name="sendAll-payload-sessions-maySkipCheckpoint-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendAll</h4>
<pre>public&nbsp;void&nbsp;sendAll(java.lang.Object&nbsp;payload,
                    java.util.Set&lt;? extends net.corda.core.flows.FlowSession&gt;&nbsp;sessions,
                    boolean&nbsp;maySkipCheckpoint)</pre>
<div class="block"><p><p>Queues the given payload for sending to the provided sessions and continues without suspending.</p></p><p><p><p>Note that the other parties may receive the message at some arbitrary later point or not at all: if one of the provided sessions
is offline then message delivery will be retried until the corresponding node comes back or until the message is older than the
network's event horizon time.</p></p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>payload</code> - the payload to send.</dd>
<dd><code>sessions</code> - the sessions to send the provided payload to.</dd>
<dd><code>maySkipCheckpoint</code> - whether checkpointing should be skipped.</dd>
</dl>
</li>
</ul>
<a name="sendAllMap-payloadsPerSession-maySkipCheckpoint-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendAllMap</h4>
<pre>public&nbsp;void&nbsp;sendAllMap(java.util.Map&lt;net.corda.core.flows.FlowSession,? extends java.lang.Object&gt;&nbsp;payloadsPerSession,
                       boolean&nbsp;maySkipCheckpoint)</pre>
<div class="block"><p><p>Queues the given payloads for sending to the provided sessions and continues without suspending.</p></p><p><p><p>Note that the other parties may receive the message at some arbitrary later point or not at all: if one of the provided <a href="#">sessions</a>
is offline then message delivery will be retried until the corresponding node comes back or until the message is older than the
network's event horizon time.</p></p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>payloadsPerSession</code> - a mapping that contains the payload to be sent to each session.</dd>
<dd><code>maySkipCheckpoint</code> - whether checkpointing should be skipped.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#">sessions</a></dd>
</dl>
</li>
</ul>
<a name="subFlow-subLogic-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>subFlow</h4>
<pre>public&nbsp;&lt;R&gt;&nbsp;R&nbsp;subFlow(<a href="../../../../net/corda/core/flows/FlowLogic.html" title="type parameter in FlowLogic">FlowLogic</a>&lt;? extends R&gt;&nbsp;subLogic)</pre>
<div class="block"><p><p>Invokes the given subflow. This function returns once the subflow completes successfully with the result
returned by that subflow's <a href="../../../../net/corda/core/flows/FlowLogic.html#call--"><code>FlowLogic.call</code></a> method. If the subflow has a progress tracker, it is attached to the
current step in this flow's progress tracker.</p></p><p><p><p>If the subflow is not an initiating flow (i.e. not annotated with <a href="../../../../net/corda/core/flows/InitiatingFlow.html" title="interface in net.corda.core.flows"><code>interface InitiatingFlow</code></a>) then it will continue to use
the existing sessions this flow has created with its counterparties. This allows for subflows which can act as
building blocks for other flows, for example removing the boilerplate of common sequences of sends and receives.</p></p></p></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd> - This is either thrown by subLogic itself or propagated from any of the remote
<a href="../../../../net/corda/core/flows/FlowLogic.html" title="class in net.corda.core.flows"><code>class FlowLogic</code></a>s it communicated with. The subflow can be retried by catching this exception.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowLogic.html#call--"><code>FlowLogic.call</code></a>, 
<a href="../../../../net/corda/core/flows/InitiatingFlow.html" title="interface in net.corda.core.flows"><code>interface InitiatingFlow</code></a></dd>
</dl>
</li>
</ul>
<a name="checkFlowPermission-permissionName-extraAuditData-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkFlowPermission</h4>
<pre>public&nbsp;void&nbsp;checkFlowPermission(java.lang.String&nbsp;permissionName,
                                java.util.Map&lt;java.lang.String,java.lang.String&gt;&nbsp;extraAuditData)</pre>
<div class="block"><p><p>Flows can call this method to ensure that the active FlowInitiator is authorised for a particular action.
This provides fine grained control over application level permissions, when RPC control over starting the flow is insufficient,
or the permission is runtime dependent upon the choices made inside long lived flow code.
For example some users may have restricted limits on how much cash they can transfer, or whether they can change certain fields.
An audit event is always recorded whenever this method is used.
If the permission is not granted for the FlowInitiator a FlowException is thrown.</p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>permissionName</code> - is a string representing the desired permission. Each flow is given a distinct namespace for these permissions.</dd>
<dd><code>extraAuditData</code> - in the audit log for this permission check these extra key value pairs will be recorded.</dd>
</dl>
</li>
</ul>
<a name="recordAuditEvent-eventType-comment-extraAuditData-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recordAuditEvent</h4>
<pre>public&nbsp;void&nbsp;recordAuditEvent(java.lang.String&nbsp;eventType,
                             java.lang.String&nbsp;comment,
                             java.util.Map&lt;java.lang.String,java.lang.String&gt;&nbsp;extraAuditData)</pre>
<div class="block"><p><p>Flows can call this method to record application level flow audit events</p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>eventType</code> - is a string representing the type of event. Each flow is given a distinct namespace for these names.</dd>
<dd><code>comment</code> - a general human readable summary of the event.</dd>
<dd><code>extraAuditData</code> - in the audit log for this permission check these extra key value pairs will be recorded.</dd>
</dl>
</li>
</ul>
<a name="getProgressTracker--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getProgressTracker</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/utilities/ProgressTracker.html" title="type parameter in ProgressTracker">ProgressTracker</a>&nbsp;getProgressTracker()</pre>
<div class="block"><p><p>Override this to provide a <a href="../../../../net/corda/core/utilities/ProgressTracker.html" title="class in net.corda.core.utilities"><code>class ProgressTracker</code></a>. If one is provided and stepped, the framework will do something
helpful with the progress reports e.g record to the audit service. If this flow is invoked as a subflow of another,
then the tracker will be made a child of the current step in the parent. If it's null, this flow doesn't track
progress.</p></p><p><p><p>Note that this has to return a tracker before the flow is invoked. You can't change your mind half way
through.</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/utilities/ProgressTracker.html" title="class in net.corda.core.utilities"><code>class ProgressTracker</code></a></dd>
</dl>
</li>
</ul>
<a name="call--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>call</h4>
<pre>public&nbsp;T&nbsp;call()</pre>
<div class="block"><p><p>This is where you fill out your business logic.</p></p></div>
</li>
</ul>
<a name="track--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>track</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/messaging/DataFeed.html" title="type parameter in DataFeed">DataFeed</a>&lt;java.lang.String,java.lang.String&gt;&nbsp;track()</pre>
<div class="block"><p><p>Returns a pair of the current progress step, as a string, and an observable of stringified changes to the
<a href="../../../../net/corda/core/flows/FlowLogic.html#getProgressTracker--"><code>FlowLogic.getProgressTracker</code></a>.</p></p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns null if this flow has no progress tracker.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowLogic.html#getProgressTracker--"><code>FlowLogic.getProgressTracker</code></a></dd>
</dl>
</li>
</ul>
<a name="trackStepsTreeIndex--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>trackStepsTreeIndex</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/messaging/DataFeed.html" title="type parameter in DataFeed">DataFeed</a>&lt;java.lang.Integer,java.lang.Integer&gt;&nbsp;trackStepsTreeIndex()</pre>
<div class="block"><p><p>Returns a pair of the current progress step index (as integer) in steps tree of current <a href="../../../../net/corda/core/flows/FlowLogic.html#getProgressTracker--"><code>FlowLogic.getProgressTracker</code></a>, and an observable
of its upcoming changes.</p></p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns null if this flow has no progress tracker.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowLogic.html#getProgressTracker--"><code>FlowLogic.getProgressTracker</code></a></dd>
</dl>
</li>
</ul>
<a name="trackStepsTree--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>trackStepsTree</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/messaging/DataFeed.html" title="type parameter in DataFeed">DataFeed</a>&lt;java.util.List,java.util.List&gt;&nbsp;trackStepsTree()</pre>
<div class="block"><p><p>Returns a pair of the current steps tree of current <a href="../../../../net/corda/core/flows/FlowLogic.html#getProgressTracker--"><code>FlowLogic.getProgressTracker</code></a> as pairs of zero-based depth and stringified step
label and observable of upcoming changes to the structure.</p></p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns null if this flow has no progress tracker.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowLogic.html#getProgressTracker--"><code>FlowLogic.getProgressTracker</code></a></dd>
</dl>
</li>
</ul>
<a name="waitForLedgerCommit-hash-maySkipCheckpoint-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>waitForLedgerCommit</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="type parameter in SignedTransaction">SignedTransaction</a>&nbsp;waitForLedgerCommit(<a href="../../../../net/corda/core/crypto/SecureHash.html" title="type parameter in SecureHash">SecureHash</a>&nbsp;hash,
                                             boolean&nbsp;maySkipCheckpoint)</pre>
<div class="block"><p><p>Suspends the flow until the transaction with the specified ID is received, successfully verified and
sent to the vault for processing. Note that this call suspends until the transaction is considered
valid by the local node, but that doesn't imply the vault will consider it relevant.</p></p></div>
</li>
</ul>
<a name="waitForStateConsumption-stateRefs-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>waitForStateConsumption</h4>
<pre>public&nbsp;void&nbsp;waitForStateConsumption(java.util.Set&lt;net.corda.core.contracts.StateRef&gt;&nbsp;stateRefs)</pre>
<div class="block"><p><p>Suspends the current flow until all the provided <a href="../../../../net/corda/core/contracts/StateRef.html" title="class in net.corda.core.contracts"><code>class StateRef</code></a>s have been consumed.</p></p><p><p><p>WARNING! Remember that the flow which uses this async operation will <em>NOT</em> wake-up until all the supplied StateRefs
have been consumed. If the node isn't aware of the supplied StateRefs or if the StateRefs are never consumed, then
the calling flow will remain suspended FOREVER!!</p></p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>stateRefs</code> - the StateRefs which will be consumed in the future.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/contracts/StateRef.html" title="class in net.corda.core.contracts"><code>class StateRef</code></a></dd>
</dl>
</li>
</ul>
<a name="flowStackSnapshot--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flowStackSnapshot</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/flows/FlowStackSnapshot.html" title="type parameter in FlowStackSnapshot">FlowStackSnapshot</a>&nbsp;flowStackSnapshot()</pre>
<div class="block"><p><p>Returns a shallow copy of the Quasar stack frames at the time of call to <a href="../../../../net/corda/core/flows/FlowLogic.html#flowStackSnapshot--"><code>FlowLogic.flowStackSnapshot</code></a>. Use this to inspect
what objects would be serialised at the time of call to a suspending action (e.g. send/receive).
Note: This logic is only available during tests and is not meant to be used during the production deployment.
Therefore the default implementation does nothing.</p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowLogic.html#flowStackSnapshot--"><code>FlowLogic.flowStackSnapshot</code></a></dd>
</dl>
</li>
</ul>
<a name="persistFlowStackSnapshot--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>persistFlowStackSnapshot</h4>
<pre>public&nbsp;void&nbsp;persistFlowStackSnapshot()</pre>
<div class="block"><p><p>Persists a shallow copy of the Quasar stack frames at the time of call to <a href="../../../../net/corda/core/flows/FlowLogic.html#persistFlowStackSnapshot--"><code>FlowLogic.persistFlowStackSnapshot</code></a>.
Use this to track the monitor evolution of the quasar stack values during the flow execution.
The flow stack snapshot is stored in a file located in {baseDir}/flowStackSnapshots/YYYY-MM-DD/{flowId}/
where baseDir is the node running directory and flowId is the flow unique identifier generated by the platform.</p></p><p><p><p>Note: With respect to the <a href="../../../../net/corda/core/flows/FlowLogic.html#flowStackSnapshot--"><code>FlowLogic.flowStackSnapshot</code></a>, the snapshot being persisted by this method is partial,
meaning that only flow relevant traces and local variables are persisted.
Also, this logic is only available during tests and is not meant to be used during the production deployment.
Therefore the default implementation does nothing.</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowLogic.html#persistFlowStackSnapshot--"><code>FlowLogic.persistFlowStackSnapshot</code></a>, 
<a href="../../../../net/corda/core/flows/FlowLogic.html#flowStackSnapshot--"><code>FlowLogic.flowStackSnapshot</code></a></dd>
</dl>
</li>
</ul>
<a name="await-operation-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>await</h4>
<pre>public&nbsp;&lt;R&gt;&nbsp;R&nbsp;await(<a href="../../../../net/corda/core/flows/FlowExternalAsyncOperation.html" title="type parameter in FlowExternalAsyncOperation">FlowExternalAsyncOperation</a>&lt;R&gt;&nbsp;operation)</pre>
<div class="block"><p><p>Executes the specified operation and suspends until operation completion.</p></p><p><p><p>An implementation of <a href="../../../../net/corda/core/flows/FlowExternalAsyncOperation.html" title="interface in net.corda.core.flows"><code>interface FlowExternalAsyncOperation</code></a> should be provided that creates a new future that the state machine awaits
completion of.</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowExternalAsyncOperation.html" title="interface in net.corda.core.flows"><code>interface FlowExternalAsyncOperation</code></a></dd>
</dl>
</li>
</ul>
<a name="await-operation-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>await</h4>
<pre>public&nbsp;&lt;R&gt;&nbsp;R&nbsp;await(<a href="../../../../net/corda/core/flows/FlowExternalOperation.html" title="type parameter in FlowExternalOperation">FlowExternalOperation</a>&lt;R&gt;&nbsp;operation)</pre>
<div class="block"><p><p>Executes the specified operation and suspends until operation completion.</p></p><p><p><p>An implementation of <a href="../../../../net/corda/core/flows/FlowExternalOperation.html" title="interface in net.corda.core.flows"><code>interface FlowExternalOperation</code></a> should be provided that returns a result which the state machine will run on a separate
thread (using the node's external operation thread pool).</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowExternalOperation.html" title="interface in net.corda.core.flows"><code>interface FlowExternalOperation</code></a></dd>
</dl>
</li>
</ul>
<a name="checkFlowIsNotKilled--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkFlowIsNotKilled</h4>
<pre>public&nbsp;void&nbsp;checkFlowIsNotKilled()</pre>
<div class="block"><p><p>Helper function that throws a <a href="../../../../net/corda/core/flows/KilledFlowException.html" title="class in net.corda.core.flows"><code>exception KilledFlowException</code></a> if the current <a href="../../../../net/corda/core/flows/FlowLogic.html" title="class in net.corda.core.flows"><code>class FlowLogic</code></a> has been killed.</p></p><p><p><p>Call this function in long-running computation loops to exit a flow that has been killed:</p><code><pre>
for (item in list) {
  checkFlowIsNotKilled()
  // do some computation
}
</pre></code><p>See the <a href="../../../../net/corda/core/flows/FlowLogic.html#isKilled--"><code>FlowLogic.isKilled</code></a> property for more information.</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/KilledFlowException.html" title="class in net.corda.core.flows"><code>exception KilledFlowException</code></a>, 
<a href="../../../../net/corda/core/flows/FlowLogic.html" title="class in net.corda.core.flows"><code>class FlowLogic</code></a>, 
<a href="../../../../net/corda/core/flows/FlowLogic.html#isKilled--"><code>FlowLogic.isKilled</code></a></dd>
</dl>
</li>
</ul>
<a name="checkFlowIsNotKilled-lazyMessage-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>checkFlowIsNotKilled</h4>
<pre>public&nbsp;void&nbsp;checkFlowIsNotKilled(Function0&lt;? extends java.lang.Object&gt;&nbsp;lazyMessage)</pre>
<div class="block"><p><p>Helper function that throws a <a href="../../../../net/corda/core/flows/KilledFlowException.html" title="class in net.corda.core.flows"><code>exception KilledFlowException</code></a> if the current <a href="../../../../net/corda/core/flows/FlowLogic.html" title="class in net.corda.core.flows"><code>class FlowLogic</code></a> has been killed. The provided message is added to the
thrown <a href="../../../../net/corda/core/flows/KilledFlowException.html" title="class in net.corda.core.flows"><code>exception KilledFlowException</code></a>.</p></p><p><p><p>Call this function in long-running computation loops to exit a flow that has been killed:</p><code><pre>
for (item in list) {
  checkFlowIsNotKilled { "The flow $runId was killed while iterating through the list of items" }
  // do some computation
}
</pre></code><p>See the <a href="../../../../net/corda/core/flows/FlowLogic.html#isKilled--"><code>FlowLogic.isKilled</code></a> property for more information.</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/KilledFlowException.html" title="class in net.corda.core.flows"><code>exception KilledFlowException</code></a>, 
<a href="../../../../net/corda/core/flows/FlowLogic.html" title="class in net.corda.core.flows"><code>class FlowLogic</code></a>, 
<a href="../../../../net/corda/core/flows/KilledFlowException.html" title="class in net.corda.core.flows"><code>exception KilledFlowException</code></a>, 
<a href="../../../../net/corda/core/flows/FlowLogic.html#isKilled--"><code>FlowLogic.isKilled</code></a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../net/corda/core/flows/FlowInitiator.html" title="class in net.corda.core.flows"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../net/corda/core/flows/FlowLogicRef.html" title="interface in net.corda.core.flows"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?net/corda/core/flows/FlowLogic.html" target="_top">Frames</a></li>
<li><a href="FlowLogic.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<style>
    @import url("https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,500,600");
    #cookies-eu-banner {
        background-color: rgba(83, 88, 95, 0.9);
        border-radius: 3px;
        color: #fff;
        font-family: 'Source Sans Pro', sans-serif;
        font-size: 13px;
        font-weight: 400;
        left: 3px;
        position: fixed;
        padding: 6px;
        right: 3px;
        text-align: center;
        top: 100px;
        z-index: 1000;
    }
    
    #cookies-eu-banner h3,
    #cookies-eu-banner p {
        color: #fff;
        font-size: 18px;
        letter-spacing: 0;
    }
    
    #cookies-eu-banner h3 {
        font-size: 24px;
        font-style: normal;
        font-weight: 400;
        line-height: 1.2;
        margin: 9px 0 0;
        text-transform: uppercase;
    }
    
    #cookies-eu-banner p {
        margin-bottom: 10px;
        padding: 8px 36px 0;
        text-align: justify;
        line-height: 1.4em;
    }
    
    #cookies-eu-banner fieldset {
        min-width: 0;
        padding: 0;
        margin: 0;
        border: 0;
    }
    
    #cookies-eu-banner legend {
        color: inherit;
        display: block;
        font-size: 18px;
        line-height: inherit;
        max-width: 100%;
        margin-bottom: 16px;
        padding: 0;
        white-space: normal;
        width: 100%;
    }
    
    #cookies-eu-banner a {
        color: #62AAF1;
    }
    
    #cookies-eu-banner .cookies-button-group {
        display: flex;
        justify-content: center;
    }
    
    #cookies-eu-accept,
    #cookies-eu-accept-all {
        background-color: #ec1d24;
        border: none;
        border-radius: 6px;
        color: #fff;
        font-size: 12px;
        font-weight: 600;
        margin: 0 10px 10px;
        max-height: 40px;
        height: 40px;
        line-height: 1.1;
        text-decoration: none;
        width: 150px;
    }
    
    .cookies-checkbox {
        display: inline-block;
        margin: 5px 10px;
    }
    
    .cookies-checkbox label {
        font-size: 16px;
        margin-left: 3px;
    }
    
    @media screen and (min-width: 768px) {
        #cookies-eu-banner {
            bottom: 5px;
            top: inherit;
        }
        #cookies-eu-accept,
        #cookies-eu-accept-all {
            font-size: 14px;
        }
    }
</style>
<div id="cookies-eu-banner" style="display: none;">
    <h3 style="text-transform:none">Your privacy</h3>
    <div class='cookie-flex'>
        <p>
            We use cookies to improve your experience on our site, and to help us understand how people use our documentation. For more detailed information, see our <a href="https://www.r3.com/privacy-policy/">privacy policy</a> and <a href="#">cookie declaration</a>.
        </p>
        <form id='cookie-consent-form'>
            <fieldset>
                <legend>
                    Please select from the following options to continue to our site.
                </legend>
                <div class='cookies-button-group'>
                    <button id="cookies-eu-accept" type="button">
                      Allow cookies selected
                    </button>
                    <button id="cookies-eu-accept-all" type="button">
                      Allow all cookies
                    </button>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="necessary"
                      name="necessary"
                      autocomplete="off"
                      checked
                      disabled />
                        <input
                        name="necessary"
                        type="hidden"
                        value="on"/>
                        <label for="necessary">Necessary</label>
                    </span>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="preferences"
                      name="preferences"
                      autocomplete="off" />
                      <label for="preferences">Preferences</label>
                    </span>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="statistics"
                      name="statistics"
                      autocomplete="off" />
                      <label for="statistics">Statistics</label>
                    </span>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="marketing"
                      name="marketing"
                      autocomplete="off" />
                      <label for="marketing">Marketing</label>
                    </span>
                </div>
            </fieldset>
        </form>
    </div>
</div>
<script class='api-keys'>
    var gaKey = 'UA-87760032-1';
    var algolia_appId = "UX2KMUWFAL";
    var algolia_apiKey = "1fe3367db02689b4aeebc59efad5abaf";
    var algolia_index = "docs.corda.net";
</script>
<script class='cookies-eu-banner'>
    ! function(root, factory) {
        "use strict";
        "function" == typeof define && define.amd ? define([], factory) : "object" == typeof exports ? module.exports = factory() : root.CookiesEuBanner = factory()
    }(window, function() {
        "use strict";
        var document = window.document,
            CookiesEuBanner = function(launchFunction, waitAccept, useLocalStorage, undefined) {
                if (!(this instanceof CookiesEuBanner)) return new CookiesEuBanner(launchFunction);
                this.cookieTimeout = 33696e6, this.bots = /bot|crawler|spider|crawling/i, this.cookieName = "hasConsent", this.trackingCookiesNames = ["__utma", "__utmb", "__utmc", "__utmt", "__utmv", "__utmz", "_ga", "_gat", "_gid"], this.launchFunction = launchFunction, this.waitAccept = waitAccept || !1, this.useLocalStorage = useLocalStorage || !1, this.init()
            };
        return CookiesEuBanner.prototype = {
            init: function() {
                var isBot = this.bots.test(navigator.userAgent);
                navigator.doNotTrack || navigator.msDoNotTrack || window.doNotTrack;
                return isBot || !1 === this.hasConsent() ? (this.removeBanner(0), !1) : !0 === this.hasConsent() ? (this.launchFunction(), !0) : (this.showBanner(), void(this.waitAccept || this.setConsent(!0)))
            },
            showBanner: function() {
                var _this = this,
                    getElementById = document.getElementById.bind(document),
                    banner = getElementById("cookies-eu-banner"),
                    rejectButton = getElementById("cookies-eu-reject"),
                    acceptButton = getElementById("cookies-eu-accept"),
                    moreLink = getElementById("cookies-eu-more"),
                    waitRemove = void 0 === banner.dataset.waitRemove ? 0 : parseInt(banner.dataset.waitRemove),
                    addClickListener = this.addClickListener,
                    removeBanner = _this.removeBanner.bind(_this, waitRemove);
                banner.style.display = "block", moreLink && addClickListener(moreLink, function() {
                    _this.deleteCookie(_this.cookieName)
                }), acceptButton && addClickListener(acceptButton, function() {
                    removeBanner(), _this.setConsent(!0), _this.launchFunction()
                }), rejectButton && addClickListener(rejectButton, function() {
                    removeBanner(), _this.setConsent(!1), _this.trackingCookiesNames.map(_this.deleteCookie)
                })
            },
            setConsent: function(consent) {
                if (this.useLocalStorage) return localStorage.setItem(this.cookieName, consent);
                this.setCookie(this.cookieName, consent)
            },
            hasConsent: function() {
                function isCookieSetTo(value) {
                    return -1 < document.cookie.indexOf(cookieName + "=" + value) || localStorage.getItem(cookieName) === value
                }
                var cookieName = this.cookieName;
                return !!isCookieSetTo("true") || !isCookieSetTo("false") && null
            },
            setCookie: function(name, value) {
                var date = new Date;
                date.setTime(date.getTime() + this.cookieTimeout), document.cookie = name + "=" + value + ";SameSite=Strict;expires=" + date.toGMTString() + ";path=/"
            },
            deleteCookie: function(name) {
                var hostname = document.location.hostname.replace(/^www\./, ""),
                    commonSuffix = "; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/";
                document.cookie = name + "=; domain=." + hostname + commonSuffix, document.cookie = name + "=" + commonSuffix
            },
            addClickListener: function(DOMElement, callback) {
                if (DOMElement.attachEvent) return DOMElement.attachEvent("onclick", callback);
                DOMElement.addEventListener("click", callback)
            },
            removeBanner: function(wait) {
                setTimeout(function() {
                    var banner = document.getElementById("cookies-eu-banner");
                    banner && banner.parentNode && banner.parentNode.removeChild(banner)
                }, wait)
            }
        }, CookiesEuBanner
    });
</script>
<script class='google-analytics'>
    function googleAnalytics() {
        var i, s, o, r, a, m;
        i = window, s = document, o = "script", r = "ga", i.GoogleAnalyticsObject = r, i.ga = i.ga || function() {
            (i.ga.q = i.ga.q || []).push(arguments)
        }, i.ga.l = +new Date, a = s.createElement(o), m = s.getElementsByTagName(o)[0], a.async = 1, a.src = "//www.google-analytics.com/analytics.js", m.parentNode.insertBefore(a, m), window.ga("create", "UA-87760032-1", "auto"), window.ga("send", "pageview")
    }
</script>
<script class='docSearchInit'>
    function docSearchInit() {
        var algoliaOptions;
        document.querySelector("#search-input") && (algoliaOptions = {
            hitsPerPage: 5,
            facetFilters: facetFilters
        }, /404.html/.test(window.location.pathname) && delete algoliaOptions.facetFilters, window.docsearch({
            appId: algolia_appId,
            apiKey: algolia_apiKey,
            indexName: algolia_index,
            inputSelector: "#search-input",
            algoliaOptions: algoliaOptions
        }))
    }
</script>
<script class='corda-cookie-banner'>
    const docsearchLoad = (resolve, reject) => {
        const script = document.createElement('script');
        document.body.appendChild(script);
        script.onload = resolve;
        script.onerror = reject;
        script.async = true;
        script.src = "https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.js";
    };

    class DocsiteCookies {
        constructor() {
            this.name = 'corda_cookie';
            this.cookiesAccepted = {
                set: true,
                necessary: true,
                preferences: false,
                statistics: false,
                marketing: false
            };
            this.form = document.querySelector('#cookie-consent-form');
            this.handleAllCookies();

            new CookiesEuBanner(() => {
                this.cookieBanner();
            }, true);
        }

        handleAllCookies() {
            const acceptButton = document.querySelector('#cookies-eu-accept');
            const allCookiesButton = document.querySelector('#cookies-eu-accept-all');

            allCookiesButton.addEventListener('click', e => {
                e.preventDefault();
                this.allowAllCookies(this.form);
                acceptButton.click();
            });
        }

        cookieBanner() {
            if (!this.checkConsent()) {
                this.formToCookie(this.name, this.form);
                this.setAdditionalServices();
            } else {
                this.setAdditionalServices();
            }
        }

        allowAllCookies(form) {
            let cookiePreferences = form.querySelectorAll('.cookies-checkbox');
            for (let cookie of cookiePreferences) {
                cookie.querySelector('input').checked = true;
            }
        }

        formToCookie(name, form) {
            const thirteenMonthsInMils = 31104000000;

            let date = new Date();
            date.setTime(date.getTime() + thirteenMonthsInMils);

            let formData = new FormData(form);
            for (var pair of formData.entries()) {
                switch (pair[0]) {
                    case "necessary":
                        this.cookiesAccepted.necessary = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    case "preferences":
                        this.cookiesAccepted.preferences = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    case "statistics":
                        this.cookiesAccepted.statistics = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    case "marketing":
                        this.cookiesAccepted.marketing = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    default:
                        break;
                }
            }
            let cookieValue = JSON.stringify(this.cookiesAccepted);

            document.cookie = `${name}=${cookieValue};SameSite=Strict;expires=${date.toGMTString()};path=/`;
        }

        checkConsent() {
            let cookieName = this.name;
            let cookieValue = this.getCookie(cookieName);

            if (cookieValue) {
                if (cookieValue.set === true) {
                    return true;
                } else {
                    return false;
                }
            } else {
                return false;
            }
        }

        getCookie(name) {
            let value = "; " + document.cookie;
            let parts = value.split("; " + name + "=");
            let cValue = "";

            if (parts.length == 2) {
                cValue = parts.pop().split(";").shift();
            }

            if (hasJsonStructure(cValue)) {
                return JSON.parse(cValue);
            } else {
                return cValue;
            }
        }

        setAdditionalServices() {
            let cookieConsent = this.getCookie(this.name);
            for (let [key, value] of Object.entries(cookieConsent)) {
                if (key === 'necessary' && value === true) {
                    new Promise(docsearchLoad)
                        .then(() => {
                            docSearchInit();
                        })
                        .catch(err => console.log(err));
                }
                if (key === 'statistics' && value === true) {
                    googleAnalytics();
                }
            }
        }
    }

    function hasJsonStructure(str) {
        if (typeof str !== 'string') return false;
        try {
            const result = JSON.parse(str);
            const type = Object.prototype.toString.call(result);
            return type === '[object Object]' ||
                type === '[object Array]';
        } catch (err) {
            return false;
        }
    }
</script>
<script class='initialise'>
    new DocsiteCookies();
</script>
</body>
</html>
