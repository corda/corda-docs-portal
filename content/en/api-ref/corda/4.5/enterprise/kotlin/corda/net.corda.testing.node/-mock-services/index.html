<HTML>
<HEAD>
<meta charset="UTF-8">
<title>MockServices - corda</title>
<link rel="stylesheet" href="../../../style.css">

<meta name="docsearch:language" content="en">
<meta name="docsearch:version" content="4.5">
<meta name="docsearch:project" content="corda-enterprise">
</head>
<BODY>
<a href="../../index.html">corda</a>&nbsp;/&nbsp;<a href="../index.html">net.corda.testing.node</a>&nbsp;/&nbsp;<a href="./index.html">MockServices</a><br/>
<br/>
<h1>MockServices</h1>
<code><span class="keyword">open</span> <span class="keyword">class </span><span class="identifier">MockServices</span>&nbsp;<span class="symbol">:</span>&nbsp;<span class="identifier">ServiceHub</span></code>
<p>An implementation of <a href="#">ServiceHub</a> that is designed for in-memory unit tests of contract validation logic. It has
enough functionality to do tests of code that queries the vault, inserts to the vault, and constructs/checks
transactions. However it isn't enough to test flows and other aspects of an app that require a network. For that
you should investigate <a href="../-mock-network/index.html">MockNetwork</a>.</p>
<p>There are a variety of constructors that can be used to supply enough data to simulate a node. Each mock service hub
must have at least an identity of its own. The other components have defaults that work in most situations.</p>
<h3>Constructors</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="-init-.html">&lt;init&gt;</a></p>
</td>
<td>
<code><span class="identifier">MockServices</span><span class="symbol">(</span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.Iterable((kotlin.String)), , net.corda.core.node.services.IdentityService, kotlin.Array((java.security.KeyPair)))/cordappPackages">cordappPackages</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-iterable/index.html"><span class="identifier">Iterable</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.Iterable((kotlin.String)), , net.corda.core.node.services.IdentityService, kotlin.Array((java.security.KeyPair)))/initialIdentity">initialIdentity</span><span class="symbol">:</span>&nbsp;<span class="identifier">&lt;ERROR CLASS&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.Iterable((kotlin.String)), , net.corda.core.node.services.IdentityService, kotlin.Array((java.security.KeyPair)))/identityService">identityService</span><span class="symbol">:</span>&nbsp;<span class="identifier">IdentityService</span>&nbsp;<span class="symbol">=</span>&nbsp;makeTestIdentityService()<span class="symbol">, </span><span class="keyword">vararg</span> <span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.Iterable((kotlin.String)), , net.corda.core.node.services.IdentityService, kotlin.Array((java.security.KeyPair)))/moreKeys">moreKeys</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/security/KeyPair.html"><span class="identifier">KeyPair</span></a><span class="symbol">)</span></code><br/>
<code><span class="identifier">MockServices</span><span class="symbol">(</span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.Iterable((kotlin.String)), net.corda.core.identity.CordaX500Name, net.corda.core.node.services.IdentityService, java.security.KeyPair, kotlin.Array((java.security.KeyPair)))/cordappPackages">cordappPackages</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-iterable/index.html"><span class="identifier">Iterable</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.Iterable((kotlin.String)), net.corda.core.identity.CordaX500Name, net.corda.core.node.services.IdentityService, java.security.KeyPair, kotlin.Array((java.security.KeyPair)))/initialIdentityName">initialIdentityName</span><span class="symbol">:</span>&nbsp;<span class="identifier">CordaX500Name</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.Iterable((kotlin.String)), net.corda.core.identity.CordaX500Name, net.corda.core.node.services.IdentityService, java.security.KeyPair, kotlin.Array((java.security.KeyPair)))/identityService">identityService</span><span class="symbol">:</span>&nbsp;<span class="identifier">IdentityService</span>&nbsp;<span class="symbol">=</span>&nbsp;makeTestIdentityService()<span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.Iterable((kotlin.String)), net.corda.core.identity.CordaX500Name, net.corda.core.node.services.IdentityService, java.security.KeyPair, kotlin.Array((java.security.KeyPair)))/key">key</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/security/KeyPair.html"><span class="identifier">KeyPair</span></a><span class="symbol">, </span><span class="keyword">vararg</span> <span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.Iterable((kotlin.String)), net.corda.core.identity.CordaX500Name, net.corda.core.node.services.IdentityService, java.security.KeyPair, kotlin.Array((java.security.KeyPair)))/moreKeys">moreKeys</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/security/KeyPair.html"><span class="identifier">KeyPair</span></a><span class="symbol">)</span></code>
<p>Create a mock <a href="#">ServiceHub</a> that looks for app code in the given package names, uses the provided identity service
(you can get one from <a href="../make-test-identity-service.html">makeTestIdentityService</a>) and represents the given identity.</p>
<code><span class="identifier">MockServices</span><span class="symbol">(</span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.Iterable((kotlin.String)), , net.corda.core.node.services.IdentityService, net.corda.core.node.NetworkParameters, kotlin.Array((java.security.KeyPair)))/cordappPackages">cordappPackages</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-iterable/index.html"><span class="identifier">Iterable</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.Iterable((kotlin.String)), , net.corda.core.node.services.IdentityService, net.corda.core.node.NetworkParameters, kotlin.Array((java.security.KeyPair)))/initialIdentity">initialIdentity</span><span class="symbol">:</span>&nbsp;<span class="identifier">&lt;ERROR CLASS&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.Iterable((kotlin.String)), , net.corda.core.node.services.IdentityService, net.corda.core.node.NetworkParameters, kotlin.Array((java.security.KeyPair)))/identityService">identityService</span><span class="symbol">:</span>&nbsp;<span class="identifier">IdentityService</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.Iterable((kotlin.String)), , net.corda.core.node.services.IdentityService, net.corda.core.node.NetworkParameters, kotlin.Array((java.security.KeyPair)))/networkParameters">networkParameters</span><span class="symbol">:</span>&nbsp;<span class="identifier">NetworkParameters</span><span class="symbol">, </span><span class="keyword">vararg</span> <span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.Iterable((kotlin.String)), , net.corda.core.node.services.IdentityService, net.corda.core.node.NetworkParameters, kotlin.Array((java.security.KeyPair)))/moreKeys">moreKeys</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/security/KeyPair.html"><span class="identifier">KeyPair</span></a><span class="symbol">)</span></code><br/>
<code><span class="identifier">MockServices</span><span class="symbol">(</span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.Iterable((kotlin.String)), , net.corda.core.node.services.IdentityService, net.corda.core.node.NetworkParameters, kotlin.Array((java.security.KeyPair)), net.corda.core.node.services.KeyManagementService)/cordappPackages">cordappPackages</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-iterable/index.html"><span class="identifier">Iterable</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.Iterable((kotlin.String)), , net.corda.core.node.services.IdentityService, net.corda.core.node.NetworkParameters, kotlin.Array((java.security.KeyPair)), net.corda.core.node.services.KeyManagementService)/initialIdentity">initialIdentity</span><span class="symbol">:</span>&nbsp;<span class="identifier">&lt;ERROR CLASS&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.Iterable((kotlin.String)), , net.corda.core.node.services.IdentityService, net.corda.core.node.NetworkParameters, kotlin.Array((java.security.KeyPair)), net.corda.core.node.services.KeyManagementService)/identityService">identityService</span><span class="symbol">:</span>&nbsp;<span class="identifier">IdentityService</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.Iterable((kotlin.String)), , net.corda.core.node.services.IdentityService, net.corda.core.node.NetworkParameters, kotlin.Array((java.security.KeyPair)), net.corda.core.node.services.KeyManagementService)/networkParameters">networkParameters</span><span class="symbol">:</span>&nbsp;<span class="identifier">NetworkParameters</span><span class="symbol">, </span><span class="keyword">vararg</span> <span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.Iterable((kotlin.String)), , net.corda.core.node.services.IdentityService, net.corda.core.node.NetworkParameters, kotlin.Array((java.security.KeyPair)), net.corda.core.node.services.KeyManagementService)/moreKeys">moreKeys</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/security/KeyPair.html"><span class="identifier">KeyPair</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.Iterable((kotlin.String)), , net.corda.core.node.services.IdentityService, net.corda.core.node.NetworkParameters, kotlin.Array((java.security.KeyPair)), net.corda.core.node.services.KeyManagementService)/keyManagementService">keyManagementService</span><span class="symbol">:</span>&nbsp;<span class="identifier">KeyManagementService</span><span class="symbol">)</span></code><br/>
<code><span class="identifier">MockServices</span><span class="symbol">(</span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.List((kotlin.String)), net.corda.core.identity.CordaX500Name, net.corda.core.node.services.IdentityService, net.corda.core.node.NetworkParameters)/cordappPackages">cordappPackages</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html"><span class="identifier">List</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.List((kotlin.String)), net.corda.core.identity.CordaX500Name, net.corda.core.node.services.IdentityService, net.corda.core.node.NetworkParameters)/initialIdentityName">initialIdentityName</span><span class="symbol">:</span>&nbsp;<span class="identifier">CordaX500Name</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.List((kotlin.String)), net.corda.core.identity.CordaX500Name, net.corda.core.node.services.IdentityService, net.corda.core.node.NetworkParameters)/identityService">identityService</span><span class="symbol">:</span>&nbsp;<span class="identifier">IdentityService</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.List((kotlin.String)), net.corda.core.identity.CordaX500Name, net.corda.core.node.services.IdentityService, net.corda.core.node.NetworkParameters)/networkParameters">networkParameters</span><span class="symbol">:</span>&nbsp;<span class="identifier">NetworkParameters</span><span class="symbol">)</span></code><br/>
<code><span class="identifier">MockServices</span><span class="symbol">(</span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.List((kotlin.String)), net.corda.core.identity.CordaX500Name, net.corda.core.node.services.IdentityService, net.corda.core.node.NetworkParameters, java.security.KeyPair)/cordappPackages">cordappPackages</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html"><span class="identifier">List</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.List((kotlin.String)), net.corda.core.identity.CordaX500Name, net.corda.core.node.services.IdentityService, net.corda.core.node.NetworkParameters, java.security.KeyPair)/initialIdentityName">initialIdentityName</span><span class="symbol">:</span>&nbsp;<span class="identifier">CordaX500Name</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.List((kotlin.String)), net.corda.core.identity.CordaX500Name, net.corda.core.node.services.IdentityService, net.corda.core.node.NetworkParameters, java.security.KeyPair)/identityService">identityService</span><span class="symbol">:</span>&nbsp;<span class="identifier">IdentityService</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.List((kotlin.String)), net.corda.core.identity.CordaX500Name, net.corda.core.node.services.IdentityService, net.corda.core.node.NetworkParameters, java.security.KeyPair)/networkParameters">networkParameters</span><span class="symbol">:</span>&nbsp;<span class="identifier">NetworkParameters</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.List((kotlin.String)), net.corda.core.identity.CordaX500Name, net.corda.core.node.services.IdentityService, net.corda.core.node.NetworkParameters, java.security.KeyPair)/key">key</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/security/KeyPair.html"><span class="identifier">KeyPair</span></a><span class="symbol">)</span></code><br/>
<code><span class="identifier">MockServices</span><span class="symbol">(</span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(, net.corda.core.node.NetworkParameters, kotlin.Array(()))/firstIdentity">firstIdentity</span><span class="symbol">:</span>&nbsp;<span class="identifier">&lt;ERROR CLASS&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(, net.corda.core.node.NetworkParameters, kotlin.Array(()))/networkParameters">networkParameters</span><span class="symbol">:</span>&nbsp;<span class="identifier">NetworkParameters</span><span class="symbol">, </span><span class="keyword">vararg</span> <span class="identifier" id="net.corda.testing.node.MockServices$<init>(, net.corda.core.node.NetworkParameters, kotlin.Array(()))/moreIdentities">moreIdentities</span><span class="symbol">:</span>&nbsp;<span class="identifier">&lt;ERROR CLASS&gt;</span><span class="symbol">)</span></code><br/>
<code><span class="identifier">MockServices</span><span class="symbol">(</span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.List((kotlin.String)), , kotlin.Array(()))/cordappPackages">cordappPackages</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html"><span class="identifier">List</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.List((kotlin.String)), , kotlin.Array(()))/firstIdentity">firstIdentity</span><span class="symbol">:</span>&nbsp;<span class="identifier">&lt;ERROR CLASS&gt;</span><span class="symbol">, </span><span class="keyword">vararg</span> <span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.List((kotlin.String)), , kotlin.Array(()))/moreIdentities">moreIdentities</span><span class="symbol">:</span>&nbsp;<span class="identifier">&lt;ERROR CLASS&gt;</span><span class="symbol">)</span></code><br/>
<code><span class="identifier">MockServices</span><span class="symbol">(</span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.List((kotlin.String)), , net.corda.core.node.NetworkParameters, kotlin.Array(()))/cordappPackages">cordappPackages</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html"><span class="identifier">List</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.List((kotlin.String)), , net.corda.core.node.NetworkParameters, kotlin.Array(()))/firstIdentity">firstIdentity</span><span class="symbol">:</span>&nbsp;<span class="identifier">&lt;ERROR CLASS&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.List((kotlin.String)), , net.corda.core.node.NetworkParameters, kotlin.Array(()))/networkParameters">networkParameters</span><span class="symbol">:</span>&nbsp;<span class="identifier">NetworkParameters</span><span class="symbol">, </span><span class="keyword">vararg</span> <span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.List((kotlin.String)), , net.corda.core.node.NetworkParameters, kotlin.Array(()))/moreIdentities">moreIdentities</span><span class="symbol">:</span>&nbsp;<span class="identifier">&lt;ERROR CLASS&gt;</span><span class="symbol">)</span></code><code><span class="identifier">MockServices</span><span class="symbol">(</span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.Iterable((kotlin.String)), net.corda.core.identity.CordaX500Name, net.corda.core.node.services.IdentityService)/cordappPackages">cordappPackages</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-iterable/index.html"><span class="identifier">Iterable</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.Iterable((kotlin.String)), net.corda.core.identity.CordaX500Name, net.corda.core.node.services.IdentityService)/initialIdentityName">initialIdentityName</span><span class="symbol">:</span>&nbsp;<span class="identifier">CordaX500Name</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.Iterable((kotlin.String)), net.corda.core.identity.CordaX500Name, net.corda.core.node.services.IdentityService)/identityService">identityService</span><span class="symbol">:</span>&nbsp;<span class="identifier">IdentityService</span>&nbsp;<span class="symbol">=</span>&nbsp;makeTestIdentityService()<span class="symbol">)</span></code>
<p>Create a mock <a href="#">ServiceHub</a> that can't load CorDapp code, which uses the provided identity service
(you can get one from <a href="../make-test-identity-service.html">makeTestIdentityService</a>) and which represents the given identity.</p>
<code><span class="identifier">MockServices</span><span class="symbol">(</span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(kotlin.collections.Iterable((kotlin.String)))/cordappPackages">cordappPackages</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-iterable/index.html"><span class="identifier">Iterable</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">&gt;</span><span class="symbol">)</span></code>
<p>Create a mock <a href="#">ServiceHub</a> that can't load CorDapp code, and which uses a default service identity.</p>
<code><span class="identifier">MockServices</span><span class="symbol">(</span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(net.corda.core.identity.CordaX500Name, net.corda.core.node.services.IdentityService, java.security.KeyPair, kotlin.Array((java.security.KeyPair)))/initialIdentityName">initialIdentityName</span><span class="symbol">:</span>&nbsp;<span class="identifier">CordaX500Name</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(net.corda.core.identity.CordaX500Name, net.corda.core.node.services.IdentityService, java.security.KeyPair, kotlin.Array((java.security.KeyPair)))/identityService">identityService</span><span class="symbol">:</span>&nbsp;<span class="identifier">IdentityService</span>&nbsp;<span class="symbol">=</span>&nbsp;makeTestIdentityService()<span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(net.corda.core.identity.CordaX500Name, net.corda.core.node.services.IdentityService, java.security.KeyPair, kotlin.Array((java.security.KeyPair)))/key">key</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/security/KeyPair.html"><span class="identifier">KeyPair</span></a><span class="symbol">, </span><span class="keyword">vararg</span> <span class="identifier" id="net.corda.testing.node.MockServices$<init>(net.corda.core.identity.CordaX500Name, net.corda.core.node.services.IdentityService, java.security.KeyPair, kotlin.Array((java.security.KeyPair)))/moreKeys">moreKeys</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/security/KeyPair.html"><span class="identifier">KeyPair</span></a><span class="symbol">)</span></code>
<p>Create a mock <a href="#">ServiceHub</a> which uses the package of the caller to find CorDapp code. It uses the provided identity service
(you can get one from <a href="../make-test-identity-service.html">makeTestIdentityService</a>) and which represents the given identity.</p>
<code><span class="identifier">MockServices</span><span class="symbol">(</span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(net.corda.core.identity.CordaX500Name, net.corda.core.node.services.IdentityService)/initialIdentityName">initialIdentityName</span><span class="symbol">:</span>&nbsp;<span class="identifier">CordaX500Name</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(net.corda.core.identity.CordaX500Name, net.corda.core.node.services.IdentityService)/identityService">identityService</span><span class="symbol">:</span>&nbsp;<span class="identifier">IdentityService</span>&nbsp;<span class="symbol">=</span>&nbsp;makeTestIdentityService()<span class="symbol">)</span></code>
<p>Create a mock <a href="#">ServiceHub</a> which uses the package of the caller to find CorDapp code. It uses the provided identity service
(you can get one from <a href="../make-test-identity-service.html">makeTestIdentityService</a>) and which represents the given identity. It has no keys.</p>
<code><span class="identifier">MockServices</span><span class="symbol">(</span><span class="identifier" id="net.corda.testing.node.MockServices$<init>(, kotlin.Array(()))/firstIdentity">firstIdentity</span><span class="symbol">:</span>&nbsp;<span class="identifier">&lt;ERROR CLASS&gt;</span><span class="symbol">, </span><span class="keyword">vararg</span> <span class="identifier" id="net.corda.testing.node.MockServices$<init>(, kotlin.Array(()))/moreIdentities">moreIdentities</span><span class="symbol">:</span>&nbsp;<span class="identifier">&lt;ERROR CLASS&gt;</span><span class="symbol">)</span></code>
<p>A helper constructor that requires at least one test identity to be registered, and which takes the package of
the caller as the package in which to find app code. This is the most convenient constructor and the one that
is normally worth using. The first identity is the identity of this service hub, the rest are identities that
it is aware of.</p>
<code><span class="identifier">MockServices</span><span class="symbol">(</span><span class="symbol">)</span></code>
<p>Create a mock <a href="#">ServiceHub</a> which uses the package of the caller to find CorDapp code. It uses a default service
identity.</p>
</td>
</tr>
</tbody>
</table>
<h3>Properties</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="attachments.html">attachments</a></p>
</td>
<td>
<code><span class="keyword">val </span><span class="identifier">attachments</span><span class="symbol">: </span><a href="../../net.corda.testing.services/-mock-attachment-storage/index.html"><span class="identifier">MockAttachmentStorage</span></a></code></td>
</tr>
<tr>
<td>
<p><a href="clock.html">clock</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">val </span><span class="identifier">clock</span><span class="symbol">: </span><a href="../-test-clock/index.html"><span class="identifier">TestClock</span></a></code></td>
</tr>
<tr>
<td>
<p><a href="contract-upgrade-service.html">contractUpgradeService</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">val </span><span class="identifier">contractUpgradeService</span><span class="symbol">: </span><span class="identifier">ContractUpgradeService</span></code></td>
</tr>
<tr>
<td>
<p><a href="cordapp-classloader.html">cordappClassloader</a></p>
</td>
<td>
<code><span class="keyword">val </span><span class="identifier">cordappClassloader</span><span class="symbol">: </span><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/ClassLoader.html"><span class="identifier">ClassLoader</span></a></code>
<p>Returns the classloader containing all jar deployed in the 'cordapps' folder.</p>
</td>
</tr>
<tr>
<td>
<p><a href="cordapp-provider.html">cordappProvider</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">val </span><span class="identifier">cordappProvider</span><span class="symbol">: </span><span class="identifier">CordappProvider</span></code></td>
</tr>
<tr>
<td>
<p><a href="diagnostics-service.html">diagnosticsService</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">val </span><span class="identifier">diagnosticsService</span><span class="symbol">: </span><span class="identifier">DiagnosticsService</span></code></td>
</tr>
<tr>
<td>
<p><a href="identity-service.html">identityService</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">val </span><span class="identifier">identityService</span><span class="symbol">: </span><span class="identifier">IdentityService</span></code></td>
</tr>
<tr>
<td>
<p><a href="key-management-service.html">keyManagementService</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">val </span><span class="identifier">keyManagementService</span><span class="symbol">: </span><span class="identifier">KeyManagementService</span></code></td>
</tr>
<tr>
<td>
<p><a href="my-info.html">myInfo</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">val </span><span class="identifier">myInfo</span><span class="symbol">: </span><span class="identifier">NodeInfo</span></code></td>
</tr>
<tr>
<td>
<p><a href="network-map-cache.html">networkMapCache</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">val </span><span class="identifier">networkMapCache</span><span class="symbol">: </span><span class="identifier">NetworkMapCache</span></code></td>
</tr>
<tr>
<td>
<p><a href="network-parameters.html">networkParameters</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">val </span><span class="identifier">networkParameters</span><span class="symbol">: </span><span class="identifier">NetworkParameters</span></code></td>
</tr>
<tr>
<td>
<p><a href="network-parameters-service.html">networkParametersService</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">var </span><span class="identifier">networkParametersService</span><span class="symbol">: </span><span class="identifier">NetworkParametersService</span></code></td>
</tr>
<tr>
<td>
<p><a href="services-for-resolution.html">servicesForResolution</a></p>
</td>
<td>
<code><span class="keyword">val </span><span class="identifier">servicesForResolution</span><span class="symbol">: </span><span class="identifier">ServicesForResolution</span></code></td>
</tr>
<tr>
<td>
<p><a href="transaction-verifier-service.html">transactionVerifierService</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">val </span><span class="identifier">transactionVerifierService</span><span class="symbol">: </span><span class="identifier">TransactionVerifierService</span></code></td>
</tr>
<tr>
<td>
<p><a href="validated-transactions.html">validatedTransactions</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">val </span><span class="identifier">validatedTransactions</span><span class="symbol">: </span><span class="identifier">TransactionStorage</span></code></td>
</tr>
<tr>
<td>
<p><a href="vault-service.html">vaultService</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">val </span><span class="identifier">vaultService</span><span class="symbol">: </span><span class="identifier">VaultService</span></code></td>
</tr>
</tbody>
</table>
<h3>Functions</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="add-mock-cordapp.html">addMockCordapp</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">addMockCordapp</span><span class="symbol">(</span><span class="identifier" id="net.corda.testing.node.MockServices$addMockCordapp(kotlin.String)/contractClassName">contractClassName</span><span class="symbol">:</span>&nbsp;<span class="identifier">ContractClassName</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code>
<p>Add the given package name to the list of packages which will be scanned for cordapp contract verification code</p>
</td>
</tr>
<tr>
<td>
<p><a href="corda-service.html">cordaService</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="symbol">&lt;</span><span class="identifier">T</span>&nbsp;<span class="symbol">:</span>&nbsp;<span class="identifier">SerializeAsToken</span><span class="symbol">&gt;</span> <span class="identifier">cordaService</span><span class="symbol">(</span><span class="identifier" id="net.corda.testing.node.MockServices$cordaService(java.lang.Class((net.corda.testing.node.MockServices.cordaService.T)))/type">type</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html"><span class="identifier">Class</span></a><span class="symbol">&lt;</span><a href="corda-service.html#T"><span class="identifier">T</span></a><span class="symbol">&gt;</span><span class="symbol">)</span><span class="symbol">: </span><a href="corda-service.html#T"><span class="identifier">T</span></a></code></td>
</tr>
<tr>
<td>
<p><a href="jdbc-session.html">jdbcSession</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">jdbcSession</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="http://docs.oracle.com/javase/8/docs/api/java/sql/Connection.html"><span class="identifier">Connection</span></a></code></td>
</tr>
<tr>
<td>
<p><a href="load-contract-attachment.html">loadContractAttachment</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">loadContractAttachment</span><span class="symbol">(</span><span class="identifier" id="net.corda.testing.node.MockServices$loadContractAttachment(net.corda.core.contracts.StateRef)/stateRef">stateRef</span><span class="symbol">:</span>&nbsp;<span class="identifier">StateRef</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Attachment</span></code>
<p>Returns a dummy Attachment, in context of signature constrains non-downgrade rule this default to contract class version <code>1</code>.</p>
</td>
</tr>
<tr>
<td>
<p><a href="load-state.html">loadState</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">loadState</span><span class="symbol">(</span><span class="identifier" id="net.corda.testing.node.MockServices$loadState(net.corda.core.contracts.StateRef)/stateRef">stateRef</span><span class="symbol">:</span>&nbsp;<span class="identifier">StateRef</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">TransactionState</span><span class="symbol">&lt;</span><span class="identifier">*</span><span class="symbol">&gt;</span></code></td>
</tr>
<tr>
<td>
<p><a href="load-states.html">loadStates</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">loadStates</span><span class="symbol">(</span><span class="identifier" id="net.corda.testing.node.MockServices$loadStates(kotlin.collections.Set((net.corda.core.contracts.StateRef)))/stateRefs">stateRefs</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-set/index.html"><span class="identifier">Set</span></a><span class="symbol">&lt;</span><span class="identifier">StateRef</span><span class="symbol">&gt;</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-set/index.html"><span class="identifier">Set</span></a><span class="symbol">&lt;</span><span class="identifier">StateAndRef</span><span class="symbol">&lt;</span><span class="identifier">ContractState</span><span class="symbol">&gt;</span><span class="symbol">&gt;</span></code></td>
</tr>
<tr>
<td>
<p><a href="record-transactions.html">recordTransactions</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">recordTransactions</span><span class="symbol">(</span><span class="identifier" id="net.corda.testing.node.MockServices$recordTransactions(net.corda.core.node.StatesToRecord, kotlin.collections.Iterable((net.corda.core.transactions.SignedTransaction)))/statesToRecord">statesToRecord</span><span class="symbol">:</span>&nbsp;<span class="identifier">StatesToRecord</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices$recordTransactions(net.corda.core.node.StatesToRecord, kotlin.collections.Iterable((net.corda.core.transactions.SignedTransaction)))/txs">txs</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-iterable/index.html"><span class="identifier">Iterable</span></a><span class="symbol">&lt;</span><span class="identifier">SignedTransaction</span><span class="symbol">&gt;</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code></td>
</tr>
<tr>
<td>
<p><a href="register-unload-handler.html">registerUnloadHandler</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">registerUnloadHandler</span><span class="symbol">(</span><span class="identifier" id="net.corda.testing.node.MockServices$registerUnloadHandler(kotlin.Function0((kotlin.Unit)))/runOnStop">runOnStop</span><span class="symbol">:</span>&nbsp;<span class="symbol">(</span><span class="symbol">)</span>&nbsp;<span class="symbol">-&gt;</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing/index.html"><span class="identifier">Nothing</span></a></code></td>
</tr>
<tr>
<td>
<p><a href="with-entity-manager.html">withEntityManager</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="symbol">&lt;</span><span class="identifier">T</span><span class="symbol">&gt;</span> <span class="identifier">withEntityManager</span><span class="symbol">(</span><span class="identifier" id="net.corda.testing.node.MockServices$withEntityManager(kotlin.Function1((javax.persistence.EntityManager, net.corda.testing.node.MockServices.withEntityManager.T)))/block">block</span><span class="symbol">:</span>&nbsp;<span class="identifier">EntityManager</span><span class="symbol">.</span><span class="symbol">(</span><span class="symbol">)</span>&nbsp;<span class="symbol">-&gt;</span>&nbsp;<a href="with-entity-manager.html#T"><span class="identifier">T</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="with-entity-manager.html#T"><span class="identifier">T</span></a></code><br/>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">withEntityManager</span><span class="symbol">(</span><span class="identifier" id="net.corda.testing.node.MockServices$withEntityManager(java.util.function.Consumer((javax.persistence.EntityManager)))/block">block</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/util/function/Consumer.html"><span class="identifier">Consumer</span></a><span class="symbol">&lt;</span><span class="identifier">EntityManager</span><span class="symbol">&gt;</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code></td>
</tr>
</tbody>
</table>
<h3>Companion Object Functions</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="make-test-data-source-properties.html">makeTestDataSourceProperties</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">makeTestDataSourceProperties</span><span class="symbol">(</span><span class="identifier" id="net.corda.testing.node.MockServices.Companion$makeTestDataSourceProperties(kotlin.String)/nodeName">nodeName</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a>&nbsp;<span class="symbol">=</span>&nbsp;SecureHash.randomSHA256().toString()<span class="symbol">)</span><span class="symbol">: </span><a href="http://docs.oracle.com/javase/8/docs/api/java/util/Properties.html"><span class="identifier">Properties</span></a></code>
<p>Make properties appropriate for creating a DataSource for unit tests.
Defaults configuration of in-memory H2 instance. If 'databaseProvider' system property is set then creates
a config from the relevant config file is present in resources folder (used to parametrize test to run against a remote database).</p>
</td>
</tr>
<tr>
<td>
<p><a href="make-test-database-and-mock-services.html">makeTestDatabaseAndMockServices</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">makeTestDatabaseAndMockServices</span><span class="symbol">(</span><span class="identifier" id="net.corda.testing.node.MockServices.Companion$makeTestDatabaseAndMockServices(kotlin.collections.List((kotlin.String)), net.corda.core.node.services.IdentityService, , net.corda.core.node.NetworkParameters, kotlin.Array((java.security.KeyPair)))/cordappPackages">cordappPackages</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html"><span class="identifier">List</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices.Companion$makeTestDatabaseAndMockServices(kotlin.collections.List((kotlin.String)), net.corda.core.node.services.IdentityService, , net.corda.core.node.NetworkParameters, kotlin.Array((java.security.KeyPair)))/identityService">identityService</span><span class="symbol">:</span>&nbsp;<span class="identifier">IdentityService</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices.Companion$makeTestDatabaseAndMockServices(kotlin.collections.List((kotlin.String)), net.corda.core.node.services.IdentityService, , net.corda.core.node.NetworkParameters, kotlin.Array((java.security.KeyPair)))/initialIdentity">initialIdentity</span><span class="symbol">:</span>&nbsp;<span class="identifier">&lt;ERROR CLASS&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices.Companion$makeTestDatabaseAndMockServices(kotlin.collections.List((kotlin.String)), net.corda.core.node.services.IdentityService, , net.corda.core.node.NetworkParameters, kotlin.Array((java.security.KeyPair)))/networkParameters">networkParameters</span><span class="symbol">:</span>&nbsp;<span class="identifier">NetworkParameters</span>&nbsp;<span class="symbol">=</span>&nbsp;testNetworkParameters(modifiedTime = Instant.MIN)<span class="symbol">, </span><span class="keyword">vararg</span> <span class="identifier" id="net.corda.testing.node.MockServices.Companion$makeTestDatabaseAndMockServices(kotlin.collections.List((kotlin.String)), net.corda.core.node.services.IdentityService, , net.corda.core.node.NetworkParameters, kotlin.Array((java.security.KeyPair)))/moreKeys">moreKeys</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/security/KeyPair.html"><span class="identifier">KeyPair</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-pair/index.html"><span class="identifier">Pair</span></a><span class="symbol">&lt;</span><span class="identifier">CordaPersistence</span><span class="symbol">,</span>&nbsp;<a href="./index.html"><span class="identifier">MockServices</span></a><span class="symbol">&gt;</span></code>
<p>Makes database and mock services appropriate for unit tests.</p>
</td>
</tr>
<tr>
<td>
<p><a href="make-test-database-and-persistent-services.html">makeTestDatabaseAndPersistentServices</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">makeTestDatabaseAndPersistentServices</span><span class="symbol">(</span><span class="identifier" id="net.corda.testing.node.MockServices.Companion$makeTestDatabaseAndPersistentServices(kotlin.collections.List((kotlin.String)), , net.corda.core.node.NetworkParameters, kotlin.collections.Set((java.security.KeyPair)), kotlin.collections.Set((net.corda.core.identity.PartyAndCertificate)), net.corda.testing.internal.TestingNamedCacheFactory)/cordappPackages">cordappPackages</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html"><span class="identifier">List</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices.Companion$makeTestDatabaseAndPersistentServices(kotlin.collections.List((kotlin.String)), , net.corda.core.node.NetworkParameters, kotlin.collections.Set((java.security.KeyPair)), kotlin.collections.Set((net.corda.core.identity.PartyAndCertificate)), net.corda.testing.internal.TestingNamedCacheFactory)/initialIdentity">initialIdentity</span><span class="symbol">:</span>&nbsp;<span class="identifier">&lt;ERROR CLASS&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices.Companion$makeTestDatabaseAndPersistentServices(kotlin.collections.List((kotlin.String)), , net.corda.core.node.NetworkParameters, kotlin.collections.Set((java.security.KeyPair)), kotlin.collections.Set((net.corda.core.identity.PartyAndCertificate)), net.corda.testing.internal.TestingNamedCacheFactory)/networkParameters">networkParameters</span><span class="symbol">:</span>&nbsp;<span class="identifier">NetworkParameters</span>&nbsp;<span class="symbol">=</span>&nbsp;testNetworkParameters(modifiedTime = Instant.MIN)<span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices.Companion$makeTestDatabaseAndPersistentServices(kotlin.collections.List((kotlin.String)), , net.corda.core.node.NetworkParameters, kotlin.collections.Set((java.security.KeyPair)), kotlin.collections.Set((net.corda.core.identity.PartyAndCertificate)), net.corda.testing.internal.TestingNamedCacheFactory)/moreKeys">moreKeys</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-set/index.html"><span class="identifier">Set</span></a><span class="symbol">&lt;</span><a href="http://docs.oracle.com/javase/8/docs/api/java/security/KeyPair.html"><span class="identifier">KeyPair</span></a><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices.Companion$makeTestDatabaseAndPersistentServices(kotlin.collections.List((kotlin.String)), , net.corda.core.node.NetworkParameters, kotlin.collections.Set((java.security.KeyPair)), kotlin.collections.Set((net.corda.core.identity.PartyAndCertificate)), net.corda.testing.internal.TestingNamedCacheFactory)/moreIdentities">moreIdentities</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-set/index.html"><span class="identifier">Set</span></a><span class="symbol">&lt;</span><span class="identifier">PartyAndCertificate</span><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.testing.node.MockServices.Companion$makeTestDatabaseAndPersistentServices(kotlin.collections.List((kotlin.String)), , net.corda.core.node.NetworkParameters, kotlin.collections.Set((java.security.KeyPair)), kotlin.collections.Set((net.corda.core.identity.PartyAndCertificate)), net.corda.testing.internal.TestingNamedCacheFactory)/cacheFactory">cacheFactory</span><span class="symbol">:</span>&nbsp;<span class="identifier">TestingNamedCacheFactory</span>&nbsp;<span class="symbol">=</span>&nbsp;TestingNamedCacheFactory()<span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-pair/index.html"><span class="identifier">Pair</span></a><span class="symbol">&lt;</span><span class="identifier">CordaPersistence</span><span class="symbol">,</span>&nbsp;<a href="./index.html"><span class="identifier">MockServices</span></a><span class="symbol">&gt;</span></code>
<p>Makes database and persistent services appropriate for unit tests which require persistence across the vault, identity service
and key managment service.</p>
</td>
</tr>
</tbody>
</table>
<h3>Extension Functions</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="../../net.corda.finance.workflows/net.corda.core.node.-service-hub/get-cash-balance.html">getCashBalance</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">ServiceHub</span><span class="symbol">.</span><span class="identifier">getCashBalance</span><span class="symbol">(</span><span class="identifier" id="net.corda.finance.workflows$getCashBalance(net.corda.core.node.ServiceHub, java.util.Currency)/currency">currency</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/util/Currency.html"><span class="identifier">Currency</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Amount</span><span class="symbol">&lt;</span><a href="http://docs.oracle.com/javase/8/docs/api/java/util/Currency.html"><span class="identifier">Currency</span></a><span class="symbol">&gt;</span></code></td>
</tr>
<tr>
<td>
<p><a href="../../net.corda.finance.workflows/net.corda.core.node.-service-hub/get-cash-balances.html">getCashBalances</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">ServiceHub</span><span class="symbol">.</span><span class="identifier">getCashBalances</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-map/index.html"><span class="identifier">Map</span></a><span class="symbol">&lt;</span><a href="http://docs.oracle.com/javase/8/docs/api/java/util/Currency.html"><span class="identifier">Currency</span></a><span class="symbol">,</span>&nbsp;<span class="identifier">Amount</span><span class="symbol">&lt;</span><a href="http://docs.oracle.com/javase/8/docs/api/java/util/Currency.html"><span class="identifier">Currency</span></a><span class="symbol">&gt;</span><span class="symbol">&gt;</span></code></td>
</tr>
<tr>
<td>
<p><a href="../net.corda.core.node.-service-hub/ledger.html">ledger</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">ServiceHub</span><span class="symbol">.</span><span class="identifier">ledger</span><span class="symbol">(</span><span class="identifier" id="net.corda.testing.node$ledger(net.corda.core.node.ServiceHub, net.corda.core.identity.Party, kotlin.Function1((net.corda.testing.dsl.LedgerDSL((net.corda.testing.dsl.TestTransactionDSLInterpreter, net.corda.testing.dsl.TestLedgerDSLInterpreter)), kotlin.Unit)))/notary">notary</span><span class="symbol">:</span>&nbsp;<span class="identifier">Party</span>&nbsp;<span class="symbol">=</span>&nbsp;TestIdentity.fresh("ledger notary").party<span class="symbol">, </span><span class="identifier" id="net.corda.testing.node$ledger(net.corda.core.node.ServiceHub, net.corda.core.identity.Party, kotlin.Function1((net.corda.testing.dsl.LedgerDSL((net.corda.testing.dsl.TestTransactionDSLInterpreter, net.corda.testing.dsl.TestLedgerDSLInterpreter)), kotlin.Unit)))/script">script</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.testing.dsl/-ledger-d-s-l/index.html"><span class="identifier">LedgerDSL</span></a><span class="symbol">&lt;</span><a href="../../net.corda.testing.dsl/-test-transaction-d-s-l-interpreter/index.html"><span class="identifier">TestTransactionDSLInterpreter</span></a><span class="symbol">,</span>&nbsp;<a href="../../net.corda.testing.dsl/-test-ledger-d-s-l-interpreter/index.html"><span class="identifier">TestLedgerDSLInterpreter</span></a><span class="symbol">&gt;</span><span class="symbol">.</span><span class="symbol">(</span><span class="symbol">)</span>&nbsp;<span class="symbol">-&gt;</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="../../net.corda.testing.dsl/-ledger-d-s-l/index.html"><span class="identifier">LedgerDSL</span></a><span class="symbol">&lt;</span><a href="../../net.corda.testing.dsl/-test-transaction-d-s-l-interpreter/index.html"><span class="identifier">TestTransactionDSLInterpreter</span></a><span class="symbol">,</span>&nbsp;<a href="../../net.corda.testing.dsl/-test-ledger-d-s-l-interpreter/index.html"><span class="identifier">TestLedgerDSLInterpreter</span></a><span class="symbol">&gt;</span></code>
<p>Creates and tests a ledger built by the passed in dsl.</p>
</td>
</tr>
<tr>
<td>
<p><a href="../net.corda.core.node.-service-hub/transaction.html">transaction</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">ServiceHub</span><span class="symbol">.</span><span class="identifier">transaction</span><span class="symbol">(</span><span class="identifier" id="net.corda.testing.node$transaction(net.corda.core.node.ServiceHub, net.corda.core.identity.Party, kotlin.Function1((net.corda.testing.dsl.TransactionDSL((net.corda.testing.dsl.TransactionDSLInterpreter)), net.corda.testing.dsl.EnforceVerifyOrFail)))/notary">notary</span><span class="symbol">:</span>&nbsp;<span class="identifier">Party</span>&nbsp;<span class="symbol">=</span>&nbsp;TestIdentity.fresh("transaction notary").party<span class="symbol">, </span><span class="identifier" id="net.corda.testing.node$transaction(net.corda.core.node.ServiceHub, net.corda.core.identity.Party, kotlin.Function1((net.corda.testing.dsl.TransactionDSL((net.corda.testing.dsl.TransactionDSLInterpreter)), net.corda.testing.dsl.EnforceVerifyOrFail)))/script">script</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.testing.dsl/-transaction-d-s-l/index.html"><span class="identifier">TransactionDSL</span></a><span class="symbol">&lt;</span><a href="../../net.corda.testing.dsl/-transaction-d-s-l-interpreter/index.html"><span class="identifier">TransactionDSLInterpreter</span></a><span class="symbol">&gt;</span><span class="symbol">.</span><span class="symbol">(</span><span class="symbol">)</span>&nbsp;<span class="symbol">-&gt;</span>&nbsp;<a href="../../net.corda.testing.dsl/-enforce-verify-or-fail.html"><span class="identifier">EnforceVerifyOrFail</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="../../net.corda.testing.dsl/-ledger-d-s-l/index.html"><span class="identifier">LedgerDSL</span></a><span class="symbol">&lt;</span><a href="../../net.corda.testing.dsl/-test-transaction-d-s-l-interpreter/index.html"><span class="identifier">TestTransactionDSLInterpreter</span></a><span class="symbol">,</span>&nbsp;<a href="../../net.corda.testing.dsl/-test-ledger-d-s-l-interpreter/index.html"><span class="identifier">TestLedgerDSLInterpreter</span></a><span class="symbol">&gt;</span></code>
<p>Creates a ledger with a single transaction, built by the passed in dsl.</p>
</td>
</tr>
</tbody>
</table>

<style>
    @import url("https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,500,600");
    #cookies-eu-banner {
        background-color: rgba(83, 88, 95, 0.9);
        border-radius: 3px;
        color: #fff;
        font-family: 'Source Sans Pro', sans-serif;
        font-size: 13px;
        font-weight: 400;
        left: 3px;
        position: fixed;
        padding: 6px;
        right: 3px;
        text-align: center;
        top: 100px;
        z-index: 1000;
    }
    
    #cookies-eu-banner h3,
    #cookies-eu-banner p {
        color: #fff;
        font-size: 18px;
        letter-spacing: 0;
    }
    
    #cookies-eu-banner h3 {
        font-size: 24px;
        font-style: normal;
        font-weight: 400;
        line-height: 1.2;
        margin: 9px 0 0;
        text-transform: uppercase;
    }
    
    #cookies-eu-banner p {
        margin-bottom: 10px;
        padding: 8px 36px 0;
        text-align: justify;
        line-height: 1.4em;
    }
    
    #cookies-eu-banner fieldset {
        min-width: 0;
        padding: 0;
        margin: 0;
        border: 0;
    }
    
    #cookies-eu-banner legend {
        color: inherit;
        display: block;
        font-size: 18px;
        line-height: inherit;
        max-width: 100%;
        margin-bottom: 16px;
        padding: 0;
        white-space: normal;
        width: 100%;
    }
    
    #cookies-eu-banner a {
        color: #62AAF1;
    }
    
    #cookies-eu-banner .cookies-button-group {
        display: flex;
        justify-content: center;
    }
    
    #cookies-eu-accept,
    #cookies-eu-accept-all {
        background-color: #ec1d24;
        border: none;
        border-radius: 6px;
        color: #fff;
        font-size: 12px;
        font-weight: 600;
        margin: 0 10px 10px;
        max-height: 40px;
        height: 40px;
        line-height: 1.1;
        text-decoration: none;
        width: 150px;
    }
    
    .cookies-checkbox {
        display: inline-block;
        margin: 5px 10px;
    }
    
    .cookies-checkbox label {
        font-size: 16px;
        margin-left: 3px;
    }
    
    @media screen and (min-width: 768px) {
        #cookies-eu-banner {
            bottom: 5px;
            top: inherit;
        }
        #cookies-eu-accept,
        #cookies-eu-accept-all {
            font-size: 14px;
        }
    }
</style>
<div id="cookies-eu-banner" style="display: none;">
    <h3 style="text-transform:none">Your privacy</h3>
    <div class='cookie-flex'>
        <p>
            We use cookies to improve your experience on our site, and to help us understand how people use our documentation. For more detailed information, see our <a href="https://www.r3.com/privacy-policy/">privacy policy</a> and <a href="#">cookie declaration</a>.
        </p>
        <form id='cookie-consent-form'>
            <fieldset>
                <legend>
                    Please select from the following options to continue to our site.
                </legend>
                <div class='cookies-button-group'>
                    <button id="cookies-eu-accept" type="button">
                      Allow cookies selected
                    </button>
                    <button id="cookies-eu-accept-all" type="button">
                      Allow all cookies
                    </button>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="necessary"
                      name="necessary"
                      autocomplete="off"
                      checked
                      disabled />
                        <input
                        name="necessary"
                        type="hidden"
                        value="on"/>
                        <label for="necessary">Necessary</label>
                    </span>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="preferences"
                      name="preferences"
                      autocomplete="off" />
                      <label for="preferences">Preferences</label>
                    </span>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="statistics"
                      name="statistics"
                      autocomplete="off" />
                      <label for="statistics">Statistics</label>
                    </span>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="marketing"
                      name="marketing"
                      autocomplete="off" />
                      <label for="marketing">Marketing</label>
                    </span>
                </div>
            </fieldset>
        </form>
    </div>
</div>
<script class='api-keys'>
    var gaKey = 'UA-87760032-1';
    var algolia_appId = "UX2KMUWFAL";
    var algolia_apiKey = "1fe3367db02689b4aeebc59efad5abaf";
    var algolia_index = "docs.corda.net";
</script>
<script class='cookies-eu-banner'>
    ! function(root, factory) {
        "use strict";
        "function" == typeof define && define.amd ? define([], factory) : "object" == typeof exports ? module.exports = factory() : root.CookiesEuBanner = factory()
    }(window, function() {
        "use strict";
        var document = window.document,
            CookiesEuBanner = function(launchFunction, waitAccept, useLocalStorage, undefined) {
                if (!(this instanceof CookiesEuBanner)) return new CookiesEuBanner(launchFunction);
                this.cookieTimeout = 33696e6, this.bots = /bot|crawler|spider|crawling/i, this.cookieName = "hasConsent", this.trackingCookiesNames = ["__utma", "__utmb", "__utmc", "__utmt", "__utmv", "__utmz", "_ga", "_gat", "_gid"], this.launchFunction = launchFunction, this.waitAccept = waitAccept || !1, this.useLocalStorage = useLocalStorage || !1, this.init()
            };
        return CookiesEuBanner.prototype = {
            init: function() {
                var isBot = this.bots.test(navigator.userAgent);
                navigator.doNotTrack || navigator.msDoNotTrack || window.doNotTrack;
                return isBot || !1 === this.hasConsent() ? (this.removeBanner(0), !1) : !0 === this.hasConsent() ? (this.launchFunction(), !0) : (this.showBanner(), void(this.waitAccept || this.setConsent(!0)))
            },
            showBanner: function() {
                var _this = this,
                    getElementById = document.getElementById.bind(document),
                    banner = getElementById("cookies-eu-banner"),
                    rejectButton = getElementById("cookies-eu-reject"),
                    acceptButton = getElementById("cookies-eu-accept"),
                    moreLink = getElementById("cookies-eu-more"),
                    waitRemove = void 0 === banner.dataset.waitRemove ? 0 : parseInt(banner.dataset.waitRemove),
                    addClickListener = this.addClickListener,
                    removeBanner = _this.removeBanner.bind(_this, waitRemove);
                banner.style.display = "block", moreLink && addClickListener(moreLink, function() {
                    _this.deleteCookie(_this.cookieName)
                }), acceptButton && addClickListener(acceptButton, function() {
                    removeBanner(), _this.setConsent(!0), _this.launchFunction()
                }), rejectButton && addClickListener(rejectButton, function() {
                    removeBanner(), _this.setConsent(!1), _this.trackingCookiesNames.map(_this.deleteCookie)
                })
            },
            setConsent: function(consent) {
                if (this.useLocalStorage) return localStorage.setItem(this.cookieName, consent);
                this.setCookie(this.cookieName, consent)
            },
            hasConsent: function() {
                function isCookieSetTo(value) {
                    return -1 < document.cookie.indexOf(cookieName + "=" + value) || localStorage.getItem(cookieName) === value
                }
                var cookieName = this.cookieName;
                return !!isCookieSetTo("true") || !isCookieSetTo("false") && null
            },
            setCookie: function(name, value) {
                var date = new Date;
                date.setTime(date.getTime() + this.cookieTimeout), document.cookie = name + "=" + value + ";SameSite=Strict;expires=" + date.toGMTString() + ";path=/"
            },
            deleteCookie: function(name) {
                var hostname = document.location.hostname.replace(/^www\./, ""),
                    commonSuffix = "; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/";
                document.cookie = name + "=; domain=." + hostname + commonSuffix, document.cookie = name + "=" + commonSuffix
            },
            addClickListener: function(DOMElement, callback) {
                if (DOMElement.attachEvent) return DOMElement.attachEvent("onclick", callback);
                DOMElement.addEventListener("click", callback)
            },
            removeBanner: function(wait) {
                setTimeout(function() {
                    var banner = document.getElementById("cookies-eu-banner");
                    banner && banner.parentNode && banner.parentNode.removeChild(banner)
                }, wait)
            }
        }, CookiesEuBanner
    });
</script>
<script class='google-analytics'>
    function googleAnalytics() {
        var i, s, o, r, a, m;
        i = window, s = document, o = "script", r = "ga", i.GoogleAnalyticsObject = r, i.ga = i.ga || function() {
            (i.ga.q = i.ga.q || []).push(arguments)
        }, i.ga.l = +new Date, a = s.createElement(o), m = s.getElementsByTagName(o)[0], a.async = 1, a.src = "//www.google-analytics.com/analytics.js", m.parentNode.insertBefore(a, m), window.ga("create", "UA-87760032-1", "auto"), window.ga("send", "pageview")
    }
</script>
<script class='docSearchInit'>
    function docSearchInit() {
        var algoliaOptions;
        document.querySelector("#search-input") && (algoliaOptions = {
            hitsPerPage: 5,
            facetFilters: facetFilters
        }, /404.html/.test(window.location.pathname) && delete algoliaOptions.facetFilters, window.docsearch({
            appId: algolia_appId,
            apiKey: algolia_apiKey,
            indexName: algolia_index,
            inputSelector: "#search-input",
            algoliaOptions: algoliaOptions
        }))
    }
</script>
<script class='corda-cookie-banner'>
    const docsearchLoad = (resolve, reject) => {
        const script = document.createElement('script');
        document.body.appendChild(script);
        script.onload = resolve;
        script.onerror = reject;
        script.async = true;
        script.src = "https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.js";
    };

    class DocsiteCookies {
        constructor() {
            this.name = 'corda_cookie';
            this.cookiesAccepted = {
                set: true,
                necessary: true,
                preferences: false,
                statistics: false,
                marketing: false
            };
            this.form = document.querySelector('#cookie-consent-form');
            this.handleAllCookies();

            new CookiesEuBanner(() => {
                this.cookieBanner();
            }, true);
        }

        handleAllCookies() {
            const acceptButton = document.querySelector('#cookies-eu-accept');
            const allCookiesButton = document.querySelector('#cookies-eu-accept-all');

            allCookiesButton.addEventListener('click', e => {
                e.preventDefault();
                this.allowAllCookies(this.form);
                acceptButton.click();
            });
        }

        cookieBanner() {
            if (!this.checkConsent()) {
                this.formToCookie(this.name, this.form);
                this.setAdditionalServices();
            } else {
                this.setAdditionalServices();
            }
        }

        allowAllCookies(form) {
            let cookiePreferences = form.querySelectorAll('.cookies-checkbox');
            for (let cookie of cookiePreferences) {
                cookie.querySelector('input').checked = true;
            }
        }

        formToCookie(name, form) {
            const thirteenMonthsInMils = 31104000000;

            let date = new Date();
            date.setTime(date.getTime() + thirteenMonthsInMils);

            let formData = new FormData(form);
            for (var pair of formData.entries()) {
                switch (pair[0]) {
                    case "necessary":
                        this.cookiesAccepted.necessary = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    case "preferences":
                        this.cookiesAccepted.preferences = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    case "statistics":
                        this.cookiesAccepted.statistics = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    case "marketing":
                        this.cookiesAccepted.marketing = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    default:
                        break;
                }
            }
            let cookieValue = JSON.stringify(this.cookiesAccepted);

            document.cookie = `${name}=${cookieValue};SameSite=Strict;expires=${date.toGMTString()};path=/`;
        }

        checkConsent() {
            let cookieName = this.name;
            let cookieValue = this.getCookie(cookieName);

            if (cookieValue) {
                if (cookieValue.set === true) {
                    return true;
                } else {
                    return false;
                }
            } else {
                return false;
            }
        }

        getCookie(name) {
            let value = "; " + document.cookie;
            let parts = value.split("; " + name + "=");
            let cValue = "";

            if (parts.length == 2) {
                cValue = parts.pop().split(";").shift();
            }

            if (hasJsonStructure(cValue)) {
                return JSON.parse(cValue);
            } else {
                return cValue;
            }
        }

        setAdditionalServices() {
            let cookieConsent = this.getCookie(this.name);
            for (let [key, value] of Object.entries(cookieConsent)) {
                if (key === 'necessary' && value === true) {
                    new Promise(docsearchLoad)
                        .then(() => {
                            docSearchInit();
                        })
                        .catch(err => console.log(err));
                }
                if (key === 'statistics' && value === true) {
                    googleAnalytics();
                }
            }
        }
    }

    function hasJsonStructure(str) {
        if (typeof str !== 'string') return false;
        try {
            const result = JSON.parse(str);
            const type = Object.prototype.toString.call(result);
            return type === '[object Object]' ||
                type === '[object Array]';
        } catch (err) {
            return false;
        }
    }
</script>
<script class='initialise'>
    new DocsiteCookies();
</script>
</body>
</HTML>
