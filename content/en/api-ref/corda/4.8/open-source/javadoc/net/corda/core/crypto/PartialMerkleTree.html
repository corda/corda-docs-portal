<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_265) on Fri Apr 23 17:46:38 BST 2021 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>PartialMerkleTree</title>
<meta name="date" content="2021-04-23">
<meta name="keywords" content="net.corda.core.crypto.PartialMerkleTree class">
<meta name="keywords" content="Companion">
<meta name="keywords" content="verify()">
<meta name="keywords" content="leafIndex()">
<meta name="keywords" content="getRoot()">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="PartialMerkleTree";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../net/corda/core/crypto/NullKeys.NullPublicKey.html" title="class in net.corda.core.crypto"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../net/corda/core/crypto/PartialMerkleTree.PartialTree.html" title="class in net.corda.core.crypto"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?net/corda/core/crypto/PartialMerkleTree.html" target="_top">Frames</a></li>
<li><a href="PartialMerkleTree.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">net.corda.core.crypto</div>
<h2 title="Class PartialMerkleTree" class="title">Class PartialMerkleTree</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>net.corda.core.crypto.PartialMerkleTree</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">PartialMerkleTree</span></pre>
<div class="block"><p><p>Building and verification of Partial Merkle Tree.
Partial Merkle Tree is a minimal tree needed to check that a given set of leaves belongs to a full Merkle Tree.</p></p><p><p><p>Example of Merkle tree with 5 leaves.</p><code><pre>             h15
          /       \
         h14       h55
        /  \      /  \
      h12  h34   h50 h00
     / \   / \   / \  / \
    l1 l2 l3 l4 l5 0 0  0</pre></code><p>l* denote hashes of leaves, h* - hashes of nodes below. 0 denotes zero hash, we use it to pad not full binary trees,
so the number of leaves is always a power of 2.</p><p>Example of Partial tree based on the tree above.</p><code><pre>           ___
        /       \
        _        _
      /  \      /  \
    h12   _     _   h00
         / \   / \
        I3 l4 I5 0</pre></code><p>We want to check l3 and l5 - now turned into IncudedLeaf (I3 and I5 above). To verify that these two leaves belong to
the tree with a hash root h15 we need to provide a Merkle branch (or partial tree). In our case we need hashes:
h12, l4, 0 and h00. Verification is done by hashing the partial tree to obtain the root and checking it against
the obtained h15 hash. Additionally we store included hashes used in calculation and compare them to leaves hashes we got
(there can be a difference in obtained leaves ordering - that's why it's a set comparison not hashing leaves into a tree).
If both equalities hold, we can assume that l3 and l5 belong to the transaction with root h15.</p></p></p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/crypto/PartialMerkleTree.Companion.html" title="class in net.corda.core.crypto">PartialMerkleTree.Companion</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/crypto/PartialMerkleTree.PartialTree.html" title="class in net.corda.core.crypto">PartialMerkleTree.PartialTree</a></span></code>
<div class="block">The structure is a little different than that of Merkle Tree.
Partial Tree might not be a full binary tree. Leaves represent either original Merkle tree leaves
or cut subtree node with stored hash. We differentiate between the leaves that are included in a filtered
transaction and leaves that just keep hashes needed for calculation. Reason for this approach: during verification
it's easier to extract hashes used as a base for this tree.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../../net/corda/core/crypto/PartialMerkleTree.Companion.html" title="type parameter in PartialMerkleTree.Companion">PartialMerkleTree.Companion</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/crypto/PartialMerkleTree.html#Companion">Companion</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../net/corda/core/crypto/PartialMerkleTree.html#PartialMerkleTree-root-">PartialMerkleTree</a></span>(<a href="../../../../net/corda/core/crypto/PartialMerkleTree.PartialTree.html" title="type parameter in PartialMerkleTree.PartialTree">PartialMerkleTree.PartialTree</a>&nbsp;root)</code>
<div class="block">Building and verification of Partial Merkle Tree.
Partial Merkle Tree is a minimal tree needed to check that a given set of leaves belongs to a full Merkle Tree.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/crypto/PartialMerkleTree.PartialTree.html" title="type parameter in PartialMerkleTree.PartialTree">PartialMerkleTree.PartialTree</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/crypto/PartialMerkleTree.html#getRoot--">getRoot</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/crypto/PartialMerkleTree.html#leafIndex-leaf-">leafIndex</a></span>(<a href="../../../../net/corda/core/crypto/SecureHash.html" title="type parameter in SecureHash">SecureHash</a>&nbsp;leaf)</code>
<div class="block">Method to return the index of the input leaf in the partial Merkle tree structure.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/crypto/PartialMerkleTree.html#verify-merkleRootHash-hashesToCheck-">verify</a></span>(<a href="../../../../net/corda/core/crypto/SecureHash.html" title="type parameter in SecureHash">SecureHash</a>&nbsp;merkleRootHash,
      java.util.List&lt;? extends net.corda.core.crypto.SecureHash&gt;&nbsp;hashesToCheck)</code>
<div class="block">Function to verify a <a href="../../../../net/corda/core/crypto/PartialMerkleTree.html" title="class in net.corda.core.crypto"><code>class PartialMerkleTree</code></a> against an input Merkle root and a list of leaves.
The tree should only contain the leaves defined in hashesToCheck.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="Companion">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Companion</h4>
<pre>public static&nbsp;<a href="../../../../net/corda/core/crypto/PartialMerkleTree.Companion.html" title="type parameter in PartialMerkleTree.Companion">PartialMerkleTree.Companion</a> Companion</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="PartialMerkleTree-root-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>PartialMerkleTree</h4>
<pre>public&nbsp;PartialMerkleTree(<a href="../../../../net/corda/core/crypto/PartialMerkleTree.PartialTree.html" title="type parameter in PartialMerkleTree.PartialTree">PartialMerkleTree.PartialTree</a>&nbsp;root)</pre>
<div class="block"><p><p>Building and verification of Partial Merkle Tree.
Partial Merkle Tree is a minimal tree needed to check that a given set of leaves belongs to a full Merkle Tree.</p></p><p><p><p>Example of Merkle tree with 5 leaves.</p><code><pre>             h15
          /       \
         h14       h55
        /  \      /  \
      h12  h34   h50 h00
     / \   / \   / \  / \
    l1 l2 l3 l4 l5 0 0  0</pre></code><p>l* denote hashes of leaves, h* - hashes of nodes below. 0 denotes zero hash, we use it to pad not full binary trees,
so the number of leaves is always a power of 2.</p><p>Example of Partial tree based on the tree above.</p><code><pre>           ___
        /       \
        _        _
      /  \      /  \
    h12   _     _   h00
         / \   / \
        I3 l4 I5 0</pre></code><p>We want to check l3 and l5 - now turned into IncudedLeaf (I3 and I5 above). To verify that these two leaves belong to
the tree with a hash root h15 we need to provide a Merkle branch (or partial tree). In our case we need hashes:
h12, l4, 0 and h00. Verification is done by hashing the partial tree to obtain the root and checking it against
the obtained h15 hash. Additionally we store included hashes used in calculation and compare them to leaves hashes we got
(there can be a difference in obtained leaves ordering - that's why it's a set comparison not hashing leaves into a tree).
If both equalities hold, we can assume that l3 and l5 belong to the transaction with root h15.</p></p></p></div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="verify-merkleRootHash-hashesToCheck-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verify</h4>
<pre>public&nbsp;boolean&nbsp;verify(<a href="../../../../net/corda/core/crypto/SecureHash.html" title="type parameter in SecureHash">SecureHash</a>&nbsp;merkleRootHash,
                      java.util.List&lt;? extends net.corda.core.crypto.SecureHash&gt;&nbsp;hashesToCheck)</pre>
<div class="block"><p><p>Function to verify a <a href="../../../../net/corda/core/crypto/PartialMerkleTree.html" title="class in net.corda.core.crypto"><code>class PartialMerkleTree</code></a> against an input Merkle root and a list of leaves.
The tree should only contain the leaves defined in hashesToCheck.</p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>merkleRootHash</code> - Hash that should be checked for equality with root calculated from this partial tree.</dd>
<dd><code>hashesToCheck</code> - List of included leaves hashes that should be found in this partial tree.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/crypto/PartialMerkleTree.html" title="class in net.corda.core.crypto"><code>class PartialMerkleTree</code></a></dd>
</dl>
</li>
</ul>
<a name="leafIndex-leaf-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>leafIndex</h4>
<pre>public&nbsp;int&nbsp;leafIndex(<a href="../../../../net/corda/core/crypto/SecureHash.html" title="type parameter in SecureHash">SecureHash</a>&nbsp;leaf)</pre>
<div class="block"><p><p>Method to return the index of the input leaf in the partial Merkle tree structure.</p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>leaf</code> - the component hash to check.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>leaf-index of this component (starting from zero).</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd> - if the provided hash is not in the tree.</dd>
</dl>
</li>
</ul>
<a name="getRoot--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getRoot</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/crypto/PartialMerkleTree.PartialTree.html" title="type parameter in PartialMerkleTree.PartialTree">PartialMerkleTree.PartialTree</a>&nbsp;getRoot()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../net/corda/core/crypto/NullKeys.NullPublicKey.html" title="class in net.corda.core.crypto"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../net/corda/core/crypto/PartialMerkleTree.PartialTree.html" title="class in net.corda.core.crypto"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?net/corda/core/crypto/PartialMerkleTree.html" target="_top">Frames</a></li>
<li><a href="PartialMerkleTree.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
