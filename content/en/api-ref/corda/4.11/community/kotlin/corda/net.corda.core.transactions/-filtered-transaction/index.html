<HTML>
<HEAD>
<meta charset="UTF-8">
<title>FilteredTransaction - corda</title>
<link rel="stylesheet" href="../../../style.css">
</HEAD>
<BODY>
<a href="../../index.html">corda</a>&nbsp;/&nbsp;<a href="../index.html">net.corda.core.transactions</a>&nbsp;/&nbsp;<a href="./index.html">FilteredTransaction</a><br/>
<br/>
<h1>FilteredTransaction</h1>
<code><span class="keyword">class </span><span class="identifier">FilteredTransaction</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../-traversable-transaction/index.html"><span class="identifier">TraversableTransaction</span></a></code>
<p>Class representing merkleized filtered transaction.</p>
<h3>Parameters</h3>
<p><a name="id"></a>
<code>id</code> - Merkle tree root hash.</p>
<p><a name="filteredComponentGroups"></a>
<code>filteredComponentGroups</code> - list of transaction components groups remained after filters are applied to <a href="../-wire-transaction/index.html">WireTransaction</a>.</p>
<p><a name="groupHashes"></a>
<code>groupHashes</code> - the roots of the transaction component groups.</p>
<h3>Properties</h3>
<table>
<tbody>
<tr>
<td>
<h4><a href="filtered-component-groups.html">filteredComponentGroups</a></h4>
</td>
<td>
<p>list of transaction components groups remained after filters are applied to <a href="../-wire-transaction/index.html">WireTransaction</a>.</p>
<code><span class="keyword">val </span><span class="identifier">filteredComponentGroups</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html"><span class="identifier">List</span></a><span class="symbol">&lt;</span><a href="../-filtered-component-group/index.html"><span class="identifier">FilteredComponentGroup</span></a><span class="symbol">&gt;</span></code></td>
</tr>
<tr>
<td>
<h4><a href="group-hashes.html">groupHashes</a></h4>
</td>
<td>
<p>the roots of the transaction component groups.</p>
<code><span class="keyword">val </span><span class="identifier">groupHashes</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html"><span class="identifier">List</span></a><span class="symbol">&lt;</span><a href="../../net.corda.core.crypto/-secure-hash/index.html"><span class="identifier">SecureHash</span></a><span class="symbol">&gt;</span></code></td>
</tr>
<tr>
<td>
<h4><a href="id.html">id</a></h4>
</td>
<td>
<p>Merkle tree root hash.</p>
<code><span class="keyword">val </span><span class="identifier">id</span><span class="symbol">: </span><a href="../../net.corda.core.crypto/-secure-hash/index.html"><span class="identifier">SecureHash</span></a></code></td>
</tr>
</tbody>
</table>
<h3>Functions</h3>
<table>
<tbody>
<tr>
<td>
<h4><a href="check-all-components-visible.html">checkAllComponentsVisible</a></h4>
</td>
<td>
<p>Function that checks if all of the components in a particular group are visible.
This functionality is required on non-Validating Notaries to check that all inputs are visible.
It might also be applied in Oracles or any other entity requiring <a href="../../net.corda.core.contracts/-command/index.html">Command</a> visibility, but because this method
cannot distinguish between related and unrelated to the signer <a href="../../net.corda.core.contracts/-command/index.html">Command</a>s, one should use the
<a href="check-command-visibility.html">checkCommandVisibility</a> method, which is specifically designed for <a href="../../net.corda.core.contracts/-command/index.html">Command</a> visibility purposes.
The logic behind this algorithm is that we check that the root of the provided group partialMerkleTree matches with the
root of a fullMerkleTree if computed using all visible components.
Note that this method is usually called after or before <a href="verify.html">verify</a>, to also ensure that the provided partial Merkle
tree corresponds to the correct leaf in the top Merkle tree.</p>
<code><span class="keyword">fun </span><span class="identifier">checkAllComponentsVisible</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.transactions.FilteredTransaction$checkAllComponentsVisible(net.corda.core.contracts.ComponentGroupEnum)/componentGroupEnum">componentGroupEnum</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.contracts/-component-group-enum/index.html"><span class="identifier">ComponentGroupEnum</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code></td>
</tr>
<tr>
<td>
<h4><a href="check-command-visibility.html">checkCommandVisibility</a></h4>
</td>
<td>
<p>Function that checks if all of the commands that should be signed by the input public key are visible.
This functionality is required from Oracles to check that all of the commands they should sign are visible.
This algorithm uses the <a href="../../net.corda.core.contracts/-component-group-enum/-s-i-g-n-e-r-s_-g-r-o-u-p.html">ComponentGroupEnum.SIGNERS_GROUP</a> to count how many commands should be signed by the
input <a href="https://docs.oracle.com/javase/8/docs/api/java/security/PublicKey.html">PublicKey</a> and it then matches it with the size of received <a href="../-traversable-transaction/commands.html">commands</a>.
Note that this method does not throw if there are no commands for this key to sign in the original <a href="../-wire-transaction/index.html">WireTransaction</a>.</p>
<code><span class="keyword">fun </span><span class="identifier">checkCommandVisibility</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.transactions.FilteredTransaction$checkCommandVisibility(java.security.PublicKey)/publicKey">publicKey</span><span class="symbol">:</span>&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/security/PublicKey.html"><span class="identifier">PublicKey</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code></td>
</tr>
<tr>
<td>
<h4><a href="check-with-fun.html">checkWithFun</a></h4>
</td>
<td>
<p>Function that checks the whole filtered structure.
Force type checking on a structure that we obtained, so we don't sign more than expected.
Example: Oracle is implemented to check only for commands, if it gets an attachment and doesn't expect it - it can sign
over a transaction with the attachment that wasn't verified. Of course it depends on how you implement it, but else -&gt; false
should solve a problem with possible later extensions to WireTransaction.</p>
<code><span class="keyword">fun </span><span class="identifier">checkWithFun</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.transactions.FilteredTransaction$checkWithFun(kotlin.Function1((kotlin.Any, kotlin.Boolean)))/checkingFun">checkingFun</span><span class="symbol">:</span>&nbsp;<span class="symbol">(</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html"><span class="identifier">Any</span></a><span class="symbol">)</span>&nbsp;<span class="symbol">-&gt;</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html"><span class="identifier">Boolean</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html"><span class="identifier">Boolean</span></a></code></td>
</tr>
<tr>
<td>
<h4><a href="verify.html">verify</a></h4>
</td>
<td>
<p>Runs verification of partial Merkle branch against <a href="id.html">id</a>.
Note that empty filtered transactions (with no component groups) are accepted as well,
e.g. for Timestamp Authorities to blindly sign or any other similar case in the future
that requires a blind signature over a transaction's <a href="id.html">id</a>.</p>
<code><span class="keyword">fun </span><span class="identifier">verify</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code></td>
</tr>
</tbody>
</table>
<h3>Companion Object Functions</h3>
<table>
<tbody>
<tr>
<td>
<h4><a href="build-filtered-transaction.html">buildFilteredTransaction</a></h4>
</td>
<td>
<p>Construction of filtered transaction with partial Merkle tree.</p>
<code><span class="keyword">fun </span><span class="identifier">buildFilteredTransaction</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.transactions.FilteredTransaction.Companion$buildFilteredTransaction(net.corda.core.transactions.WireTransaction, java.util.function.Predicate((kotlin.Any)))/wtx">wtx</span><span class="symbol">:</span>&nbsp;<a href="../-wire-transaction/index.html"><span class="identifier">WireTransaction</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.core.transactions.FilteredTransaction.Companion$buildFilteredTransaction(net.corda.core.transactions.WireTransaction, java.util.function.Predicate((kotlin.Any)))/filtering">filtering</span><span class="symbol">:</span>&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/function/Predicate.html"><span class="identifier">Predicate</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html"><span class="identifier">Any</span></a><span class="symbol">&gt;</span><span class="symbol">)</span><span class="symbol">: </span><a href="./index.html"><span class="identifier">FilteredTransaction</span></a></code></td>
</tr>
</tbody>
</table>
</BODY>
</HTML>
