<HTML>
<HEAD>
<meta charset="UTF-8">
<title>CashUtils.generateSpend - corda</title>
<link rel="stylesheet" href="../../../style.css">
</HEAD>
<BODY>
<a href="../../index.html">corda</a>&nbsp;/&nbsp;<a href="../index.html">net.corda.finance.workflows.asset</a>&nbsp;/&nbsp;<a href="index.html">CashUtils</a>&nbsp;/&nbsp;<a href="./generate-spend.html">generateSpend</a><br/>
<br/>
<h1>generateSpend</h1>
<a name="net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, net.corda.core.contracts.Amount((java.util.Currency)), net.corda.core.identity.AbstractParty, kotlin.collections.Set((net.corda.core.identity.AbstractParty)))"></a>
<code><span class="identifier">@JvmStatic</span> <span class="identifier">@Suspendable</span> <span class="keyword">fun </span><s><span class="identifier">generateSpend</span></s><span class="symbol">(</span><span class="identifier" id="net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, net.corda.core.contracts.Amount((java.util.Currency)), net.corda.core.identity.AbstractParty, kotlin.collections.Set((net.corda.core.identity.AbstractParty)))/services">services</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.node/-service-hub/index.html"><span class="identifier">ServiceHub</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, net.corda.core.contracts.Amount((java.util.Currency)), net.corda.core.identity.AbstractParty, kotlin.collections.Set((net.corda.core.identity.AbstractParty)))/tx">tx</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.transactions/-transaction-builder/index.html"><span class="identifier">TransactionBuilder</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, net.corda.core.contracts.Amount((java.util.Currency)), net.corda.core.identity.AbstractParty, kotlin.collections.Set((net.corda.core.identity.AbstractParty)))/amount">amount</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.contracts/-amount/index.html"><span class="identifier">Amount</span></a><span class="symbol">&lt;</span><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Currency.html"><span class="identifier">Currency</span></a><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, net.corda.core.contracts.Amount((java.util.Currency)), net.corda.core.identity.AbstractParty, kotlin.collections.Set((net.corda.core.identity.AbstractParty)))/to">to</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.identity/-abstract-party/index.html"><span class="identifier">AbstractParty</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, net.corda.core.contracts.Amount((java.util.Currency)), net.corda.core.identity.AbstractParty, kotlin.collections.Set((net.corda.core.identity.AbstractParty)))/onlyFromParties">onlyFromParties</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-set/index.html"><span class="identifier">Set</span></a><span class="symbol">&lt;</span><a href="../../net.corda.core.identity/-abstract-party/index.html"><span class="identifier">AbstractParty</span></a><span class="symbol">&gt;</span>&nbsp;<span class="symbol">=</span>&nbsp;emptySet()<span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-pair/index.html"><span class="identifier">Pair</span></a><span class="symbol">&lt;</span><a href="../../net.corda.core.transactions/-transaction-builder/index.html"><span class="identifier">TransactionBuilder</span></a><span class="symbol">,</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html"><span class="identifier">List</span></a><span class="symbol">&lt;</span><a href="https://docs.oracle.com/javase/8/docs/api/java/security/PublicKey.html"><span class="identifier">PublicKey</span></a><span class="symbol">&gt;</span><span class="symbol">&gt;</span></code><br/>
<strong>Deprecated:</strong> Our identity should be specified<br/>
<br/>
<p>Generate a transaction that moves an amount of currency to the given party, and sends any change back to
sole identity of the calling node. Fails for nodes with multiple identities.</p>
<p>Note: an <a href="../../net.corda.core.contracts/-amount/index.html">Amount</a> of <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Currency.html">Currency</a> is only fungible for a given Issuer Party within a <a href="../../net.corda.core.contracts/-fungible-asset/index.html">FungibleAsset</a></p>
<h3>Parameters</h3>
<p><a name="services"></a>
<code>services</code> - The <a href="../../net.corda.core.node/-service-hub/index.html">ServiceHub</a> to provide access to the database session.</p>
<p><a name="tx"></a>
<code>tx</code> - A builder, which may contain inputs, outputs and commands already. The relevant components needed
    to move the cash will be added on top.</p>
<p><a name="amount"></a>
<code>amount</code> - How much currency to send.</p>
<p><a name="to"></a>
<code>to</code> - the recipient party.</p>
<p><a name="onlyFromParties"></a>
<code>onlyFromParties</code> - if non-null, the asset states will be filtered to only include those issued by the set
    of given parties. This can be useful if the party you're trying to pay has expectations
    about which type of asset claims they are willing to accept.</p>
<h3>Exceptions</h3>
<p><a name="InsufficientBalanceException"></a>
<code>InsufficientBalanceException</code> - when a cash spending transaction fails because
    there is insufficient quantity for a given currency (and optionally set of Issuer Parties).</p>
<p><strong>Return</strong><br/>
A <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-pair/index.html">Pair</a> of the same transaction builder passed in as <a href="generate-spend.html#net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, net.corda.core.contracts.Amount((java.util.Currency)), net.corda.core.identity.AbstractParty, kotlin.collections.Set((net.corda.core.identity.AbstractParty)))/tx">tx</a>, and the list of keys that need to sign
    the resulting transaction for it to be valid.</p>
<a name="net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, net.corda.core.contracts.Amount((java.util.Currency)), net.corda.core.identity.PartyAndCertificate, net.corda.core.identity.AbstractParty, kotlin.collections.Set((net.corda.core.identity.AbstractParty)), kotlin.Boolean)"></a>
<code><span class="identifier">@JvmStatic</span> <span class="identifier">@JvmOverloads</span> <span class="identifier">@Suspendable</span> <span class="keyword">fun </span><span class="identifier">generateSpend</span><span class="symbol">(</span><span class="identifier" id="net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, net.corda.core.contracts.Amount((java.util.Currency)), net.corda.core.identity.PartyAndCertificate, net.corda.core.identity.AbstractParty, kotlin.collections.Set((net.corda.core.identity.AbstractParty)), kotlin.Boolean)/services">services</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.node/-service-hub/index.html"><span class="identifier">ServiceHub</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, net.corda.core.contracts.Amount((java.util.Currency)), net.corda.core.identity.PartyAndCertificate, net.corda.core.identity.AbstractParty, kotlin.collections.Set((net.corda.core.identity.AbstractParty)), kotlin.Boolean)/tx">tx</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.transactions/-transaction-builder/index.html"><span class="identifier">TransactionBuilder</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, net.corda.core.contracts.Amount((java.util.Currency)), net.corda.core.identity.PartyAndCertificate, net.corda.core.identity.AbstractParty, kotlin.collections.Set((net.corda.core.identity.AbstractParty)), kotlin.Boolean)/amount">amount</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.contracts/-amount/index.html"><span class="identifier">Amount</span></a><span class="symbol">&lt;</span><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Currency.html"><span class="identifier">Currency</span></a><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, net.corda.core.contracts.Amount((java.util.Currency)), net.corda.core.identity.PartyAndCertificate, net.corda.core.identity.AbstractParty, kotlin.collections.Set((net.corda.core.identity.AbstractParty)), kotlin.Boolean)/ourIdentity">ourIdentity</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.identity/-party-and-certificate/index.html"><span class="identifier">PartyAndCertificate</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, net.corda.core.contracts.Amount((java.util.Currency)), net.corda.core.identity.PartyAndCertificate, net.corda.core.identity.AbstractParty, kotlin.collections.Set((net.corda.core.identity.AbstractParty)), kotlin.Boolean)/to">to</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.identity/-abstract-party/index.html"><span class="identifier">AbstractParty</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, net.corda.core.contracts.Amount((java.util.Currency)), net.corda.core.identity.PartyAndCertificate, net.corda.core.identity.AbstractParty, kotlin.collections.Set((net.corda.core.identity.AbstractParty)), kotlin.Boolean)/onlyFromParties">onlyFromParties</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-set/index.html"><span class="identifier">Set</span></a><span class="symbol">&lt;</span><a href="../../net.corda.core.identity/-abstract-party/index.html"><span class="identifier">AbstractParty</span></a><span class="symbol">&gt;</span>&nbsp;<span class="symbol">=</span>&nbsp;emptySet()<span class="symbol">, </span><span class="identifier" id="net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, net.corda.core.contracts.Amount((java.util.Currency)), net.corda.core.identity.PartyAndCertificate, net.corda.core.identity.AbstractParty, kotlin.collections.Set((net.corda.core.identity.AbstractParty)), kotlin.Boolean)/anonymous">anonymous</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html"><span class="identifier">Boolean</span></a>&nbsp;<span class="symbol">=</span>&nbsp;true<span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-pair/index.html"><span class="identifier">Pair</span></a><span class="symbol">&lt;</span><a href="../../net.corda.core.transactions/-transaction-builder/index.html"><span class="identifier">TransactionBuilder</span></a><span class="symbol">,</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html"><span class="identifier">List</span></a><span class="symbol">&lt;</span><a href="https://docs.oracle.com/javase/8/docs/api/java/security/PublicKey.html"><span class="identifier">PublicKey</span></a><span class="symbol">&gt;</span><span class="symbol">&gt;</span></code>
<p>Generate a transaction that moves an amount of currency to the given party.</p>
<p>Note: an <a href="../../net.corda.core.contracts/-amount/index.html">Amount</a> of <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Currency.html">Currency</a> is only fungible for a given Issuer Party within a <a href="../../net.corda.core.contracts/-fungible-asset/index.html">FungibleAsset</a></p>
<h3>Parameters</h3>
<p><a name="services"></a>
<code>services</code> - The <a href="../../net.corda.core.node/-service-hub/index.html">ServiceHub</a> to provide access to the database session.</p>
<p><a name="tx"></a>
<code>tx</code> - A builder, which may contain inputs, outputs and commands already. The relevant components needed
    to move the cash will be added on top.</p>
<p><a name="amount"></a>
<code>amount</code> - How much currency to send.</p>
<p><a name="to"></a>
<code>to</code> - the recipient party.</p>
<p><a name="ourIdentity"></a>
<code>ourIdentity</code> - ourIdentity is used to determine the where the change will be sent.
    If anonymous is true then an anonymous identity will be generated from this and the change
    will be spent to that, otherwise ourIdentity will be used as is.</p>
<p><a name="onlyFromParties"></a>
<code>onlyFromParties</code> - if non-null, the asset states will be filtered to only include those issued by the set
    of given parties. This can be useful if the party you're trying to pay has expectations
    about which type of asset claims they are willing to accept.</p>
<p><a name="anonymous"></a>
<code>anonymous</code> - whether or not to use CI to send the change to</p>
<h3>Exceptions</h3>
<p><a name="InsufficientBalanceException"></a>
<code>InsufficientBalanceException</code> - when a cash spending transaction fails because
    there is insufficient quantity for a given currency (and optionally set of Issuer Parties).</p>
<p><strong>Return</strong><br/>
A <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-pair/index.html">Pair</a> of the same transaction builder passed in as <a href="generate-spend.html#net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, net.corda.core.contracts.Amount((java.util.Currency)), net.corda.core.identity.PartyAndCertificate, net.corda.core.identity.AbstractParty, kotlin.collections.Set((net.corda.core.identity.AbstractParty)), kotlin.Boolean)/tx">tx</a>, and the list of keys that need to sign
    the resulting transaction for it to be valid.</p>
<a name="net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, kotlin.collections.List((net.corda.finance.contracts.asset.PartyAndAmount((java.util.Currency)))), kotlin.collections.Set((net.corda.core.identity.AbstractParty)))"></a>
<code><span class="identifier">@JvmStatic</span> <span class="identifier">@Suspendable</span> <span class="keyword">fun </span><s><span class="identifier">generateSpend</span></s><span class="symbol">(</span><span class="identifier" id="net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, kotlin.collections.List((net.corda.finance.contracts.asset.PartyAndAmount((java.util.Currency)))), kotlin.collections.Set((net.corda.core.identity.AbstractParty)))/services">services</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.node/-service-hub/index.html"><span class="identifier">ServiceHub</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, kotlin.collections.List((net.corda.finance.contracts.asset.PartyAndAmount((java.util.Currency)))), kotlin.collections.Set((net.corda.core.identity.AbstractParty)))/tx">tx</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.transactions/-transaction-builder/index.html"><span class="identifier">TransactionBuilder</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, kotlin.collections.List((net.corda.finance.contracts.asset.PartyAndAmount((java.util.Currency)))), kotlin.collections.Set((net.corda.core.identity.AbstractParty)))/payments">payments</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html"><span class="identifier">List</span></a><span class="symbol">&lt;</span><a href="../../net.corda.finance.contracts.asset/-party-and-amount/index.html"><span class="identifier">PartyAndAmount</span></a><span class="symbol">&lt;</span><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Currency.html"><span class="identifier">Currency</span></a><span class="symbol">&gt;</span><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, kotlin.collections.List((net.corda.finance.contracts.asset.PartyAndAmount((java.util.Currency)))), kotlin.collections.Set((net.corda.core.identity.AbstractParty)))/onlyFromParties">onlyFromParties</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-set/index.html"><span class="identifier">Set</span></a><span class="symbol">&lt;</span><a href="../../net.corda.core.identity/-abstract-party/index.html"><span class="identifier">AbstractParty</span></a><span class="symbol">&gt;</span>&nbsp;<span class="symbol">=</span>&nbsp;emptySet()<span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-pair/index.html"><span class="identifier">Pair</span></a><span class="symbol">&lt;</span><a href="../../net.corda.core.transactions/-transaction-builder/index.html"><span class="identifier">TransactionBuilder</span></a><span class="symbol">,</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html"><span class="identifier">List</span></a><span class="symbol">&lt;</span><a href="https://docs.oracle.com/javase/8/docs/api/java/security/PublicKey.html"><span class="identifier">PublicKey</span></a><span class="symbol">&gt;</span><span class="symbol">&gt;</span></code><br/>
<strong>Deprecated:</strong> Our identity should be specified<br/>
<br/>
<p>Generate a transaction that moves money of the given amounts to the recipients specified, and sends any change
back to sole identity of the calling node. Fails for nodes with multiple identities.</p>
<p>Note: an <a href="../../net.corda.core.contracts/-amount/index.html">Amount</a> of <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Currency.html">Currency</a> is only fungible for a given Issuer Party within a <a href="../../net.corda.core.contracts/-fungible-asset/index.html">FungibleAsset</a></p>
<h3>Parameters</h3>
<p><a name="services"></a>
<code>services</code> - The <a href="../../net.corda.core.node/-service-hub/index.html">ServiceHub</a> to provide access to the database session.</p>
<p><a name="tx"></a>
<code>tx</code> - A builder, which may contain inputs, outputs and commands already. The relevant components needed
    to move the cash will be added on top.</p>
<p><a name="payments"></a>
<code>payments</code> - A list of amounts to pay, and the party to send the payment to.</p>
<p><a name="onlyFromParties"></a>
<code>onlyFromParties</code> - if non-null, the asset states will be filtered to only include those issued by the set
    of given parties. This can be useful if the party you're trying to pay has expectations
    about which type of asset claims they are willing to accept.</p>
<h3>Exceptions</h3>
<p><a name="InsufficientBalanceException"></a>
<code>InsufficientBalanceException</code> - when a cash spending transaction fails because
    there is insufficient quantity for a given currency (and optionally set of Issuer Parties).</p>
<p><strong>Return</strong><br/>
A <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-pair/index.html">Pair</a> of the same transaction builder passed in as <a href="generate-spend.html#net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, kotlin.collections.List((net.corda.finance.contracts.asset.PartyAndAmount((java.util.Currency)))), kotlin.collections.Set((net.corda.core.identity.AbstractParty)))/tx">tx</a>, and the list of keys that need to sign
    the resulting transaction for it to be valid.</p>
<a name="net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, kotlin.collections.List((net.corda.finance.contracts.asset.PartyAndAmount((java.util.Currency)))), net.corda.core.identity.PartyAndCertificate, kotlin.collections.Set((net.corda.core.identity.AbstractParty)), kotlin.Boolean)"></a>
<code><span class="identifier">@JvmStatic</span> <span class="identifier">@JvmOverloads</span> <span class="identifier">@Suspendable</span> <span class="keyword">fun </span><span class="identifier">generateSpend</span><span class="symbol">(</span><span class="identifier" id="net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, kotlin.collections.List((net.corda.finance.contracts.asset.PartyAndAmount((java.util.Currency)))), net.corda.core.identity.PartyAndCertificate, kotlin.collections.Set((net.corda.core.identity.AbstractParty)), kotlin.Boolean)/services">services</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.node/-service-hub/index.html"><span class="identifier">ServiceHub</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, kotlin.collections.List((net.corda.finance.contracts.asset.PartyAndAmount((java.util.Currency)))), net.corda.core.identity.PartyAndCertificate, kotlin.collections.Set((net.corda.core.identity.AbstractParty)), kotlin.Boolean)/tx">tx</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.transactions/-transaction-builder/index.html"><span class="identifier">TransactionBuilder</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, kotlin.collections.List((net.corda.finance.contracts.asset.PartyAndAmount((java.util.Currency)))), net.corda.core.identity.PartyAndCertificate, kotlin.collections.Set((net.corda.core.identity.AbstractParty)), kotlin.Boolean)/payments">payments</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html"><span class="identifier">List</span></a><span class="symbol">&lt;</span><a href="../../net.corda.finance.contracts.asset/-party-and-amount/index.html"><span class="identifier">PartyAndAmount</span></a><span class="symbol">&lt;</span><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Currency.html"><span class="identifier">Currency</span></a><span class="symbol">&gt;</span><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, kotlin.collections.List((net.corda.finance.contracts.asset.PartyAndAmount((java.util.Currency)))), net.corda.core.identity.PartyAndCertificate, kotlin.collections.Set((net.corda.core.identity.AbstractParty)), kotlin.Boolean)/ourIdentity">ourIdentity</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.identity/-party-and-certificate/index.html"><span class="identifier">PartyAndCertificate</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, kotlin.collections.List((net.corda.finance.contracts.asset.PartyAndAmount((java.util.Currency)))), net.corda.core.identity.PartyAndCertificate, kotlin.collections.Set((net.corda.core.identity.AbstractParty)), kotlin.Boolean)/onlyFromParties">onlyFromParties</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-set/index.html"><span class="identifier">Set</span></a><span class="symbol">&lt;</span><a href="../../net.corda.core.identity/-abstract-party/index.html"><span class="identifier">AbstractParty</span></a><span class="symbol">&gt;</span>&nbsp;<span class="symbol">=</span>&nbsp;emptySet()<span class="symbol">, </span><span class="identifier" id="net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, kotlin.collections.List((net.corda.finance.contracts.asset.PartyAndAmount((java.util.Currency)))), net.corda.core.identity.PartyAndCertificate, kotlin.collections.Set((net.corda.core.identity.AbstractParty)), kotlin.Boolean)/anonymous">anonymous</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html"><span class="identifier">Boolean</span></a>&nbsp;<span class="symbol">=</span>&nbsp;true<span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-pair/index.html"><span class="identifier">Pair</span></a><span class="symbol">&lt;</span><a href="../../net.corda.core.transactions/-transaction-builder/index.html"><span class="identifier">TransactionBuilder</span></a><span class="symbol">,</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html"><span class="identifier">List</span></a><span class="symbol">&lt;</span><a href="https://docs.oracle.com/javase/8/docs/api/java/security/PublicKey.html"><span class="identifier">PublicKey</span></a><span class="symbol">&gt;</span><span class="symbol">&gt;</span></code>
<p>Generate a transaction that moves money of the given amounts to the recipients specified.</p>
<p>Note: an <a href="../../net.corda.core.contracts/-amount/index.html">Amount</a> of <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Currency.html">Currency</a> is only fungible for a given Issuer Party within a <a href="../../net.corda.core.contracts/-fungible-asset/index.html">FungibleAsset</a></p>
<h3>Parameters</h3>
<p><a name="services"></a>
<code>services</code> - The <a href="../../net.corda.core.node/-service-hub/index.html">ServiceHub</a> to provide access to the database session.</p>
<p><a name="tx"></a>
<code>tx</code> - A builder, which may contain inputs, outputs and commands already. The relevant components needed
    to move the cash will be added on top.</p>
<p><a name="payments"></a>
<code>payments</code> - A list of amounts to pay, and the party to send the payment to.</p>
<p><a name="ourIdentity"></a>
<code>ourIdentity</code> - ourIdentity is used to determine the where the change will be sent.
    If anonymous is true then an anonymous identity will be generated from this and the change
    will be spent to that, otherwise ourIdentity will be used as is.</p>
<p><a name="onlyFromParties"></a>
<code>onlyFromParties</code> - if non-null, the asset states will be filtered to only include those issued by the set
    of given parties. This can be useful if the party you're trying to pay has expectations
    about which type of asset claims they are willing to accept.</p>
<p><a name="anonymous"></a>
<code>anonymous</code> - whether or not to use CI to send the change to</p>
<h3>Exceptions</h3>
<p><a name="InsufficientBalanceException"></a>
<code>InsufficientBalanceException</code> - when a cash spending transaction fails because
    there is insufficient quantity for a given currency (and optionally set of Issuer Parties).</p>
<p><strong>Return</strong><br/>
A <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-pair/index.html">Pair</a> of the same transaction builder passed in as <a href="generate-spend.html#net.corda.finance.workflows.asset.CashUtils$generateSpend(net.corda.core.node.ServiceHub, net.corda.core.transactions.TransactionBuilder, kotlin.collections.List((net.corda.finance.contracts.asset.PartyAndAmount((java.util.Currency)))), net.corda.core.identity.PartyAndCertificate, kotlin.collections.Set((net.corda.core.identity.AbstractParty)), kotlin.Boolean)/tx">tx</a>, and the list of keys that need to sign
    the resulting transaction for it to be valid.</p>
</BODY>
</HTML>
