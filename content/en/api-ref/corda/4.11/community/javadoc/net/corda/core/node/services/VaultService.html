<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_322) on Thu Mar 23 19:32:33 UTC 2023 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>VaultService</title>
<meta name="date" content="2023-03-23">
<meta name="keywords" content="net.corda.core.node.services.VaultService interface">
<meta name="keywords" content="getRawUpdates()">
<meta name="keywords" content="getUpdates()">
<meta name="keywords" content="whenConsumed()">
<meta name="keywords" content="addNoteToTransaction()">
<meta name="keywords" content="getTransactionNotes()">
<meta name="keywords" content="softLockReserve()">
<meta name="keywords" content="softLockRelease()">
<meta name="keywords" content="tryLockFungibleStatesForSpending()">
<meta name="keywords" content="_queryBy()">
<meta name="keywords" content="_trackBy()">
<meta name="keywords" content="queryBy()">
<meta name="keywords" content="trackBy()">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="VaultService";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../net/corda/core/node/services/VaultQueryException.html" title="class in net.corda.core.node.services"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../net/corda/core/node/services/VaultServiceKt.html" title="class in net.corda.core.node.services"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?net/corda/core/node/services/VaultService.html" target="_top">Frames</a></li>
<li><a href="VaultService.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">net.corda.core.node.services</div>
<h2 title="Interface VaultService" class="title">Interface VaultService</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre><a href="../../../../../net/corda/core/DoNotImplement.html" title="annotation in net.corda.core">@DoNotImplement</a>
public <span class="typeNameLabel">VaultService</span></pre>
<div class="block"><p><p>A <a href="../../../../../net/corda/core/node/services/VaultService.html" title="interface in net.corda.core.node.services"><code>interface VaultService</code></a> is responsible for securely and safely persisting the current state of a vault to storage. The
vault service vends immutable snapshots of the current vault for working with: if you build a transaction based
on a vault that isn't current, be aware that it may end up being invalid if the states that were used have been
consumed by someone else first!</p></p><p><p><p>Note that transactions we've seen are held by the storage service, not the vault.</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../net/corda/core/node/services/VaultService.html" title="interface in net.corda.core.node.services"><code>interface VaultService</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="VaultService--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>VaultService</h4>
<pre>public&nbsp;VaultService()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getRawUpdates--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRawUpdates</h4>
<pre>@NotNull
rx.Observable&lt;net.corda.core.node.services.Vault.Update&gt;&nbsp;getRawUpdates()</pre>
<div class="block"><p><p>Prefer the use of <a href="../../../../../net/corda/core/node/services/VaultService.html#getUpdates--"><code>updates</code></a> unless you know why you want to use this instead.</p></p><p><p><p>Get a synchronous Observable of updates.  When observations are pushed to the Observer, the <a href="../../../../../net/corda/core/node/services/Vault.html" title="class in net.corda.core.node.services"><code>class Vault</code></a> will already
incorporate the update, and the database transaction associated with the update will still be open and current.
If for some reason the processing crosses outside of the database transaction (for example, the update is pushed
outside the current JVM or across to another <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html">Thread</a>, which is executing in a different database transaction),
then the <a href="../../../../../net/corda/core/node/services/Vault.html" title="class in net.corda.core.node.services"><code>class Vault</code></a> may not incorporate the update due to racing with committing the current database transaction.</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../net/corda/core/node/services/VaultService.html#getUpdates--"><code>updates</code></a>, 
<a href="../../../../../net/corda/core/node/services/Vault.html" title="class in net.corda.core.node.services"><code>class Vault</code></a>, 
<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html">Thread</a>, 
<a href="../../../../../net/corda/core/node/services/Vault.html" title="class in net.corda.core.node.services"><code>class Vault</code></a></dd>
</dl>
</li>
</ul>
<a name="getUpdates--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUpdates</h4>
<pre>@NotNull
rx.Observable&lt;net.corda.core.node.services.Vault.Update&gt;&nbsp;getUpdates()</pre>
<div class="block"><p><p>Get a synchronous Observable of updates.  When observations are pushed to the Observer, the <a href="../../../../../net/corda/core/node/services/Vault.html" title="class in net.corda.core.node.services"><code>class Vault</code></a> will
already incorporate the update and the database transaction associated with the update will have been committed
and closed.</p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../net/corda/core/node/services/Vault.html" title="class in net.corda.core.node.services"><code>class Vault</code></a></dd>
</dl>
</li>
</ul>
<a name="whenConsumed-ref-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>whenConsumed</h4>
<pre>@NotNull
<a href="../../../../../net/corda/core/concurrent/CordaFuture.html" title="type parameter in CordaFuture">CordaFuture</a>&lt;net.corda.core.node.services.Vault.Update&gt;&nbsp;whenConsumed(@NotNull
                                                                             <a href="../../../../../net/corda/core/contracts/StateRef.html" title="type parameter in StateRef">StateRef</a>&nbsp;ref)</pre>
<div class="block"><p><p>Provide a <a href="../../../../../net/corda/core/concurrent/CordaFuture.html" title="interface in net.corda.core.concurrent"><code>interface CordaFuture</code></a> for when a <a href="../../../../../net/corda/core/contracts/StateRef.html" title="class in net.corda.core.contracts"><code>class StateRef</code></a> is consumed, which can be very useful in building tests.</p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../net/corda/core/concurrent/CordaFuture.html" title="interface in net.corda.core.concurrent"><code>interface CordaFuture</code></a>, 
<a href="../../../../../net/corda/core/contracts/StateRef.html" title="class in net.corda.core.contracts"><code>class StateRef</code></a></dd>
</dl>
</li>
</ul>
<a name="addNoteToTransaction-txnId-noteText-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addNoteToTransaction</h4>
<pre>void&nbsp;addNoteToTransaction(@NotNull
                          <a href="../../../../../net/corda/core/crypto/SecureHash.html" title="type parameter in SecureHash">SecureHash</a>&nbsp;txnId,
                          @NotNull
                          java.lang.String&nbsp;noteText)</pre>
<div class="block"><p><p>Add a note to an existing <a href="../../../../../net/corda/core/transactions/LedgerTransaction.html" title="class in net.corda.core.transactions"><code>class LedgerTransaction</code></a> given by its unique <a href="../../../../../net/corda/core/crypto/SecureHash.html" title="class in net.corda.core.crypto"><code>class SecureHash</code></a> id.
Multiple notes may be attached to the same <a href="../../../../../net/corda/core/transactions/LedgerTransaction.html" title="class in net.corda.core.transactions"><code>class LedgerTransaction</code></a>.
These are additively and immutably persisted within the node local vault database in a single textual field.
using a semi-colon separator.</p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../net/corda/core/transactions/LedgerTransaction.html" title="class in net.corda.core.transactions"><code>class LedgerTransaction</code></a>, 
<a href="../../../../../net/corda/core/crypto/SecureHash.html" title="class in net.corda.core.crypto"><code>class SecureHash</code></a>, 
<a href="../../../../../net/corda/core/transactions/LedgerTransaction.html" title="class in net.corda.core.transactions"><code>class LedgerTransaction</code></a></dd>
</dl>
</li>
</ul>
<a name="getTransactionNotes-txnId-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTransactionNotes</h4>
<pre>@NotNull
java.lang.Iterable&lt;java.lang.String&gt;&nbsp;getTransactionNotes(@NotNull
                                                                  <a href="../../../../../net/corda/core/crypto/SecureHash.html" title="type parameter in SecureHash">SecureHash</a>&nbsp;txnId)</pre>
</li>
</ul>
<a name="softLockReserve-lockId-stateRefs-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>softLockReserve</h4>
<pre>void&nbsp;softLockReserve(@NotNull
                     java.util.UUID&nbsp;lockId,
                     @NotNull
                     <a href="../../../../../net/corda/core/utilities/NonEmptySet.html" title="type parameter in NonEmptySet">NonEmptySet</a>&lt;net.corda.core.contracts.StateRef&gt;&nbsp;stateRefs)</pre>
<div class="block"><p><p>Reserve a set of <a href="../../../../../net/corda/core/contracts/StateRef.html" title="class in net.corda.core.contracts"><code>class StateRef</code></a> for a given <a href="https://docs.oracle.com/javase/8/docs/api/java/util/UUID.html">UUID</a> unique identifier.
Typically, the unique identifier will refer to a <a href="../../../../../net/corda/core/flows/FlowLogic.html#getRunId--"><code>FlowLogic.runId</code></a>'s <a href="https://docs.oracle.com/javase/8/docs/api/java/util/UUID.html">UUID</a> associated with an in-flight flow.
In this case if the flow terminates the locks will automatically be freed, even if there is an error.
However, the user can specify their own <a href="https://docs.oracle.com/javase/8/docs/api/java/util/UUID.html">UUID</a> and manage this manually, possibly across the lifetime of multiple
flows, or from other thread contexts e.g. <a href="../../../../../net/corda/core/node/services/CordaService.html" title="annotation in net.corda.core.node.services"><code>annotationclass CordaService</code></a> instances.
In the case of coin selection, soft locks are automatically taken upon gathering relevant unconsumed input refs.</p></p></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StatesNotAvailableException</code> - when not possible to soft-lock all of requested <a href="../../../../../net/corda/core/contracts/StateRef.html" title="class in net.corda.core.contracts"><code>class StateRef</code></a>.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../net/corda/core/contracts/StateRef.html" title="class in net.corda.core.contracts"><code>class StateRef</code></a>, 
<a href="https://docs.oracle.com/javase/8/docs/api/java/util/UUID.html">UUID</a>, 
<a href="../../../../../net/corda/core/flows/FlowLogic.html#getRunId--"><code>FlowLogic.runId</code></a>, 
<a href="https://docs.oracle.com/javase/8/docs/api/java/util/UUID.html">UUID</a>, 
<a href="https://docs.oracle.com/javase/8/docs/api/java/util/UUID.html">UUID</a>, 
<a href="../../../../../net/corda/core/node/services/CordaService.html" title="annotation in net.corda.core.node.services"><code>annotationclass CordaService</code></a></dd>
</dl>
</li>
</ul>
<a name="softLockRelease-lockId-stateRefs-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>softLockRelease</h4>
<pre>void&nbsp;softLockRelease(@NotNull
                     java.util.UUID&nbsp;lockId,
                     @Nullable
                     <a href="../../../../../net/corda/core/utilities/NonEmptySet.html" title="type parameter in NonEmptySet">NonEmptySet</a>&lt;net.corda.core.contracts.StateRef&gt;&nbsp;stateRefs)</pre>
<div class="block"><p><p>Release all or an explicitly specified set of <a href="../../../../../net/corda/core/contracts/StateRef.html" title="class in net.corda.core.contracts"><code>class StateRef</code></a> for a given <a href="https://docs.oracle.com/javase/8/docs/api/java/util/UUID.html">UUID</a> unique identifier.
A <a href="../../../../../net/corda/core/node/services/Vault.html" title="class in net.corda.core.node.services"><code>class Vault</code></a> soft-lock manager is automatically notified from flows that are terminated, such that any soft locked
states may be released.
In the case of coin selection, soft-locks are automatically released once previously gathered unconsumed
input refs are consumed as part of cash spending.</p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../net/corda/core/contracts/StateRef.html" title="class in net.corda.core.contracts"><code>class StateRef</code></a>, 
<a href="https://docs.oracle.com/javase/8/docs/api/java/util/UUID.html">UUID</a>, 
<a href="../../../../../net/corda/core/node/services/Vault.html" title="class in net.corda.core.node.services"><code>class Vault</code></a></dd>
</dl>
</li>
</ul>
<a name="tryLockFungibleStatesForSpending-lockId-eligibleStatesQuery-amount-contractStateType-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryLockFungibleStatesForSpending</h4>
<pre>@Suspendable
 @NotNull
&lt;T extends <a href="../../../../../net/corda/core/contracts/FungibleState.html" title="type parameter in FungibleState">FungibleState</a>&lt;?&gt;&gt;&nbsp;java.util.List&lt;net.corda.core.contracts.StateAndRef&gt;&nbsp;tryLockFungibleStatesForSpending(@NotNull
                                                                                                                                          java.util.UUID&nbsp;lockId,
                                                                                                                                          @NotNull
                                                                                                                                          <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;eligibleStatesQuery,
                                                                                                                                          @NotNull
                                                                                                                                          <a href="../../../../../net/corda/core/contracts/Amount.html" title="type parameter in Amount">Amount</a>&lt;?&gt;&nbsp;amount,
                                                                                                                                          @NotNull
                                                                                                                                          java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType)</pre>
<div class="block"><p><p>Helper function to determine spendable states and soft locking them.
Currently performance will be worse than for the hand optimised version in
<a href="#">Cash.unconsumedCashStatesForSpending</a>. However, this is fully generic and can operate with custom <a href="../../../../../net/corda/core/contracts/FungibleState.html" title="interface in net.corda.core.contracts"><code>interface FungibleState</code></a>
and <a href="../../../../../net/corda/core/contracts/FungibleAsset.html" title="interface in net.corda.core.contracts"><code>interface FungibleAsset</code></a> states.</p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>lockId</code> - The <a href="../../../../../net/corda/core/flows/FlowLogic.html#getRunId--"><code>FlowLogic.runId</code></a>'s <a href="https://docs.oracle.com/javase/8/docs/api/java/util/UUID.html">UUID</a> of the current flow used to soft lock the states.</dd>
<dd><code>eligibleStatesQuery</code> - A custom query object that selects down to the appropriate subset of all states of the<a href="../../../../../net/corda/core/node/services/VaultService.html#tryLockFungibleStatesForSpending-lockId-eligibleStatesQuery-amount-contractStateType-"><code>contractStateType</code></a>. e.g. by selecting on account, issuer, etc. The query is internally augmented with theStateStatus.UNCONSUMED, soft lock and contract type requirements.</dd>
<dd><code>amount</code> - The required amount of the asset. It is assumed that compatible issuer states will be filtered outby the <a href="../../../../../net/corda/core/node/services/VaultService.html#tryLockFungibleStatesForSpending-lockId-eligibleStatesQuery-amount-contractStateType-"><code>eligibleStatesQuery</code></a>. This method accepts both Amount<Issued<<em>>> and Amount<</em>>. Amount<Issued<<em>>> isautomatically unwrapped to Amount<</em>>.</dd>
<dd><code>contractStateType</code> - class type of the result set.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns a locked subset of the <a href="../../../../../net/corda/core/node/services/VaultService.html#tryLockFungibleStatesForSpending-lockId-eligibleStatesQuery-amount-contractStateType-"><code>eligibleStatesQuery</code></a> sufficient to satisfy the requested amount,
or else an empty list and no change in the stored lock states when their are insufficient resources available.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#">Cash.unconsumedCashStatesForSpending</a>, 
<a href="../../../../../net/corda/core/contracts/FungibleState.html" title="interface in net.corda.core.contracts"><code>interface FungibleState</code></a>, 
<a href="../../../../../net/corda/core/contracts/FungibleAsset.html" title="interface in net.corda.core.contracts"><code>interface FungibleAsset</code></a></dd>
</dl>
</li>
</ul>
<a name="Z:Z_queryBy-criteria-paging-sorting-contractStateType-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_queryBy</h4>
<pre>@NotNull
&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;&nbsp;net.corda.core.node.services.Vault.Page&lt;T&gt;&nbsp;_queryBy(@NotNull
                                                                                       <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria,
                                                                                       @NotNull
                                                                                       <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="type parameter in PageSpecification">PageSpecification</a>&nbsp;paging,
                                                                                       @NotNull
                                                                                       <a href="../../../../../net/corda/core/node/services/vault/Sort.html" title="type parameter in Sort">Sort</a>&nbsp;sorting,
                                                                                       @NotNull
                                                                                       java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType)</pre>
<div class="block"><p><p>Generic vault query function which takes a <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="class in net.corda.core.node.services.vault"><code>class QueryCriteria</code></a> object to define filters,
optional <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="class in net.corda.core.node.services.vault"><code>class PageSpecification</code></a> and optional <a href="../../../../../net/corda/core/node/services/vault/Sort.html" title="class in net.corda.core.node.services.vault"><code>class Sort</code></a> modification criteria (default unsorted),
and returns a <a href="../../../../../net/corda/core/node/services/Vault.Page.html" title="class in net.corda.core.node.services"><code>class Vault.Page</code></a> object containing the following:</p></p><p><p><ol><li><p>states as a List of  (page number and size defined by <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="class in net.corda.core.node.services.vault"><code>class PageSpecification</code></a>)</p></li><li><p>states metadata as a List of <a href="../../../../../net/corda/core/node/services/Vault.StateMetadata.html" title="class in net.corda.core.node.services"><code>class Vault.StateMetadata</code></a> held in the Vault States table.</p></li><li><p>total number of results available if <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="class in net.corda.core.node.services.vault"><code>class PageSpecification</code></a> supplied (otherwise returns -1).</p></li><li><p>status types used in this query: StateStatus.UNCONSUMED, StateStatus.CONSUMED, StateStatus.ALL.</p></li><li><p>other results (aggregate functions with/without using value groups).</p></li></ol></p></p></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>VaultQueryException</code> - <p>if the query cannot be executed for any reason
    (missing criteria or parsing error, paging errors, unsupported query, underlying database error).</p>

<p>Notes
If no <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="class in net.corda.core.node.services.vault"><code>class PageSpecification</code></a> is provided, a maximum of DEFAULT_PAGE_SIZE results will be returned.
API users must specify a <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="class in net.corda.core.node.services.vault"><code>class PageSpecification</code></a> if they are expecting more than DEFAULT_PAGE_SIZE results,
otherwise a <a href="../../../../../net/corda/core/node/services/VaultQueryException.html" title="class in net.corda.core.node.services"><code>exception VaultQueryException</code></a> will be thrown alerting to this condition.
It is the responsibility of the API user to request further pages and/or specify a more suitable <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="class in net.corda.core.node.services.vault"><code>class PageSpecification</code></a>.</p></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="class in net.corda.core.node.services.vault"><code>class QueryCriteria</code></a>, 
<a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="class in net.corda.core.node.services.vault"><code>class PageSpecification</code></a>, 
<a href="../../../../../net/corda/core/node/services/vault/Sort.html" title="class in net.corda.core.node.services.vault"><code>class Sort</code></a>, 
<a href="../../../../../net/corda/core/node/services/Vault.Page.html" title="class in net.corda.core.node.services"><code>class Vault.Page</code></a>, 
<a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="class in net.corda.core.node.services.vault"><code>class PageSpecification</code></a>, 
<a href="../../../../../net/corda/core/node/services/Vault.StateMetadata.html" title="class in net.corda.core.node.services"><code>class Vault.StateMetadata</code></a>, 
<a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="class in net.corda.core.node.services.vault"><code>class PageSpecification</code></a></dd>
</dl>
</li>
</ul>
<a name="Z:Z_trackBy-criteria-paging-sorting-contractStateType-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_trackBy</h4>
<pre>@NotNull
&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;&nbsp;<a href="../../../../../net/corda/core/messaging/DataFeed.html" title="type parameter in DataFeed">DataFeed</a>&lt;net.corda.core.node.services.Vault.Page,net.corda.core.node.services.Vault.Update&gt;&nbsp;_trackBy(@NotNull
                                                                                                                                        <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria,
                                                                                                                                        @NotNull
                                                                                                                                        <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="type parameter in PageSpecification">PageSpecification</a>&nbsp;paging,
                                                                                                                                        @NotNull
                                                                                                                                        <a href="../../../../../net/corda/core/node/services/vault/Sort.html" title="type parameter in Sort">Sort</a>&nbsp;sorting,
                                                                                                                                        @NotNull
                                                                                                                                        java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType)</pre>
<div class="block"><p><p>Generic vault query function which takes a <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="class in net.corda.core.node.services.vault"><code>class QueryCriteria</code></a> object to define filters,
optional <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="class in net.corda.core.node.services.vault"><code>class PageSpecification</code></a> and optional <a href="../../../../../net/corda/core/node/services/vault/Sort.html" title="class in net.corda.core.node.services.vault"><code>class Sort</code></a> modification criteria (default unsorted),
and returns a <a href="../../../../../net/corda/core/messaging/DataFeed.html" title="class in net.corda.core.messaging"><code>class DataFeed</code></a> object containing:</p></p><p><p><ol><li><p>a snapshot as a <a href="../../../../../net/corda/core/node/services/Vault.Page.html" title="class in net.corda.core.node.services"><code>class Vault.Page</code></a> (described previously in <a href="../../../../../net/corda/core/node/services/VaultService.html#queryBy-contractStateType-"><code>queryBy</code></a>).</p></li><li><p>an Observable of <a href="../../../../../net/corda/core/node/services/Vault.Update.html" title="class in net.corda.core.node.services"><code>class Vault.Update</code></a>.</p></li></ol></p></p></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>VaultQueryException</code> - <p>if the query cannot be executed for any reason.</p>

<p>Notes:
    - The snapshot part of the query adheres to the same behaviour as the <a href="../../../../../net/corda/core/node/services/VaultService.html#queryBy-contractStateType-"><code>queryBy</code></a> function.
    - The update part of the query currently only supports query criteria filtering by contract
      type(s) and state status(es). CID-731 <> proposes
      adding the complete set of <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="class in net.corda.core.node.services.vault"><code>class QueryCriteria</code></a> filtering.</p></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="class in net.corda.core.node.services.vault"><code>class QueryCriteria</code></a>, 
<a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="class in net.corda.core.node.services.vault"><code>class PageSpecification</code></a>, 
<a href="../../../../../net/corda/core/node/services/vault/Sort.html" title="class in net.corda.core.node.services.vault"><code>class Sort</code></a>, 
<a href="../../../../../net/corda/core/messaging/DataFeed.html" title="class in net.corda.core.messaging"><code>class DataFeed</code></a>, 
<a href="../../../../../net/corda/core/node/services/Vault.Page.html" title="class in net.corda.core.node.services"><code>class Vault.Page</code></a>, 
<a href="../../../../../net/corda/core/node/services/VaultService.html#queryBy-contractStateType-"><code>queryBy</code></a>, 
<a href="../../../../../net/corda/core/node/services/Vault.Update.html" title="class in net.corda.core.node.services"><code>class Vault.Update</code></a></dd>
</dl>
</li>
</ul>
<a name="queryBy-contractStateType-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>queryBy</h4>
<pre>@NotNull
&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;&nbsp;net.corda.core.node.services.Vault.Page&lt;T&gt;&nbsp;queryBy(@NotNull
                                                                                      java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType)</pre>
</li>
</ul>
<a name="queryBy-contractStateType-criteria-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>queryBy</h4>
<pre>@NotNull
&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;&nbsp;net.corda.core.node.services.Vault.Page&lt;T&gt;&nbsp;queryBy(@NotNull
                                                                                      java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
                                                                                      @NotNull
                                                                                      <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria)</pre>
</li>
</ul>
<a name="queryBy-contractStateType-paging-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>queryBy</h4>
<pre>@NotNull
&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;&nbsp;net.corda.core.node.services.Vault.Page&lt;T&gt;&nbsp;queryBy(@NotNull
                                                                                      java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
                                                                                      @NotNull
                                                                                      <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="type parameter in PageSpecification">PageSpecification</a>&nbsp;paging)</pre>
</li>
</ul>
<a name="queryBy-contractStateType-criteria-paging-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>queryBy</h4>
<pre>@NotNull
&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;&nbsp;net.corda.core.node.services.Vault.Page&lt;T&gt;&nbsp;queryBy(@NotNull
                                                                                      java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
                                                                                      @NotNull
                                                                                      <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria,
                                                                                      @NotNull
                                                                                      <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="type parameter in PageSpecification">PageSpecification</a>&nbsp;paging)</pre>
</li>
</ul>
<a name="queryBy-contractStateType-criteria-sorting-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>queryBy</h4>
<pre>@NotNull
&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;&nbsp;net.corda.core.node.services.Vault.Page&lt;T&gt;&nbsp;queryBy(@NotNull
                                                                                      java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
                                                                                      @NotNull
                                                                                      <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria,
                                                                                      @NotNull
                                                                                      <a href="../../../../../net/corda/core/node/services/vault/Sort.html" title="type parameter in Sort">Sort</a>&nbsp;sorting)</pre>
</li>
</ul>
<a name="queryBy-contractStateType-criteria-paging-sorting-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>queryBy</h4>
<pre>@NotNull
&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;&nbsp;net.corda.core.node.services.Vault.Page&lt;T&gt;&nbsp;queryBy(@NotNull
                                                                                      java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
                                                                                      @NotNull
                                                                                      <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria,
                                                                                      @NotNull
                                                                                      <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="type parameter in PageSpecification">PageSpecification</a>&nbsp;paging,
                                                                                      @NotNull
                                                                                      <a href="../../../../../net/corda/core/node/services/vault/Sort.html" title="type parameter in Sort">Sort</a>&nbsp;sorting)</pre>
</li>
</ul>
<a name="trackBy-contractStateType-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>trackBy</h4>
<pre>@NotNull
&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;&nbsp;<a href="../../../../../net/corda/core/messaging/DataFeed.html" title="type parameter in DataFeed">DataFeed</a>&lt;net.corda.core.node.services.Vault.Page,net.corda.core.node.services.Vault.Update&gt;&nbsp;trackBy(@NotNull
                                                                                                                                       java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType)</pre>
</li>
</ul>
<a name="trackBy-contractStateType-criteria-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>trackBy</h4>
<pre>@NotNull
&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;&nbsp;<a href="../../../../../net/corda/core/messaging/DataFeed.html" title="type parameter in DataFeed">DataFeed</a>&lt;net.corda.core.node.services.Vault.Page,net.corda.core.node.services.Vault.Update&gt;&nbsp;trackBy(@NotNull
                                                                                                                                       java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
                                                                                                                                       @NotNull
                                                                                                                                       <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria)</pre>
</li>
</ul>
<a name="trackBy-contractStateType-paging-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>trackBy</h4>
<pre>@NotNull
&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;&nbsp;<a href="../../../../../net/corda/core/messaging/DataFeed.html" title="type parameter in DataFeed">DataFeed</a>&lt;net.corda.core.node.services.Vault.Page,net.corda.core.node.services.Vault.Update&gt;&nbsp;trackBy(@NotNull
                                                                                                                                       java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
                                                                                                                                       @NotNull
                                                                                                                                       <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="type parameter in PageSpecification">PageSpecification</a>&nbsp;paging)</pre>
</li>
</ul>
<a name="trackBy-contractStateType-criteria-paging-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>trackBy</h4>
<pre>@NotNull
&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;&nbsp;<a href="../../../../../net/corda/core/messaging/DataFeed.html" title="type parameter in DataFeed">DataFeed</a>&lt;net.corda.core.node.services.Vault.Page,net.corda.core.node.services.Vault.Update&gt;&nbsp;trackBy(@NotNull
                                                                                                                                       java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
                                                                                                                                       @NotNull
                                                                                                                                       <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria,
                                                                                                                                       @NotNull
                                                                                                                                       <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="type parameter in PageSpecification">PageSpecification</a>&nbsp;paging)</pre>
</li>
</ul>
<a name="trackBy-contractStateType-criteria-sorting-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>trackBy</h4>
<pre>@NotNull
&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;&nbsp;<a href="../../../../../net/corda/core/messaging/DataFeed.html" title="type parameter in DataFeed">DataFeed</a>&lt;net.corda.core.node.services.Vault.Page,net.corda.core.node.services.Vault.Update&gt;&nbsp;trackBy(@NotNull
                                                                                                                                       java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
                                                                                                                                       @NotNull
                                                                                                                                       <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria,
                                                                                                                                       @NotNull
                                                                                                                                       <a href="../../../../../net/corda/core/node/services/vault/Sort.html" title="type parameter in Sort">Sort</a>&nbsp;sorting)</pre>
</li>
</ul>
<a name="trackBy-contractStateType-criteria-paging-sorting-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>trackBy</h4>
<pre>@NotNull
&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;&nbsp;<a href="../../../../../net/corda/core/messaging/DataFeed.html" title="type parameter in DataFeed">DataFeed</a>&lt;net.corda.core.node.services.Vault.Page,net.corda.core.node.services.Vault.Update&gt;&nbsp;trackBy(@NotNull
                                                                                                                                       java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
                                                                                                                                       @NotNull
                                                                                                                                       <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria,
                                                                                                                                       @NotNull
                                                                                                                                       <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="type parameter in PageSpecification">PageSpecification</a>&nbsp;paging,
                                                                                                                                       @NotNull
                                                                                                                                       <a href="../../../../../net/corda/core/node/services/vault/Sort.html" title="type parameter in Sort">Sort</a>&nbsp;sorting)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../net/corda/core/node/services/VaultQueryException.html" title="class in net.corda.core.node.services"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../net/corda/core/node/services/VaultServiceKt.html" title="class in net.corda.core.node.services"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?net/corda/core/node/services/VaultService.html" target="_top">Frames</a></li>
<li><a href="VaultService.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
