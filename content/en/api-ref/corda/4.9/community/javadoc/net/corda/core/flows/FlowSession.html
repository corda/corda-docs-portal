<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_242) on Tue Nov 29 14:35:32 UTC 2022 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>FlowSession</title>
<meta name="date" content="2022-11-29">
<meta name="keywords" content="net.corda.core.flows.FlowSession class">
<meta name="keywords" content="getDestination()">
<meta name="keywords" content="getCounterparty()">
<meta name="keywords" content="getCounterpartyFlowInfo()">
<meta name="keywords" content="sendAndReceive()">
<meta name="keywords" content="receive()">
<meta name="keywords" content="send()">
<meta name="keywords" content="close()">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="FlowSession";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../net/corda/core/flows/FlowLogicRefFactory.html" title="interface in net.corda.core.flows"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../net/corda/core/flows/FlowStackSnapshot.html" title="class in net.corda.core.flows"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?net/corda/core/flows/FlowSession.html" target="_top">Frames</a></li>
<li><a href="FlowSession.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">net.corda.core.flows</div>
<h2 title="Class FlowSession" class="title">Class FlowSession</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>net.corda.core.flows.FlowSession</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre><a href="../../../../net/corda/core/DoNotImplement.html" title="annotation in net.corda.core">@DoNotImplement</a>
public class <span class="typeNameLabel">FlowSession</span></pre>
<div class="block"><p><p>A <a href="../../../../net/corda/core/flows/FlowSession.html" title="class in net.corda.core.flows"><code>class FlowSession</code></a> is a handle on a communication sequence between two paired flows, possibly running on separate nodes.
It is used to send and receive messages between the flows as well as to query information about the counter-flow.</p></p><p><p><p>There are two ways of obtaining such a session:</p><ol><li><p>Calling <a href="../../../../net/corda/core/flows/FlowLogic.html#initiateFlow-destination-"><code>FlowLogic.initiateFlow</code></a>. This will create a <a href="../../../../net/corda/core/flows/FlowSession.html" title="class in net.corda.core.flows"><code>class FlowSession</code></a> object on which the first send/receive
operation will attempt to kick off a corresponding <a href="../../../../net/corda/core/flows/InitiatedBy.html" title="annotation in net.corda.core.flows"><code>annotationclass InitiatedBy</code></a> flow on the counterparty's node.</p></li><li><p>As constructor parameter to <a href="../../../../net/corda/core/flows/InitiatedBy.html" title="annotation in net.corda.core.flows"><code>annotationclass InitiatedBy</code></a> flows. This session is the one corresponding to the initiating flow and
may be used for replies.</p></li></ol><p>To port flows using the old Party-based API:</p><p>Look for <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-deprecated/index.html">Deprecated</a> usages of send/receive/sendAndReceive/getFlowInfo.</p><p>If it's an InitiatingFlow:</p><p>Look for the send/receive that kicks off the counter flow. Insert a</p><code><pre>    val session = initiateFlow(party)</pre></code><p>and use this session afterwards for send/receives.
For example:
    send(party, something)
will become
    session.send(something)</p><p>If it's an InitiatedBy flow:</p><p>Change the constructor to take an otherSideSession: FlowSession instead of a counterparty: Party
Then look for usages of the deprecated functions and change them to use the FlowSession
For example:
    send(counterparty, something)
will become
    otherSideSession.send(something)</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowSession.html" title="class in net.corda.core.flows"><code>class FlowSession</code></a>, 
<a href="../../../../net/corda/core/flows/FlowLogic.html#initiateFlow-destination-"><code>FlowLogic.initiateFlow</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html" title="class in net.corda.core.flows"><code>class FlowSession</code></a>, 
<a href="../../../../net/corda/core/flows/InitiatedBy.html" title="annotation in net.corda.core.flows"><code>annotationclass InitiatedBy</code></a>, 
<a href="../../../../net/corda/core/flows/InitiatedBy.html" title="annotation in net.corda.core.flows"><code>annotationclass InitiatedBy</code></a>, 
<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-deprecated/index.html">Deprecated</a></dd>
</dl>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="FlowSession--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>FlowSession</h4>
<pre>public&nbsp;FlowSession()</pre>
<div class="block"><p><p>A <a href="../../../../net/corda/core/flows/FlowSession.html" title="class in net.corda.core.flows"><code>class FlowSession</code></a> is a handle on a communication sequence between two paired flows, possibly running on separate nodes.
It is used to send and receive messages between the flows as well as to query information about the counter-flow.</p></p><p><p><p>There are two ways of obtaining such a session:</p><ol><li><p>Calling <a href="../../../../net/corda/core/flows/FlowLogic.html#initiateFlow-destination-"><code>FlowLogic.initiateFlow</code></a>. This will create a <a href="../../../../net/corda/core/flows/FlowSession.html" title="class in net.corda.core.flows"><code>class FlowSession</code></a> object on which the first send/receive
operation will attempt to kick off a corresponding <a href="../../../../net/corda/core/flows/InitiatedBy.html" title="annotation in net.corda.core.flows"><code>annotationclass InitiatedBy</code></a> flow on the counterparty's node.</p></li><li><p>As constructor parameter to <a href="../../../../net/corda/core/flows/InitiatedBy.html" title="annotation in net.corda.core.flows"><code>annotationclass InitiatedBy</code></a> flows. This session is the one corresponding to the initiating flow and
may be used for replies.</p></li></ol><p>To port flows using the old Party-based API:</p><p>Look for <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-deprecated/index.html">Deprecated</a> usages of send/receive/sendAndReceive/getFlowInfo.</p><p>If it's an InitiatingFlow:</p><p>Look for the send/receive that kicks off the counter flow. Insert a</p><code><pre>    val session = initiateFlow(party)</pre></code><p>and use this session afterwards for send/receives.
For example:
    send(party, something)
will become
    session.send(something)</p><p>If it's an InitiatedBy flow:</p><p>Change the constructor to take an otherSideSession: FlowSession instead of a counterparty: Party
Then look for usages of the deprecated functions and change them to use the FlowSession
For example:
    send(counterparty, something)
will become
    otherSideSession.send(something)</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowSession.html" title="class in net.corda.core.flows"><code>class FlowSession</code></a>, 
<a href="../../../../net/corda/core/flows/FlowLogic.html#initiateFlow-destination-"><code>FlowLogic.initiateFlow</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html" title="class in net.corda.core.flows"><code>class FlowSession</code></a>, 
<a href="../../../../net/corda/core/flows/InitiatedBy.html" title="annotation in net.corda.core.flows"><code>annotationclass InitiatedBy</code></a>, 
<a href="../../../../net/corda/core/flows/InitiatedBy.html" title="annotation in net.corda.core.flows"><code>annotationclass InitiatedBy</code></a>, 
<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-deprecated/index.html">Deprecated</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getDestination--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDestination</h4>
<pre>@NotNull
public&nbsp;<a href="../../../../net/corda/core/flows/Destination.html" title="type parameter in Destination">Destination</a>&nbsp;getDestination()</pre>
<div class="block"><p><p>The <a href="../../../../net/corda/core/flows/Destination.html" title="interface in net.corda.core.flows"><code>interface Destination</code></a> on the other side of this session. In the case of a session created by <a href="../../../../net/corda/core/flows/FlowLogic.html#initiateFlow-destination-"><code>FlowLogic.initiateFlow</code></a> this is the same
destination as the one passed to that function.</p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/Destination.html" title="interface in net.corda.core.flows"><code>interface Destination</code></a>, 
<a href="../../../../net/corda/core/flows/FlowLogic.html#initiateFlow-destination-"><code>FlowLogic.initiateFlow</code></a></dd>
</dl>
</li>
</ul>
<a name="getCounterparty--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCounterparty</h4>
<pre>@NotNull
public&nbsp;<a href="../../../../net/corda/core/identity/Party.html" title="type parameter in Party">Party</a>&nbsp;getCounterparty()</pre>
<div class="block"><p><p>If the destination on the other side of this session is a <a href="../../../../net/corda/core/identity/Party.html" title="class in net.corda.core.identity"><code>class Party</code></a> then returns that, otherwise throws <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-illegal-state-exception/index.html">IllegalStateException</a>.</p></p><p><p><p>Only use this method if it's known the other side is a <a href="../../../../net/corda/core/identity/Party.html" title="class in net.corda.core.identity"><code>class Party</code></a>, otherwise use <a href="../../../../net/corda/core/flows/FlowSession.html#getDestination--"><code>destination</code></a>.</p></p></p></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>IllegalStateException</code> - if the other side is not a <a href="../../../../net/corda/core/identity/Party.html" title="class in net.corda.core.identity"><code>class Party</code></a>.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/identity/Party.html" title="class in net.corda.core.identity"><code>class Party</code></a>, 
<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-illegal-state-exception/index.html">IllegalStateException</a>, 
<a href="../../../../net/corda/core/identity/Party.html" title="class in net.corda.core.identity"><code>class Party</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html#getDestination--"><code>destination</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html#getDestination--"><code>destination</code></a></dd>
</dl>
</li>
</ul>
<a name="getCounterpartyFlowInfo-maySkipCheckpoint-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCounterpartyFlowInfo</h4>
<pre>@Suspendable
 @NotNull
public&nbsp;<a href="../../../../net/corda/core/flows/FlowInfo.html" title="type parameter in FlowInfo">FlowInfo</a>&nbsp;getCounterpartyFlowInfo(boolean&nbsp;maySkipCheckpoint)</pre>
<div class="block"><p><p>Returns a <a href="../../../../net/corda/core/flows/FlowInfo.html" title="class in net.corda.core.flows"><code>class FlowInfo</code></a> object describing the flow <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>counterparty</code></a> is using. With FlowInfo.flowVersion it
provides the necessary information needed for the evolution of flows and enabling backwards compatibility.</p></p><p><p><p>This method can be called before any send or receive has been done with <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>counterparty</code></a>. In such a case this will
force them to start their flow.</p></p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>maySkipCheckpoint</code> - setting it to true indicates to the platform that it may optimise away the checkpoint.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowInfo.html" title="class in net.corda.core.flows"><code>class FlowInfo</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>counterparty</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>counterparty</code></a></dd>
</dl>
</li>
</ul>
<a name="getCounterpartyFlowInfo--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCounterpartyFlowInfo</h4>
<pre>@Suspendable
 @NotNull
public&nbsp;<a href="../../../../net/corda/core/flows/FlowInfo.html" title="type parameter in FlowInfo">FlowInfo</a>&nbsp;getCounterpartyFlowInfo()</pre>
<div class="block"><p><p>Returns a <a href="../../../../net/corda/core/flows/FlowInfo.html" title="class in net.corda.core.flows"><code>class FlowInfo</code></a> object describing the flow <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>counterparty</code></a> is using. With FlowInfo.flowVersion it
provides the necessary information needed for the evolution of flows and enabling backwards compatibility.</p></p><p><p><p>This method can be called before any send or receive has been done with <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>counterparty</code></a>. In such a case this will
force them to start their flow.</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowInfo.html" title="class in net.corda.core.flows"><code>class FlowInfo</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>counterparty</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>counterparty</code></a></dd>
</dl>
</li>
</ul>
<a name="sendAndReceive-receiveType-payload-maySkipCheckpoint-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendAndReceive</h4>
<pre>@Suspendable
 @NotNull
public&nbsp;&lt;R&gt;&nbsp;<a href="../../../../net/corda/core/utilities/UntrustworthyData.html" title="type parameter in UntrustworthyData">UntrustworthyData</a>&lt;R&gt;&nbsp;sendAndReceive(@NotNull
                                                                      java.lang.Class&lt;R&gt;&nbsp;receiveType,
                                                                      @NotNull
                                                                      java.lang.Object&nbsp;payload,
                                                                      boolean&nbsp;maySkipCheckpoint)</pre>
<div class="block"><p><p>Serializes and queues the given <a href="../../../../net/corda/core/flows/FlowSession.html#sendAndReceive-receiveType-payload-maySkipCheckpoint-"><code>payload</code></a> object for sending to the <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>counterparty</code></a>. Suspends until a response
is received, which must be of the given <a href="../../../../net/corda/core/flows/FlowSession.html#sendAndReceive-receiveType-payload-maySkipCheckpoint-"><code>receiveType</code></a>. Remember that when receiving data from other parties the
data should not be trusted until it's been thoroughly verified for consistency and that all expectations are
satisfied, as a malicious peer may send you subtly corrupted data in order to exploit your code.</p></p><p><p><p>Note that this function is not just a simple send+receive pair: it is more efficient and more correct to
use this when you expect to do a message swap than do use <a href="../../../../net/corda/core/flows/FlowSession.html#send-payload-maySkipCheckpoint-"><code>send</code></a> and then receive in turn.</p></p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>maySkipCheckpoint</code> - setting it to true indicates to the platform that it may optimise away the checkpoint.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an <a href="../../../../net/corda/core/utilities/UntrustworthyData.html" title="class in net.corda.core.utilities"><code>class UntrustworthyData</code></a> wrapper around the received object.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowSession.html#sendAndReceive-receiveType-payload-maySkipCheckpoint-"><code>payload</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>counterparty</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html#sendAndReceive-receiveType-payload-maySkipCheckpoint-"><code>receiveType</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html#send-payload-maySkipCheckpoint-"><code>send</code></a></dd>
</dl>
</li>
</ul>
<a name="sendAndReceive-receiveType-payload-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendAndReceive</h4>
<pre>@Suspendable
 @NotNull
public&nbsp;&lt;R&gt;&nbsp;<a href="../../../../net/corda/core/utilities/UntrustworthyData.html" title="type parameter in UntrustworthyData">UntrustworthyData</a>&lt;R&gt;&nbsp;sendAndReceive(@NotNull
                                                                      java.lang.Class&lt;R&gt;&nbsp;receiveType,
                                                                      @NotNull
                                                                      java.lang.Object&nbsp;payload)</pre>
<div class="block"><p><p>Serializes and queues the given <a href="../../../../net/corda/core/flows/FlowSession.html#sendAndReceive-receiveType-payload-"><code>payload</code></a> object for sending to the <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>counterparty</code></a>. Suspends until a response
is received, which must be of the given <a href="../../../../net/corda/core/flows/FlowSession.html#sendAndReceive-receiveType-payload-"><code>receiveType</code></a>. Remember that when receiving data from other parties the
data should not be trusted until it's been thoroughly verified for consistency and that all expectations are
satisfied, as a malicious peer may send you subtly corrupted data in order to exploit your code.</p></p><p><p><p>Note that this function is not just a simple send+receive pair: it is more efficient and more correct to
use this when you expect to do a message swap than do use <a href="../../../../net/corda/core/flows/FlowSession.html#send-payload-maySkipCheckpoint-"><code>send</code></a> and then receive in turn.</p></p></p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an <a href="../../../../net/corda/core/utilities/UntrustworthyData.html" title="class in net.corda.core.utilities"><code>class UntrustworthyData</code></a> wrapper around the received object.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowSession.html#sendAndReceive-receiveType-payload-"><code>payload</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>counterparty</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html#sendAndReceive-receiveType-payload-"><code>receiveType</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html#send-payload-maySkipCheckpoint-"><code>send</code></a></dd>
</dl>
</li>
</ul>
<a name="receive-receiveType-maySkipCheckpoint-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receive</h4>
<pre>@Suspendable
 @NotNull
public&nbsp;&lt;R&gt;&nbsp;<a href="../../../../net/corda/core/utilities/UntrustworthyData.html" title="type parameter in UntrustworthyData">UntrustworthyData</a>&lt;R&gt;&nbsp;receive(@NotNull
                                                               java.lang.Class&lt;R&gt;&nbsp;receiveType,
                                                               boolean&nbsp;maySkipCheckpoint)</pre>
<div class="block"><p><p>Suspends until <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>counterparty</code></a> sends us a message of type <a href="../../../../net/corda/core/flows/FlowSession.html#receive-receiveType-maySkipCheckpoint-"><code>receiveType</code></a>.</p></p><p><p><p>Remember that when receiving data from other parties the data should not be trusted until it's been thoroughly
verified for consistency and that all expectations are satisfied, as a malicious peer may send you subtly
corrupted data in order to exploit your code.</p></p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>maySkipCheckpoint</code> - setting it to true indicates to the platform that it may optimise away the checkpoint.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an <a href="../../../../net/corda/core/utilities/UntrustworthyData.html" title="class in net.corda.core.utilities"><code>class UntrustworthyData</code></a> wrapper around the received object.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>counterparty</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html#receive-receiveType-maySkipCheckpoint-"><code>receiveType</code></a></dd>
</dl>
</li>
</ul>
<a name="receive-receiveType-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receive</h4>
<pre>@Suspendable
 @NotNull
public&nbsp;&lt;R&gt;&nbsp;<a href="../../../../net/corda/core/utilities/UntrustworthyData.html" title="type parameter in UntrustworthyData">UntrustworthyData</a>&lt;R&gt;&nbsp;receive(@NotNull
                                                               java.lang.Class&lt;R&gt;&nbsp;receiveType)</pre>
<div class="block"><p><p>Suspends until <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>counterparty</code></a> sends us a message of type <a href="../../../../net/corda/core/flows/FlowSession.html#receive-receiveType-"><code>receiveType</code></a>.</p></p><p><p><p>Remember that when receiving data from other parties the data should not be trusted until it's been thoroughly
verified for consistency and that all expectations are satisfied, as a malicious peer may send you subtly
corrupted data in order to exploit your code.</p></p></p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an <a href="../../../../net/corda/core/utilities/UntrustworthyData.html" title="class in net.corda.core.utilities"><code>class UntrustworthyData</code></a> wrapper around the received object.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>counterparty</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html#receive-receiveType-"><code>receiveType</code></a></dd>
</dl>
</li>
</ul>
<a name="send-payload-maySkipCheckpoint-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>send</h4>
<pre>@Suspendable
public&nbsp;void&nbsp;send(@NotNull
                              java.lang.Object&nbsp;payload,
                              boolean&nbsp;maySkipCheckpoint)</pre>
<div class="block"><p><p>Queues the given <a href="../../../../net/corda/core/flows/FlowSession.html#send-payload-maySkipCheckpoint-"><code>payload</code></a> for sending to the <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>counterparty</code></a> and continues without suspending.</p></p><p><p><p>Note that the other party may receive the message at some arbitrary later point or not at all: if <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>counterparty</code></a>
is offline then message delivery will be retried until it comes back or until the message is older than the
network's event horizon time.</p></p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>maySkipCheckpoint</code> - setting it to true indicates to the platform that it may optimise away the checkpoint.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowSession.html#send-payload-maySkipCheckpoint-"><code>payload</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>counterparty</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>counterparty</code></a></dd>
</dl>
</li>
</ul>
<a name="send-payload-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>send</h4>
<pre>@Suspendable
public&nbsp;void&nbsp;send(@NotNull
                              java.lang.Object&nbsp;payload)</pre>
<div class="block"><p><p>Queues the given <a href="../../../../net/corda/core/flows/FlowSession.html#send-payload-"><code>payload</code></a> for sending to the <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>counterparty</code></a> and continues without suspending.</p></p><p><p><p>Note that the other party may receive the message at some arbitrary later point or not at all: if <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>counterparty</code></a>
is offline then message delivery will be retried until it comes back or until the message is older than the
network's event horizon time.</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowSession.html#send-payload-"><code>payload</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>counterparty</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>counterparty</code></a></dd>
</dl>
</li>
</ul>
<a name="close--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>close</h4>
<pre>@Suspendable
public&nbsp;void&nbsp;close()</pre>
<div class="block"><p><p>Closes this session and performs cleanup of any resources tied to this session.</p></p><p><p><p>Note that sessions are closed automatically when the corresponding top-level flow terminates.
So, it's beneficial to eagerly close them in long-lived flows that might have many open sessions that are not needed anymore and consume resources (e.g. memory, disk etc.).
A closed session cannot be used anymore, e.g. to send or receive messages. So, you have to ensure you are calling this method only when the session is not going to be used anymore.
As a result, any operations on a closed session will fail with an <a href="../../../../net/corda/core/flows/UnexpectedFlowEndException.html" title="class in net.corda.core.flows"><code>exception UnexpectedFlowEndException</code></a>.
When a session is closed, the other side is informed and the session is closed there too eventually.
To prevent misuse of the API, if there is an attempt to close an uninitialised session the invocation will fail with an <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-illegal-state-exception/index.html">IllegalStateException</a>.</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/UnexpectedFlowEndException.html" title="class in net.corda.core.flows"><code>exception UnexpectedFlowEndException</code></a>, 
<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-illegal-state-exception/index.html">IllegalStateException</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../net/corda/core/flows/FlowLogicRefFactory.html" title="interface in net.corda.core.flows"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../net/corda/core/flows/FlowStackSnapshot.html" title="class in net.corda.core.flows"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?net/corda/core/flows/FlowSession.html" target="_top">Frames</a></li>
<li><a href="FlowSession.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
