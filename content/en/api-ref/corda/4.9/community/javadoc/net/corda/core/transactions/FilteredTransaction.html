<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_242) on Tue Mar 08 13:36:42 UTC 2022 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>FilteredTransaction</title>
<meta name="date" content="2022-03-08">
<meta name="keywords" content="net.corda.core.transactions.FilteredTransaction class">
<meta name="keywords" content="Companion">
<meta name="keywords" content="verify()">
<meta name="keywords" content="checkWithFun()">
<meta name="keywords" content="checkAllComponentsVisible()">
<meta name="keywords" content="checkCommandVisibility()">
<meta name="keywords" content="getId()">
<meta name="keywords" content="getFilteredComponentGroups()">
<meta name="keywords" content="getGroupHashes()">
<meta name="keywords" content="buildFilteredTransaction()">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="FilteredTransaction";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../net/corda/core/transactions/FilteredComponentGroup.html" title="class in net.corda.core.transactions"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../net/corda/core/transactions/FilteredTransactionVerificationException.html" title="class in net.corda.core.transactions"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?net/corda/core/transactions/FilteredTransaction.html" target="_top">Frames</a></li>
<li><a href="FilteredTransaction.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">net.corda.core.transactions</div>
<h2 title="Class FilteredTransaction" class="title">Class FilteredTransaction</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="../../../../net/corda/core/transactions/BaseTransaction.html" title="class in net.corda.core.transactions">net.corda.core.transactions.BaseTransaction</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../net/corda/core/transactions/CoreTransaction.html" title="class in net.corda.core.transactions">net.corda.core.transactions.CoreTransaction</a></li>
<li>
<ul class="inheritance">
<li>TraversableTransaction</li>
<li>
<ul class="inheritance">
<li>net.corda.core.transactions.FilteredTransaction</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../net/corda/core/contracts/NamedByHash.html" title="interface in net.corda.core.contracts">NamedByHash</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">FilteredTransaction</span>
extends TraversableTransaction</pre>
<div class="block"><p><p>Class representing merkleized filtered transaction.</p></p></div>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="Companion">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Companion</h4>
<pre>public static&nbsp;net.corda.core.transactions.FilteredTransaction.Companion Companion</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="verify--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verify</h4>
<pre>public&nbsp;void&nbsp;verify()</pre>
<div class="block"><p><p>Runs verification of partial Merkle branch against id.
Note that empty filtered transactions (with no component groups) are accepted as well,
e.g. for Timestamp Authorities to blindly sign or any other similar case in the future
that requires a blind signature over a transaction's id.</p></p></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>FilteredTransactionVerificationException</code> - if verification fails.</dd>
</dl>
</li>
</ul>
<a name="checkWithFun-checkingFun-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkWithFun</h4>
<pre>public&nbsp;boolean&nbsp;checkWithFun(@NotNull
                            kotlin.jvm.functions.Function1&lt;java.lang.Object,java.lang.Boolean&gt;&nbsp;checkingFun)</pre>
<div class="block"><p><p>Function that checks the whole filtered structure.
Force type checking on a structure that we obtained, so we don't sign more than expected.
Example: Oracle is implemented to check only for commands, if it gets an attachment and doesn't expect it - it can sign
over a transaction with the attachment that wasn't verified. Of course it depends on how you implement it, but else -> false
should solve a problem with possible later extensions to WireTransaction.</p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>checkingFun</code> - function that performs type checking on the structure fields and provides verification logic accordingly.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>false if no elements were matched on a structure or checkingFun returned false.</dd>
</dl>
</li>
</ul>
<a name="checkAllComponentsVisible-componentGroupEnum-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkAllComponentsVisible</h4>
<pre>public&nbsp;void&nbsp;checkAllComponentsVisible(@NotNull
                                      <a href="../../../../net/corda/core/contracts/ComponentGroupEnum.html" title="type parameter in ComponentGroupEnum">ComponentGroupEnum</a>&nbsp;componentGroupEnum)</pre>
<div class="block"><p><p>Function that checks if all of the components in a particular group are visible.
This functionality is required on non-Validating Notaries to check that all inputs are visible.
It might also be applied in Oracles or any other entity requiring <a href="../../../../net/corda/core/contracts/Command.html" title="class in net.corda.core.contracts"><code>class Command</code></a> visibility, but because this method
cannot distinguish between related and unrelated to the signer <a href="../../../../net/corda/core/contracts/Command.html" title="class in net.corda.core.contracts"><code>class Command</code></a>s, one should use the
<a href="../../../../net/corda/core/transactions/FilteredTransaction.html#checkCommandVisibility-publicKey-"><code>checkCommandVisibility</code></a> method, which is specifically designed for <a href="../../../../net/corda/core/contracts/Command.html" title="class in net.corda.core.contracts"><code>class Command</code></a> visibility purposes.
The logic behind this algorithm is that we check that the root of the provided group partialMerkleTree matches with the
root of a fullMerkleTree if computed using all visible components.
Note that this method is usually called after or before <a href="../../../../net/corda/core/transactions/FilteredTransaction.html#verify--"><code>verify</code></a>, to also ensure that the provided partial Merkle
tree corresponds to the correct leaf in the top Merkle tree.</p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>componentGroupEnum</code> - the <a href="../../../../net/corda/core/contracts/ComponentGroupEnum.html" title="enum in net.corda.core.contracts"><code>enum ComponentGroupEnum</code></a> that corresponds to the componentGroup for which we require full component visibility.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>ComponentVisibilityException</code> - if not all of the components are visible or if the component group is not present in the <a href="../../../../net/corda/core/transactions/FilteredTransaction.html" title="class in net.corda.core.transactions"><code>class FilteredTransaction</code></a>.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/contracts/Command.html" title="class in net.corda.core.contracts"><code>class Command</code></a>, 
<a href="../../../../net/corda/core/contracts/Command.html" title="class in net.corda.core.contracts"><code>class Command</code></a>, 
<a href="../../../../net/corda/core/transactions/FilteredTransaction.html#checkCommandVisibility-publicKey-"><code>checkCommandVisibility</code></a>, 
<a href="../../../../net/corda/core/contracts/Command.html" title="class in net.corda.core.contracts"><code>class Command</code></a>, 
<a href="../../../../net/corda/core/transactions/FilteredTransaction.html#verify--"><code>verify</code></a></dd>
</dl>
</li>
</ul>
<a name="checkCommandVisibility-publicKey-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkCommandVisibility</h4>
<pre>public&nbsp;void&nbsp;checkCommandVisibility(@NotNull
                                   java.security.PublicKey&nbsp;publicKey)</pre>
<div class="block"><p><p>Function that checks if all of the commands that should be signed by the input public key are visible.
This functionality is required from Oracles to check that all of the commands they should sign are visible.
This algorithm uses the ComponentGroupEnum.SIGNERS_GROUP to count how many commands should be signed by the
input <a href="https://docs.oracle.com/javase/8/docs/api/java/security/PublicKey.html">PublicKey</a> and it then matches it with the size of received <a href="../../../../net/corda/core/transactions/TraversableTransaction.html#getCommands--"><code>commands</code></a>.
Note that this method does not throw if there are no commands for this key to sign in the original <a href="../../../../net/corda/core/transactions/WireTransaction.html" title="class in net.corda.core.transactions"><code>class WireTransaction</code></a>.</p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>publicKey</code> - signer's <a href="https://docs.oracle.com/javase/8/docs/api/java/security/PublicKey.html">PublicKey</a></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>ComponentVisibilityException</code> - if not all of the related commands are visible.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="https://docs.oracle.com/javase/8/docs/api/java/security/PublicKey.html">PublicKey</a>, 
<a href="../../../../net/corda/core/transactions/TraversableTransaction.html#getCommands--"><code>commands</code></a>, 
<a href="../../../../net/corda/core/transactions/WireTransaction.html" title="class in net.corda.core.transactions"><code>class WireTransaction</code></a></dd>
</dl>
</li>
</ul>
<a name="getId--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getId</h4>
<pre>@NotNull
public&nbsp;<a href="../../../../net/corda/core/crypto/SecureHash.html" title="type parameter in SecureHash">SecureHash</a>&nbsp;getId()</pre>
<div class="block"><p>Merkle tree root hash.</p></div>
</li>
</ul>
<a name="getFilteredComponentGroups--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFilteredComponentGroups</h4>
<pre>@NotNull
public&nbsp;java.util.List&lt;net.corda.core.transactions.FilteredComponentGroup&gt;&nbsp;getFilteredComponentGroups()</pre>
<div class="block"><p>list of transaction components groups remained after filters are applied to</p><p><p> <a href="../../../../net/corda/core/transactions/WireTransaction.html" title="class in net.corda.core.transactions"><code>class WireTransaction</code></a>.</p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/transactions/WireTransaction.html" title="class in net.corda.core.transactions"><code>class WireTransaction</code></a></dd>
</dl>
</li>
</ul>
<a name="getGroupHashes--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getGroupHashes</h4>
<pre>@NotNull
public&nbsp;java.util.List&lt;net.corda.core.crypto.SecureHash&gt;&nbsp;getGroupHashes()</pre>
<div class="block"><p>the roots of the transaction component groups.</p></div>
</li>
</ul>
<a name="buildFilteredTransaction-wtx-filtering-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>buildFilteredTransaction</h4>
<pre>@JvmStatic
 @NotNull
public static&nbsp;<a href="../../../../net/corda/core/transactions/FilteredTransaction.html" title="type parameter in FilteredTransaction">FilteredTransaction</a>&nbsp;buildFilteredTransaction(@NotNull
                                                                                <a href="../../../../net/corda/core/transactions/WireTransaction.html" title="type parameter in WireTransaction">WireTransaction</a>&nbsp;wtx,
                                                                                @NotNull
                                                                                java.util.function.Predicate&lt;java.lang.Object&gt;&nbsp;filtering)</pre>
<div class="block"><p><p>Construction of filtered transaction with partial Merkle tree.</p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>wtx</code> - WireTransaction to be filtered.</dd>
<dd><code>filtering</code> - filtering over the whole WireTransaction.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../net/corda/core/transactions/FilteredComponentGroup.html" title="class in net.corda.core.transactions"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../net/corda/core/transactions/FilteredTransactionVerificationException.html" title="class in net.corda.core.transactions"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?net/corda/core/transactions/FilteredTransaction.html" target="_top">Frames</a></li>
<li><a href="FilteredTransaction.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
