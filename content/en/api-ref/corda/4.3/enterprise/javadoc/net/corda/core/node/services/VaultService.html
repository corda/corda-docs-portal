<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_202) on Fri Mar 20 11:51:03 GMT 2020 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>VaultService</title>
<meta name="date" content="2020-03-20">
<meta name="keywords" content="net.corda.core.node.services.VaultService interface">
<meta name="keywords" content="getRawUpdates()">
<meta name="keywords" content="getUpdates()">
<meta name="keywords" content="whenConsumed()">
<meta name="keywords" content="addNoteToTransaction()">
<meta name="keywords" content="getTransactionNotes()">
<meta name="keywords" content="softLockReserve()">
<meta name="keywords" content="softLockRelease()">
<meta name="keywords" content="tryLockFungibleStatesForSpending()">
<meta name="keywords" content="_queryBy()">
<meta name="keywords" content="_trackBy()">
<meta name="keywords" content="queryBy()">
<meta name="keywords" content="trackBy()">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>

<meta name="docsearch:language" content="en">
<meta name="docsearch:version" content="4.3">
<meta name="docsearch:project" content="corda-enterprise">
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="VaultService";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":18,"i1":18,"i2":18,"i3":18,"i4":18,"i5":18,"i6":18,"i7":18,"i8":18,"i9":18,"i10":18,"i11":18,"i12":18,"i13":18,"i14":18,"i15":18,"i16":18,"i17":18,"i18":18,"i19":18,"i20":18,"i21":18};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],16:["t5","Default Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../net/corda/core/node/services/VaultQueryException.html" title="class in net.corda.core.node.services"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../net/corda/core/node/services/VaultServiceKt.html" title="class in net.corda.core.node.services"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?net/corda/core/node/services/VaultService.html" target="_top">Frames</a></li>
<li><a href="VaultService.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">net.corda.core.node.services</div>
<h2 title="Interface VaultService" class="title">Interface VaultService</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public <span class="typeNameLabel">VaultService</span></pre>
<div class="block"><p><p>A <a href="../../../../../net/corda/core/node/services/VaultService.html" title="interface in net.corda.core.node.services"><code>interface VaultService</code></a> is responsible for securely and safely persisting the current state of a vault to storage. The
vault service vends immutable snapshots of the current vault for working with: if you build a transaction based
on a vault that isn't current, be aware that it may end up being invalid if the states that were used have been
consumed by someone else first!</p></p><p><p><p>Note that transactions we've seen are held by the storage service, not the vault.</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../net/corda/core/node/services/VaultService.html" title="interface in net.corda.core.node.services"><code>interface VaultService</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Interface and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/core/node/services/VaultService.DefaultImpls.html" title="class in net.corda.core.node.services">VaultService.DefaultImpls</a></span></code>
<div class="block">A <a href="../../../../../net/corda/core/node/services/VaultService.html" title="interface in net.corda.core.node.services"><code>interface VaultService</code></a> is responsible for securely and safely persisting the current state of a vault to storage. The
vault service vends immutable snapshots of the current vault for working with: if you build a transaction based
on a vault that isn't current, be aware that it may end up being invalid if the states that were used have been
consumed by someone else first!</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t5" class="tableTab"><span><a href="javascript:show(16);">Default Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;<br><a href="../../../../../net/corda/core/node/services/Vault.Page.html" title="type parameter in Vault.Page">Vault.Page</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/core/node/services/VaultService.html#Z:Z_queryBy-criteria-paging-sorting-contractStateType-">_queryBy</a></span>(<a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria,
        <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="type parameter in PageSpecification">PageSpecification</a>&nbsp;paging,
        <a href="../../../../../net/corda/core/node/services/vault/Sort.html" title="type parameter in Sort">Sort</a>&nbsp;sorting,
        java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType)</code>
<div class="block">Generic vault query function which takes a <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="class in net.corda.core.node.services.vault"><code>class QueryCriteria</code></a> object to define filters,
optional <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="class in net.corda.core.node.services.vault"><code>class PageSpecification</code></a> and optional <a href="../../../../../net/corda/core/node/services/vault/Sort.html" title="class in net.corda.core.node.services.vault"><code>class Sort</code></a> modification criteria (default unsorted),
and returns a <a href="../../../../../net/corda/core/node/services/Vault.Page.html" title="class in net.corda.core.node.services"><code>class Vault.Page</code></a> object containing the following:</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;<br><a href="../../../../../net/corda/core/messaging/DataFeed.html" title="type parameter in DataFeed">DataFeed</a>&lt;net.corda.core.node.services.Vault.Page,net.corda.core.node.services.Vault.Update&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/core/node/services/VaultService.html#Z:Z_trackBy-criteria-paging-sorting-contractStateType-">_trackBy</a></span>(<a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria,
        <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="type parameter in PageSpecification">PageSpecification</a>&nbsp;paging,
        <a href="../../../../../net/corda/core/node/services/vault/Sort.html" title="type parameter in Sort">Sort</a>&nbsp;sorting,
        java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType)</code>
<div class="block">Generic vault query function which takes a <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="class in net.corda.core.node.services.vault"><code>class QueryCriteria</code></a> object to define filters,
optional <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="class in net.corda.core.node.services.vault"><code>class PageSpecification</code></a> and optional <a href="../../../../../net/corda/core/node/services/vault/Sort.html" title="class in net.corda.core.node.services.vault"><code>class Sort</code></a> modification criteria (default unsorted),
and returns a <a href="../../../../../net/corda/core/messaging/DataFeed.html" title="class in net.corda.core.messaging"><code>class DataFeed</code></a> object containing:</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/core/node/services/VaultService.html#addNoteToTransaction-txnId-noteText-">addNoteToTransaction</a></span>(<a href="../../../../../net/corda/core/crypto/SecureHash.html" title="type parameter in SecureHash">SecureHash</a>&nbsp;txnId,
                    java.lang.String&nbsp;noteText)</code>
<div class="block">Add a note to an existing <a href="../../../../../net/corda/core/transactions/LedgerTransaction.html" title="class in net.corda.core.transactions"><code>class LedgerTransaction</code></a> given by its unique <a href="../../../../../net/corda/core/crypto/SecureHash.html" title="class in net.corda.core.crypto"><code>class SecureHash</code></a> id.
Multiple notes may be attached to the same <a href="../../../../../net/corda/core/transactions/LedgerTransaction.html" title="class in net.corda.core.transactions"><code>class LedgerTransaction</code></a>.
These are additively and immutably persisted within the node local vault database in a single textual field.
using a semi-colon separator.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>rx.Observable&lt;net.corda.core.node.services.Vault.Update&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/core/node/services/VaultService.html#getRawUpdates--">getRawUpdates</a></span>()</code>
<div class="block">Prefer the use of <a href="../../../../../net/corda/core/node/services/VaultService.html#getUpdates--"><code>VaultService.getUpdates</code></a> unless you know why you want to use this instead.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>java.lang.Iterable&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/core/node/services/VaultService.html#getTransactionNotes-txnId-">getTransactionNotes</a></span>(<a href="../../../../../net/corda/core/crypto/SecureHash.html" title="type parameter in SecureHash">SecureHash</a>&nbsp;txnId)</code>&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>rx.Observable&lt;net.corda.core.node.services.Vault.Update&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/core/node/services/VaultService.html#getUpdates--">getUpdates</a></span>()</code>
<div class="block">Get a synchronous Observable of updates.  When observations are pushed to the Observer, the <a href="../../../../../net/corda/core/node/services/Vault.html" title="class in net.corda.core.node.services"><code>class Vault</code></a> will
already incorporate the update and the database transaction associated with the update will have been committed
and closed.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;<br><a href="../../../../../net/corda/core/node/services/Vault.Page.html" title="type parameter in Vault.Page">Vault.Page</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/core/node/services/VaultService.html#queryBy-contractStateType-">queryBy</a></span>(java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType)</code>&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;<br><a href="../../../../../net/corda/core/node/services/Vault.Page.html" title="type parameter in Vault.Page">Vault.Page</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/core/node/services/VaultService.html#queryBy-contractStateType-criteria-">queryBy</a></span>(java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
       <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria)</code>&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;<br><a href="../../../../../net/corda/core/node/services/Vault.Page.html" title="type parameter in Vault.Page">Vault.Page</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/core/node/services/VaultService.html#queryBy-contractStateType-paging-">queryBy</a></span>(java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
       <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="type parameter in PageSpecification">PageSpecification</a>&nbsp;paging)</code>&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;<br><a href="../../../../../net/corda/core/node/services/Vault.Page.html" title="type parameter in Vault.Page">Vault.Page</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/core/node/services/VaultService.html#queryBy-contractStateType-criteria-paging-">queryBy</a></span>(java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
       <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria,
       <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="type parameter in PageSpecification">PageSpecification</a>&nbsp;paging)</code>&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;<br><a href="../../../../../net/corda/core/node/services/Vault.Page.html" title="type parameter in Vault.Page">Vault.Page</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/core/node/services/VaultService.html#queryBy-contractStateType-criteria-sorting-">queryBy</a></span>(java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
       <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria,
       <a href="../../../../../net/corda/core/node/services/vault/Sort.html" title="type parameter in Sort">Sort</a>&nbsp;sorting)</code>&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;<br><a href="../../../../../net/corda/core/node/services/Vault.Page.html" title="type parameter in Vault.Page">Vault.Page</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/core/node/services/VaultService.html#queryBy-contractStateType-criteria-paging-sorting-">queryBy</a></span>(java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
       <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria,
       <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="type parameter in PageSpecification">PageSpecification</a>&nbsp;paging,
       <a href="../../../../../net/corda/core/node/services/vault/Sort.html" title="type parameter in Sort">Sort</a>&nbsp;sorting)</code>&nbsp;</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/core/node/services/VaultService.html#softLockRelease-lockId-stateRefs-">softLockRelease</a></span>(java.util.UUID&nbsp;lockId,
               <a href="../../../../../net/corda/core/utilities/NonEmptySet.html" title="type parameter in NonEmptySet">NonEmptySet</a>&lt;net.corda.core.contracts.StateRef&gt;&nbsp;stateRefs)</code>
<div class="block">Release all or an explicitly specified set of <a href="../../../../../net/corda/core/contracts/StateRef.html" title="class in net.corda.core.contracts"><code>class StateRef</code></a> for a given <a href="http://docs.oracle.com/javase/8/docs/api/java/util/UUID.html">UUID</a> unique identifier.
A <a href="../../../../../net/corda/core/node/services/Vault.html" title="class in net.corda.core.node.services"><code>class Vault</code></a> soft-lock manager is automatically notified from flows that are terminated, such that any soft locked
states may be released.
In the case of coin selection, soft-locks are automatically released once previously gathered unconsumed
input refs are consumed as part of cash spending.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/core/node/services/VaultService.html#softLockReserve-lockId-stateRefs-">softLockReserve</a></span>(java.util.UUID&nbsp;lockId,
               <a href="../../../../../net/corda/core/utilities/NonEmptySet.html" title="type parameter in NonEmptySet">NonEmptySet</a>&lt;net.corda.core.contracts.StateRef&gt;&nbsp;stateRefs)</code>
<div class="block">Reserve a set of <a href="../../../../../net/corda/core/contracts/StateRef.html" title="class in net.corda.core.contracts"><code>class StateRef</code></a> for a given <a href="http://docs.oracle.com/javase/8/docs/api/java/util/UUID.html">UUID</a> unique identifier.
Typically, the unique identifier will refer to a <a href="../../../../../net/corda/core/flows/FlowLogic.html#getRunId--"><code>FlowLogic.getRunId</code></a>'s <a href="http://docs.oracle.com/javase/8/docs/api/java/util/UUID.html">UUID</a> associated with an in-flight flow.
In this case if the flow terminates the locks will automatically be freed, even if there is an error.
However, the user can specify their own <a href="http://docs.oracle.com/javase/8/docs/api/java/util/UUID.html">UUID</a> and manage this manually, possibly across the lifetime of multiple
flows, or from other thread contexts e.g. <a href="../../../../../net/corda/core/node/services/CordaService.html" title="interface in net.corda.core.node.services"><code>interface CordaService</code></a> instances.
In the case of coin selection, soft locks are automatically taken upon gathering relevant unconsumed input refs.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;<br><a href="../../../../../net/corda/core/messaging/DataFeed.html" title="type parameter in DataFeed">DataFeed</a>&lt;net.corda.core.node.services.Vault.Page,net.corda.core.node.services.Vault.Update&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/core/node/services/VaultService.html#trackBy-contractStateType-">trackBy</a></span>(java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType)</code>&nbsp;</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;<br><a href="../../../../../net/corda/core/messaging/DataFeed.html" title="type parameter in DataFeed">DataFeed</a>&lt;net.corda.core.node.services.Vault.Page,net.corda.core.node.services.Vault.Update&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/core/node/services/VaultService.html#trackBy-contractStateType-criteria-">trackBy</a></span>(java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
       <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria)</code>&nbsp;</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;<br><a href="../../../../../net/corda/core/messaging/DataFeed.html" title="type parameter in DataFeed">DataFeed</a>&lt;net.corda.core.node.services.Vault.Page,net.corda.core.node.services.Vault.Update&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/core/node/services/VaultService.html#trackBy-contractStateType-paging-">trackBy</a></span>(java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
       <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="type parameter in PageSpecification">PageSpecification</a>&nbsp;paging)</code>&nbsp;</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;<br><a href="../../../../../net/corda/core/messaging/DataFeed.html" title="type parameter in DataFeed">DataFeed</a>&lt;net.corda.core.node.services.Vault.Page,net.corda.core.node.services.Vault.Update&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/core/node/services/VaultService.html#trackBy-contractStateType-criteria-paging-">trackBy</a></span>(java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
       <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria,
       <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="type parameter in PageSpecification">PageSpecification</a>&nbsp;paging)</code>&nbsp;</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;<br><a href="../../../../../net/corda/core/messaging/DataFeed.html" title="type parameter in DataFeed">DataFeed</a>&lt;net.corda.core.node.services.Vault.Page,net.corda.core.node.services.Vault.Update&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/core/node/services/VaultService.html#trackBy-contractStateType-criteria-sorting-">trackBy</a></span>(java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
       <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria,
       <a href="../../../../../net/corda/core/node/services/vault/Sort.html" title="type parameter in Sort">Sort</a>&nbsp;sorting)</code>&nbsp;</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;<br><a href="../../../../../net/corda/core/messaging/DataFeed.html" title="type parameter in DataFeed">DataFeed</a>&lt;net.corda.core.node.services.Vault.Page,net.corda.core.node.services.Vault.Update&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/core/node/services/VaultService.html#trackBy-contractStateType-criteria-paging-sorting-">trackBy</a></span>(java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
       <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria,
       <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="type parameter in PageSpecification">PageSpecification</a>&nbsp;paging,
       <a href="../../../../../net/corda/core/node/services/vault/Sort.html" title="type parameter in Sort">Sort</a>&nbsp;sorting)</code>&nbsp;</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>&lt;T extends <a href="../../../../../net/corda/core/contracts/FungibleState.html" title="type parameter in FungibleState">FungibleState</a>&lt;?&gt;&gt;<br>java.util.List&lt;net.corda.core.contracts.StateAndRef&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/core/node/services/VaultService.html#tryLockFungibleStatesForSpending-lockId-eligibleStatesQuery-amount-contractStateType-">tryLockFungibleStatesForSpending</a></span>(java.util.UUID&nbsp;lockId,
                                <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;eligibleStatesQuery,
                                <a href="../../../../../net/corda/core/contracts/Amount.html" title="type parameter in Amount">Amount</a>&lt;?&gt;&nbsp;amount,
                                java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType)</code>
<div class="block">Helper function to determine spendable states and soft locking them.
Currently performance will be worse than for the hand optimised version in
<a href="#">Cash.unconsumedCashStatesForSpending</a>. However, this is fully generic and can operate with custom <a href="../../../../../net/corda/core/contracts/FungibleState.html" title="interface in net.corda.core.contracts"><code>interface FungibleState</code></a>
and <a href="../../../../../net/corda/core/contracts/FungibleAsset.html" title="interface in net.corda.core.contracts"><code>interface FungibleAsset</code></a> states.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code><a href="../../../../../net/corda/core/concurrent/CordaFuture.html" title="type parameter in CordaFuture">CordaFuture</a>&lt;net.corda.core.node.services.Vault.Update&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/corda/core/node/services/VaultService.html#whenConsumed-ref-">whenConsumed</a></span>(<a href="../../../../../net/corda/core/contracts/StateRef.html" title="type parameter in StateRef">StateRef</a>&nbsp;ref)</code>
<div class="block">Provide a <a href="../../../../../net/corda/core/concurrent/CordaFuture.html" title="interface in net.corda.core.concurrent"><code>interface CordaFuture</code></a> for when a <a href="../../../../../net/corda/core/contracts/StateRef.html" title="class in net.corda.core.contracts"><code>class StateRef</code></a> is consumed, which can be very useful in building tests.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getRawUpdates--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRawUpdates</h4>
<pre>rx.Observable&lt;net.corda.core.node.services.Vault.Update&gt;&nbsp;getRawUpdates()</pre>
<div class="block"><p><p>Prefer the use of <a href="../../../../../net/corda/core/node/services/VaultService.html#getUpdates--"><code>VaultService.getUpdates</code></a> unless you know why you want to use this instead.</p></p><p><p><p>Get a synchronous Observable of updates.  When observations are pushed to the Observer, the <a href="../../../../../net/corda/core/node/services/Vault.html" title="class in net.corda.core.node.services"><code>class Vault</code></a> will already
incorporate the update, and the database transaction associated with the update will still be open and current.
If for some reason the processing crosses outside of the database transaction (for example, the update is pushed
outside the current JVM or across to another <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html">Thread</a>, which is executing in a different database transaction),
then the <a href="../../../../../net/corda/core/node/services/Vault.html" title="class in net.corda.core.node.services"><code>class Vault</code></a> may not incorporate the update due to racing with committing the current database transaction.</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../net/corda/core/node/services/VaultService.html#getUpdates--"><code>VaultService.getUpdates</code></a>, 
<a href="../../../../../net/corda/core/node/services/Vault.html" title="class in net.corda.core.node.services"><code>class Vault</code></a>, 
<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html">Thread</a>, 
<a href="../../../../../net/corda/core/node/services/Vault.html" title="class in net.corda.core.node.services"><code>class Vault</code></a></dd>
</dl>
</li>
</ul>
<a name="getUpdates--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUpdates</h4>
<pre>rx.Observable&lt;net.corda.core.node.services.Vault.Update&gt;&nbsp;getUpdates()</pre>
<div class="block"><p><p>Get a synchronous Observable of updates.  When observations are pushed to the Observer, the <a href="../../../../../net/corda/core/node/services/Vault.html" title="class in net.corda.core.node.services"><code>class Vault</code></a> will
already incorporate the update and the database transaction associated with the update will have been committed
and closed.</p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../net/corda/core/node/services/Vault.html" title="class in net.corda.core.node.services"><code>class Vault</code></a></dd>
</dl>
</li>
</ul>
<a name="whenConsumed-ref-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>whenConsumed</h4>
<pre><a href="../../../../../net/corda/core/concurrent/CordaFuture.html" title="type parameter in CordaFuture">CordaFuture</a>&lt;net.corda.core.node.services.Vault.Update&gt;&nbsp;whenConsumed(<a href="../../../../../net/corda/core/contracts/StateRef.html" title="type parameter in StateRef">StateRef</a>&nbsp;ref)</pre>
<div class="block"><p><p>Provide a <a href="../../../../../net/corda/core/concurrent/CordaFuture.html" title="interface in net.corda.core.concurrent"><code>interface CordaFuture</code></a> for when a <a href="../../../../../net/corda/core/contracts/StateRef.html" title="class in net.corda.core.contracts"><code>class StateRef</code></a> is consumed, which can be very useful in building tests.</p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../net/corda/core/concurrent/CordaFuture.html" title="interface in net.corda.core.concurrent"><code>interface CordaFuture</code></a>, 
<a href="../../../../../net/corda/core/contracts/StateRef.html" title="class in net.corda.core.contracts"><code>class StateRef</code></a></dd>
</dl>
</li>
</ul>
<a name="addNoteToTransaction-txnId-noteText-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addNoteToTransaction</h4>
<pre>void&nbsp;addNoteToTransaction(<a href="../../../../../net/corda/core/crypto/SecureHash.html" title="type parameter in SecureHash">SecureHash</a>&nbsp;txnId,
                          java.lang.String&nbsp;noteText)</pre>
<div class="block"><p><p>Add a note to an existing <a href="../../../../../net/corda/core/transactions/LedgerTransaction.html" title="class in net.corda.core.transactions"><code>class LedgerTransaction</code></a> given by its unique <a href="../../../../../net/corda/core/crypto/SecureHash.html" title="class in net.corda.core.crypto"><code>class SecureHash</code></a> id.
Multiple notes may be attached to the same <a href="../../../../../net/corda/core/transactions/LedgerTransaction.html" title="class in net.corda.core.transactions"><code>class LedgerTransaction</code></a>.
These are additively and immutably persisted within the node local vault database in a single textual field.
using a semi-colon separator.</p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../net/corda/core/transactions/LedgerTransaction.html" title="class in net.corda.core.transactions"><code>class LedgerTransaction</code></a>, 
<a href="../../../../../net/corda/core/crypto/SecureHash.html" title="class in net.corda.core.crypto"><code>class SecureHash</code></a>, 
<a href="../../../../../net/corda/core/transactions/LedgerTransaction.html" title="class in net.corda.core.transactions"><code>class LedgerTransaction</code></a></dd>
</dl>
</li>
</ul>
<a name="getTransactionNotes-txnId-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTransactionNotes</h4>
<pre>java.lang.Iterable&lt;java.lang.String&gt;&nbsp;getTransactionNotes(<a href="../../../../../net/corda/core/crypto/SecureHash.html" title="type parameter in SecureHash">SecureHash</a>&nbsp;txnId)</pre>
</li>
</ul>
<a name="softLockReserve-lockId-stateRefs-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>softLockReserve</h4>
<pre>void&nbsp;softLockReserve(java.util.UUID&nbsp;lockId,
                     <a href="../../../../../net/corda/core/utilities/NonEmptySet.html" title="type parameter in NonEmptySet">NonEmptySet</a>&lt;net.corda.core.contracts.StateRef&gt;&nbsp;stateRefs)</pre>
<div class="block"><p><p>Reserve a set of <a href="../../../../../net/corda/core/contracts/StateRef.html" title="class in net.corda.core.contracts"><code>class StateRef</code></a> for a given <a href="http://docs.oracle.com/javase/8/docs/api/java/util/UUID.html">UUID</a> unique identifier.
Typically, the unique identifier will refer to a <a href="../../../../../net/corda/core/flows/FlowLogic.html#getRunId--"><code>FlowLogic.getRunId</code></a>'s <a href="http://docs.oracle.com/javase/8/docs/api/java/util/UUID.html">UUID</a> associated with an in-flight flow.
In this case if the flow terminates the locks will automatically be freed, even if there is an error.
However, the user can specify their own <a href="http://docs.oracle.com/javase/8/docs/api/java/util/UUID.html">UUID</a> and manage this manually, possibly across the lifetime of multiple
flows, or from other thread contexts e.g. <a href="../../../../../net/corda/core/node/services/CordaService.html" title="interface in net.corda.core.node.services"><code>interface CordaService</code></a> instances.
In the case of coin selection, soft locks are automatically taken upon gathering relevant unconsumed input refs.</p></p></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd> - when not possible to soft-lock all of requested <a href="../../../../../net/corda/core/contracts/StateRef.html" title="class in net.corda.core.contracts"><code>class StateRef</code></a>.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../net/corda/core/contracts/StateRef.html" title="class in net.corda.core.contracts"><code>class StateRef</code></a>, 
<a href="http://docs.oracle.com/javase/8/docs/api/java/util/UUID.html">UUID</a>, 
<a href="../../../../../net/corda/core/flows/FlowLogic.html#getRunId--"><code>FlowLogic.getRunId</code></a>, 
<a href="http://docs.oracle.com/javase/8/docs/api/java/util/UUID.html">UUID</a>, 
<a href="http://docs.oracle.com/javase/8/docs/api/java/util/UUID.html">UUID</a>, 
<a href="../../../../../net/corda/core/node/services/CordaService.html" title="interface in net.corda.core.node.services"><code>interface CordaService</code></a></dd>
</dl>
</li>
</ul>
<a name="softLockRelease-lockId-stateRefs-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>softLockRelease</h4>
<pre>void&nbsp;softLockRelease(java.util.UUID&nbsp;lockId,
                     <a href="../../../../../net/corda/core/utilities/NonEmptySet.html" title="type parameter in NonEmptySet">NonEmptySet</a>&lt;net.corda.core.contracts.StateRef&gt;&nbsp;stateRefs)</pre>
<div class="block"><p><p>Release all or an explicitly specified set of <a href="../../../../../net/corda/core/contracts/StateRef.html" title="class in net.corda.core.contracts"><code>class StateRef</code></a> for a given <a href="http://docs.oracle.com/javase/8/docs/api/java/util/UUID.html">UUID</a> unique identifier.
A <a href="../../../../../net/corda/core/node/services/Vault.html" title="class in net.corda.core.node.services"><code>class Vault</code></a> soft-lock manager is automatically notified from flows that are terminated, such that any soft locked
states may be released.
In the case of coin selection, soft-locks are automatically released once previously gathered unconsumed
input refs are consumed as part of cash spending.</p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../net/corda/core/contracts/StateRef.html" title="class in net.corda.core.contracts"><code>class StateRef</code></a>, 
<a href="http://docs.oracle.com/javase/8/docs/api/java/util/UUID.html">UUID</a>, 
<a href="../../../../../net/corda/core/node/services/Vault.html" title="class in net.corda.core.node.services"><code>class Vault</code></a></dd>
</dl>
</li>
</ul>
<a name="tryLockFungibleStatesForSpending-lockId-eligibleStatesQuery-amount-contractStateType-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryLockFungibleStatesForSpending</h4>
<pre>&lt;T extends <a href="../../../../../net/corda/core/contracts/FungibleState.html" title="type parameter in FungibleState">FungibleState</a>&lt;?&gt;&gt;&nbsp;java.util.List&lt;net.corda.core.contracts.StateAndRef&gt;&nbsp;tryLockFungibleStatesForSpending(java.util.UUID&nbsp;lockId,
                                                                                                                   <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;eligibleStatesQuery,
                                                                                                                   <a href="../../../../../net/corda/core/contracts/Amount.html" title="type parameter in Amount">Amount</a>&lt;?&gt;&nbsp;amount,
                                                                                                                   java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType)</pre>
<div class="block"><p><p>Helper function to determine spendable states and soft locking them.
Currently performance will be worse than for the hand optimised version in
<a href="#">Cash.unconsumedCashStatesForSpending</a>. However, this is fully generic and can operate with custom <a href="../../../../../net/corda/core/contracts/FungibleState.html" title="interface in net.corda.core.contracts"><code>interface FungibleState</code></a>
and <a href="../../../../../net/corda/core/contracts/FungibleAsset.html" title="interface in net.corda.core.contracts"><code>interface FungibleAsset</code></a> states.</p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>lockId</code> - The <a href="../../../../../net/corda/core/flows/FlowLogic.html#getRunId--"><code>FlowLogic.getRunId</code></a>'s <a href="http://docs.oracle.com/javase/8/docs/api/java/util/UUID.html">UUID</a> of the current flow used to soft lock the states.</dd>
<dd><code>eligibleStatesQuery</code> - A custom query object that selects down to the appropriate subset of all states of the
contractStateType. e.g. by selecting on account, issuer, etc. The query is internally augmented with the
StateStatus.UNCONSUMED, soft lock and contract type requirements.</dd>
<dd><code>amount</code> - The required amount of the asset. It is assumed that compatible issuer states will be filtered out
by the eligibleStatesQuery. This method accepts both Amount<Issued<<em>>> and Amount<</em>>. Amount<Issued<<em>>> isautomatically unwrapped to Amount<</em>>.</dd>
<dd><code>contractStateType</code> - class type of the result set.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns a locked subset of the eligibleStatesQuery sufficient to satisfy the requested amount,
or else an empty list and no change in the stored lock states when their are insufficient resources available.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#">Cash.unconsumedCashStatesForSpending</a>, 
<a href="../../../../../net/corda/core/contracts/FungibleState.html" title="interface in net.corda.core.contracts"><code>interface FungibleState</code></a>, 
<a href="../../../../../net/corda/core/contracts/FungibleAsset.html" title="interface in net.corda.core.contracts"><code>interface FungibleAsset</code></a></dd>
</dl>
</li>
</ul>
<a name="Z:Z_queryBy-criteria-paging-sorting-contractStateType-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_queryBy</h4>
<pre>&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;&nbsp;<a href="../../../../../net/corda/core/node/services/Vault.Page.html" title="type parameter in Vault.Page">Vault.Page</a>&lt;T&gt;&nbsp;_queryBy(<a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria,
                                                 <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="type parameter in PageSpecification">PageSpecification</a>&nbsp;paging,
                                                 <a href="../../../../../net/corda/core/node/services/vault/Sort.html" title="type parameter in Sort">Sort</a>&nbsp;sorting,
                                                 java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType)</pre>
<div class="block"><p><p>Generic vault query function which takes a <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="class in net.corda.core.node.services.vault"><code>class QueryCriteria</code></a> object to define filters,
optional <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="class in net.corda.core.node.services.vault"><code>class PageSpecification</code></a> and optional <a href="../../../../../net/corda/core/node/services/vault/Sort.html" title="class in net.corda.core.node.services.vault"><code>class Sort</code></a> modification criteria (default unsorted),
and returns a <a href="../../../../../net/corda/core/node/services/Vault.Page.html" title="class in net.corda.core.node.services"><code>class Vault.Page</code></a> object containing the following:</p></p><p><p><ol><li><p>states as a List of  (page number and size defined by <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="class in net.corda.core.node.services.vault"><code>class PageSpecification</code></a>)</p></li><li><p>states metadata as a List of <a href="../../../../../net/corda/core/node/services/Vault.StateMetadata.html" title="class in net.corda.core.node.services"><code>class Vault.StateMetadata</code></a> held in the Vault States table.</p></li><li><p>total number of results available if <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="class in net.corda.core.node.services.vault"><code>class PageSpecification</code></a> supplied (otherwise returns -1).</p></li><li><p>status types used in this query: StateStatus.UNCONSUMED, StateStatus.CONSUMED, StateStatus.ALL.</p></li><li><p>other results (aggregate functions with/without using value groups).</p></li></ol></p></p></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd> - <p>if the query cannot be executed for any reason
    (missing criteria or parsing error, paging errors, unsupported query, underlying database error).</p>

<p>Notes
If no <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="class in net.corda.core.node.services.vault"><code>class PageSpecification</code></a> is provided, a maximum of DEFAULT_PAGE_SIZE results will be returned.
API users must specify a <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="class in net.corda.core.node.services.vault"><code>class PageSpecification</code></a> if they are expecting more than DEFAULT_PAGE_SIZE results,
otherwise a <a href="../../../../../net/corda/core/node/services/VaultQueryException.html" title="class in net.corda.core.node.services"><code>exception VaultQueryException</code></a> will be thrown alerting to this condition.
It is the responsibility of the API user to request further pages and/or specify a more suitable <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="class in net.corda.core.node.services.vault"><code>class PageSpecification</code></a>.</p></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="class in net.corda.core.node.services.vault"><code>class QueryCriteria</code></a>, 
<a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="class in net.corda.core.node.services.vault"><code>class PageSpecification</code></a>, 
<a href="../../../../../net/corda/core/node/services/vault/Sort.html" title="class in net.corda.core.node.services.vault"><code>class Sort</code></a>, 
<a href="../../../../../net/corda/core/node/services/Vault.Page.html" title="class in net.corda.core.node.services"><code>class Vault.Page</code></a>, 
<a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="class in net.corda.core.node.services.vault"><code>class PageSpecification</code></a>, 
<a href="../../../../../net/corda/core/node/services/Vault.StateMetadata.html" title="class in net.corda.core.node.services"><code>class Vault.StateMetadata</code></a>, 
<a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="class in net.corda.core.node.services.vault"><code>class PageSpecification</code></a></dd>
</dl>
</li>
</ul>
<a name="Z:Z_trackBy-criteria-paging-sorting-contractStateType-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_trackBy</h4>
<pre>&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;&nbsp;<a href="../../../../../net/corda/core/messaging/DataFeed.html" title="type parameter in DataFeed">DataFeed</a>&lt;net.corda.core.node.services.Vault.Page,net.corda.core.node.services.Vault.Update&gt;&nbsp;_trackBy(<a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria,
                                                                                                                               <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="type parameter in PageSpecification">PageSpecification</a>&nbsp;paging,
                                                                                                                               <a href="../../../../../net/corda/core/node/services/vault/Sort.html" title="type parameter in Sort">Sort</a>&nbsp;sorting,
                                                                                                                               java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType)</pre>
<div class="block"><p><p>Generic vault query function which takes a <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="class in net.corda.core.node.services.vault"><code>class QueryCriteria</code></a> object to define filters,
optional <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="class in net.corda.core.node.services.vault"><code>class PageSpecification</code></a> and optional <a href="../../../../../net/corda/core/node/services/vault/Sort.html" title="class in net.corda.core.node.services.vault"><code>class Sort</code></a> modification criteria (default unsorted),
and returns a <a href="../../../../../net/corda/core/messaging/DataFeed.html" title="class in net.corda.core.messaging"><code>class DataFeed</code></a> object containing:</p></p><p><p><ol><li><p>a snapshot as a <a href="../../../../../net/corda/core/node/services/Vault.Page.html" title="class in net.corda.core.node.services"><code>class Vault.Page</code></a> (described previously in <a href="../../../../../net/corda/core/node/services/VaultService.html#queryBy-contractStateType-"><code>VaultService.queryBy</code></a>).</p></li><li><p>an Observable of <a href="../../../../../net/corda/core/node/services/Vault.Update.html" title="class in net.corda.core.node.services"><code>class Vault.Update</code></a>.</p></li></ol></p></p></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd> - <p>if the query cannot be executed for any reason.</p>

<p>Notes:
    - The snapshot part of the query adheres to the same behaviour as the <a href="../../../../../net/corda/core/node/services/VaultService.html#queryBy-contractStateType-"><code>VaultService.queryBy</code></a> function.
    - The update part of the query currently only supports query criteria filtering by contract
      type(s) and state status(es). CID-731 <> proposes
      adding the complete set of <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="class in net.corda.core.node.services.vault"><code>class QueryCriteria</code></a> filtering.</p></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="class in net.corda.core.node.services.vault"><code>class QueryCriteria</code></a>, 
<a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="class in net.corda.core.node.services.vault"><code>class PageSpecification</code></a>, 
<a href="../../../../../net/corda/core/node/services/vault/Sort.html" title="class in net.corda.core.node.services.vault"><code>class Sort</code></a>, 
<a href="../../../../../net/corda/core/messaging/DataFeed.html" title="class in net.corda.core.messaging"><code>class DataFeed</code></a>, 
<a href="../../../../../net/corda/core/node/services/Vault.Page.html" title="class in net.corda.core.node.services"><code>class Vault.Page</code></a>, 
<a href="../../../../../net/corda/core/node/services/VaultService.html#queryBy-contractStateType-"><code>VaultService.queryBy</code></a>, 
<a href="../../../../../net/corda/core/node/services/Vault.Update.html" title="class in net.corda.core.node.services"><code>class Vault.Update</code></a></dd>
</dl>
</li>
</ul>
<a name="queryBy-contractStateType-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>queryBy</h4>
<pre>&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;&nbsp;<a href="../../../../../net/corda/core/node/services/Vault.Page.html" title="type parameter in Vault.Page">Vault.Page</a>&lt;T&gt;&nbsp;queryBy(java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType)</pre>
</li>
</ul>
<a name="queryBy-contractStateType-criteria-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>queryBy</h4>
<pre>&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;&nbsp;<a href="../../../../../net/corda/core/node/services/Vault.Page.html" title="type parameter in Vault.Page">Vault.Page</a>&lt;T&gt;&nbsp;queryBy(java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
                                                <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria)</pre>
</li>
</ul>
<a name="queryBy-contractStateType-paging-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>queryBy</h4>
<pre>&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;&nbsp;<a href="../../../../../net/corda/core/node/services/Vault.Page.html" title="type parameter in Vault.Page">Vault.Page</a>&lt;T&gt;&nbsp;queryBy(java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
                                                <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="type parameter in PageSpecification">PageSpecification</a>&nbsp;paging)</pre>
</li>
</ul>
<a name="queryBy-contractStateType-criteria-paging-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>queryBy</h4>
<pre>&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;&nbsp;<a href="../../../../../net/corda/core/node/services/Vault.Page.html" title="type parameter in Vault.Page">Vault.Page</a>&lt;T&gt;&nbsp;queryBy(java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
                                                <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria,
                                                <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="type parameter in PageSpecification">PageSpecification</a>&nbsp;paging)</pre>
</li>
</ul>
<a name="queryBy-contractStateType-criteria-sorting-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>queryBy</h4>
<pre>&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;&nbsp;<a href="../../../../../net/corda/core/node/services/Vault.Page.html" title="type parameter in Vault.Page">Vault.Page</a>&lt;T&gt;&nbsp;queryBy(java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
                                                <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria,
                                                <a href="../../../../../net/corda/core/node/services/vault/Sort.html" title="type parameter in Sort">Sort</a>&nbsp;sorting)</pre>
</li>
</ul>
<a name="queryBy-contractStateType-criteria-paging-sorting-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>queryBy</h4>
<pre>&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;&nbsp;<a href="../../../../../net/corda/core/node/services/Vault.Page.html" title="type parameter in Vault.Page">Vault.Page</a>&lt;T&gt;&nbsp;queryBy(java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
                                                <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria,
                                                <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="type parameter in PageSpecification">PageSpecification</a>&nbsp;paging,
                                                <a href="../../../../../net/corda/core/node/services/vault/Sort.html" title="type parameter in Sort">Sort</a>&nbsp;sorting)</pre>
</li>
</ul>
<a name="trackBy-contractStateType-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>trackBy</h4>
<pre>&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;&nbsp;<a href="../../../../../net/corda/core/messaging/DataFeed.html" title="type parameter in DataFeed">DataFeed</a>&lt;net.corda.core.node.services.Vault.Page,net.corda.core.node.services.Vault.Update&gt;&nbsp;trackBy(java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType)</pre>
</li>
</ul>
<a name="trackBy-contractStateType-criteria-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>trackBy</h4>
<pre>&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;&nbsp;<a href="../../../../../net/corda/core/messaging/DataFeed.html" title="type parameter in DataFeed">DataFeed</a>&lt;net.corda.core.node.services.Vault.Page,net.corda.core.node.services.Vault.Update&gt;&nbsp;trackBy(java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
                                                                                                                              <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria)</pre>
</li>
</ul>
<a name="trackBy-contractStateType-paging-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>trackBy</h4>
<pre>&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;&nbsp;<a href="../../../../../net/corda/core/messaging/DataFeed.html" title="type parameter in DataFeed">DataFeed</a>&lt;net.corda.core.node.services.Vault.Page,net.corda.core.node.services.Vault.Update&gt;&nbsp;trackBy(java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
                                                                                                                              <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="type parameter in PageSpecification">PageSpecification</a>&nbsp;paging)</pre>
</li>
</ul>
<a name="trackBy-contractStateType-criteria-paging-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>trackBy</h4>
<pre>&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;&nbsp;<a href="../../../../../net/corda/core/messaging/DataFeed.html" title="type parameter in DataFeed">DataFeed</a>&lt;net.corda.core.node.services.Vault.Page,net.corda.core.node.services.Vault.Update&gt;&nbsp;trackBy(java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
                                                                                                                              <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria,
                                                                                                                              <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="type parameter in PageSpecification">PageSpecification</a>&nbsp;paging)</pre>
</li>
</ul>
<a name="trackBy-contractStateType-criteria-sorting-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>trackBy</h4>
<pre>&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;&nbsp;<a href="../../../../../net/corda/core/messaging/DataFeed.html" title="type parameter in DataFeed">DataFeed</a>&lt;net.corda.core.node.services.Vault.Page,net.corda.core.node.services.Vault.Update&gt;&nbsp;trackBy(java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
                                                                                                                              <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria,
                                                                                                                              <a href="../../../../../net/corda/core/node/services/vault/Sort.html" title="type parameter in Sort">Sort</a>&nbsp;sorting)</pre>
</li>
</ul>
<a name="trackBy-contractStateType-criteria-paging-sorting-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>trackBy</h4>
<pre>&lt;T extends <a href="../../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;&nbsp;<a href="../../../../../net/corda/core/messaging/DataFeed.html" title="type parameter in DataFeed">DataFeed</a>&lt;net.corda.core.node.services.Vault.Page,net.corda.core.node.services.Vault.Update&gt;&nbsp;trackBy(java.lang.Class&lt;? extends T&gt;&nbsp;contractStateType,
                                                                                                                              <a href="../../../../../net/corda/core/node/services/vault/QueryCriteria.html" title="type parameter in QueryCriteria">QueryCriteria</a>&nbsp;criteria,
                                                                                                                              <a href="../../../../../net/corda/core/node/services/vault/PageSpecification.html" title="type parameter in PageSpecification">PageSpecification</a>&nbsp;paging,
                                                                                                                              <a href="../../../../../net/corda/core/node/services/vault/Sort.html" title="type parameter in Sort">Sort</a>&nbsp;sorting)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../net/corda/core/node/services/VaultQueryException.html" title="class in net.corda.core.node.services"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../net/corda/core/node/services/VaultServiceKt.html" title="class in net.corda.core.node.services"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?net/corda/core/node/services/VaultService.html" target="_top">Frames</a></li>
<li><a href="VaultService.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<style>
    @import url("https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,500,600");
    #cookies-eu-banner {
        background-color: rgba(83, 88, 95, 0.9);
        border-radius: 3px;
        color: #fff;
        font-family: 'Source Sans Pro', sans-serif;
        font-size: 13px;
        font-weight: 400;
        left: 3px;
        position: fixed;
        padding: 6px;
        right: 3px;
        text-align: center;
        top: 100px;
        z-index: 1000;
    }
    
    #cookies-eu-banner h3,
    #cookies-eu-banner p {
        color: #fff;
        font-size: 18px;
        letter-spacing: 0;
    }
    
    #cookies-eu-banner h3 {
        font-size: 24px;
        font-style: normal;
        font-weight: 400;
        line-height: 1.2;
        margin: 9px 0 0;
        text-transform: uppercase;
    }
    
    #cookies-eu-banner p {
        margin-bottom: 10px;
        padding: 8px 36px 0;
        text-align: justify;
        line-height: 1.4em;
    }
    
    #cookies-eu-banner fieldset {
        min-width: 0;
        padding: 0;
        margin: 0;
        border: 0;
    }
    
    #cookies-eu-banner legend {
        color: inherit;
        display: block;
        font-size: 18px;
        line-height: inherit;
        max-width: 100%;
        margin-bottom: 16px;
        padding: 0;
        white-space: normal;
        width: 100%;
    }
    
    #cookies-eu-banner a {
        color: #62AAF1;
    }
    
    #cookies-eu-banner .cookies-button-group {
        display: flex;
        justify-content: center;
    }
    
    #cookies-eu-accept,
    #cookies-eu-accept-all {
        background-color: #ec1d24;
        border: none;
        border-radius: 6px;
        color: #fff;
        font-size: 12px;
        font-weight: 600;
        margin: 0 10px 10px;
        max-height: 40px;
        height: 40px;
        line-height: 1.1;
        text-decoration: none;
        width: 150px;
    }
    
    .cookies-checkbox {
        display: inline-block;
        margin: 5px 10px;
    }
    
    .cookies-checkbox label {
        font-size: 16px;
        margin-left: 3px;
    }
    
    @media screen and (min-width: 768px) {
        #cookies-eu-banner {
            bottom: 5px;
            top: inherit;
        }
        #cookies-eu-accept,
        #cookies-eu-accept-all {
            font-size: 14px;
        }
    }
</style>
<div id="cookies-eu-banner" style="display: none;">
    <h3 style="text-transform:none">Your privacy</h3>
    <div class='cookie-flex'>
        <p>
            We use cookies to improve your experience on our site, and to help us understand how people use our documentation. For more detailed information, see our <a href="https://www.r3.com/privacy-policy/">privacy policy</a> and <a href="#">cookie declaration</a>.
        </p>
        <form id='cookie-consent-form'>
            <fieldset>
                <legend>
                    Please select from the following options to continue to our site.
                </legend>
                <div class='cookies-button-group'>
                    <button id="cookies-eu-accept" type="button">
                      Allow cookies selected
                    </button>
                    <button id="cookies-eu-accept-all" type="button">
                      Allow all cookies
                    </button>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="necessary"
                      name="necessary"
                      autocomplete="off"
                      checked
                      disabled />
                        <input
                        name="necessary"
                        type="hidden"
                        value="on"/>
                        <label for="necessary">Necessary</label>
                    </span>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="preferences"
                      name="preferences"
                      autocomplete="off" />
                      <label for="preferences">Preferences</label>
                    </span>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="statistics"
                      name="statistics"
                      autocomplete="off" />
                      <label for="statistics">Statistics</label>
                    </span>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="marketing"
                      name="marketing"
                      autocomplete="off" />
                      <label for="marketing">Marketing</label>
                    </span>
                </div>
            </fieldset>
        </form>
    </div>
</div>
<script class='api-keys'>
    var gaKey = 'UA-87760032-1';
    var algolia_appId = "UX2KMUWFAL";
    var algolia_apiKey = "1fe3367db02689b4aeebc59efad5abaf";
    var algolia_index = "docs.corda.net";
</script>
<script class='cookies-eu-banner'>
    ! function(root, factory) {
        "use strict";
        "function" == typeof define && define.amd ? define([], factory) : "object" == typeof exports ? module.exports = factory() : root.CookiesEuBanner = factory()
    }(window, function() {
        "use strict";
        var document = window.document,
            CookiesEuBanner = function(launchFunction, waitAccept, useLocalStorage, undefined) {
                if (!(this instanceof CookiesEuBanner)) return new CookiesEuBanner(launchFunction);
                this.cookieTimeout = 33696e6, this.bots = /bot|crawler|spider|crawling/i, this.cookieName = "hasConsent", this.trackingCookiesNames = ["__utma", "__utmb", "__utmc", "__utmt", "__utmv", "__utmz", "_ga", "_gat", "_gid"], this.launchFunction = launchFunction, this.waitAccept = waitAccept || !1, this.useLocalStorage = useLocalStorage || !1, this.init()
            };
        return CookiesEuBanner.prototype = {
            init: function() {
                var isBot = this.bots.test(navigator.userAgent);
                navigator.doNotTrack || navigator.msDoNotTrack || window.doNotTrack;
                return isBot || !1 === this.hasConsent() ? (this.removeBanner(0), !1) : !0 === this.hasConsent() ? (this.launchFunction(), !0) : (this.showBanner(), void(this.waitAccept || this.setConsent(!0)))
            },
            showBanner: function() {
                var _this = this,
                    getElementById = document.getElementById.bind(document),
                    banner = getElementById("cookies-eu-banner"),
                    rejectButton = getElementById("cookies-eu-reject"),
                    acceptButton = getElementById("cookies-eu-accept"),
                    moreLink = getElementById("cookies-eu-more"),
                    waitRemove = void 0 === banner.dataset.waitRemove ? 0 : parseInt(banner.dataset.waitRemove),
                    addClickListener = this.addClickListener,
                    removeBanner = _this.removeBanner.bind(_this, waitRemove);
                banner.style.display = "block", moreLink && addClickListener(moreLink, function() {
                    _this.deleteCookie(_this.cookieName)
                }), acceptButton && addClickListener(acceptButton, function() {
                    removeBanner(), _this.setConsent(!0), _this.launchFunction()
                }), rejectButton && addClickListener(rejectButton, function() {
                    removeBanner(), _this.setConsent(!1), _this.trackingCookiesNames.map(_this.deleteCookie)
                })
            },
            setConsent: function(consent) {
                if (this.useLocalStorage) return localStorage.setItem(this.cookieName, consent);
                this.setCookie(this.cookieName, consent)
            },
            hasConsent: function() {
                function isCookieSetTo(value) {
                    return -1 < document.cookie.indexOf(cookieName + "=" + value) || localStorage.getItem(cookieName) === value
                }
                var cookieName = this.cookieName;
                return !!isCookieSetTo("true") || !isCookieSetTo("false") && null
            },
            setCookie: function(name, value) {
                var date = new Date;
                date.setTime(date.getTime() + this.cookieTimeout), document.cookie = name + "=" + value + ";SameSite=Strict;expires=" + date.toGMTString() + ";path=/"
            },
            deleteCookie: function(name) {
                var hostname = document.location.hostname.replace(/^www\./, ""),
                    commonSuffix = "; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/";
                document.cookie = name + "=; domain=." + hostname + commonSuffix, document.cookie = name + "=" + commonSuffix
            },
            addClickListener: function(DOMElement, callback) {
                if (DOMElement.attachEvent) return DOMElement.attachEvent("onclick", callback);
                DOMElement.addEventListener("click", callback)
            },
            removeBanner: function(wait) {
                setTimeout(function() {
                    var banner = document.getElementById("cookies-eu-banner");
                    banner && banner.parentNode && banner.parentNode.removeChild(banner)
                }, wait)
            }
        }, CookiesEuBanner
    });
</script>
<script class='google-analytics'>
    function googleAnalytics() {
        var i, s, o, r, a, m;
        i = window, s = document, o = "script", r = "ga", i.GoogleAnalyticsObject = r, i.ga = i.ga || function() {
            (i.ga.q = i.ga.q || []).push(arguments)
        }, i.ga.l = +new Date, a = s.createElement(o), m = s.getElementsByTagName(o)[0], a.async = 1, a.src = "//www.google-analytics.com/analytics.js", m.parentNode.insertBefore(a, m), window.ga("create", "UA-87760032-1", "auto"), window.ga("send", "pageview")
    }
</script>
<script class='docSearchInit'>
    function docSearchInit() {
        var algoliaOptions;
        document.querySelector("#search-input") && (algoliaOptions = {
            hitsPerPage: 5,
            facetFilters: facetFilters
        }, /404.html/.test(window.location.pathname) && delete algoliaOptions.facetFilters, window.docsearch({
            appId: algolia_appId,
            apiKey: algolia_apiKey,
            indexName: algolia_index,
            inputSelector: "#search-input",
            algoliaOptions: algoliaOptions
        }))
    }
</script>
<script class='corda-cookie-banner'>
    const docsearchLoad = (resolve, reject) => {
        const script = document.createElement('script');
        document.body.appendChild(script);
        script.onload = resolve;
        script.onerror = reject;
        script.async = true;
        script.src = "https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.js";
    };

    class DocsiteCookies {
        constructor() {
            this.name = 'corda_cookie';
            this.cookiesAccepted = {
                set: true,
                necessary: true,
                preferences: false,
                statistics: false,
                marketing: false
            };
            this.form = document.querySelector('#cookie-consent-form');
            this.handleAllCookies();

            new CookiesEuBanner(() => {
                this.cookieBanner();
            }, true);
        }

        handleAllCookies() {
            const acceptButton = document.querySelector('#cookies-eu-accept');
            const allCookiesButton = document.querySelector('#cookies-eu-accept-all');

            allCookiesButton.addEventListener('click', e => {
                e.preventDefault();
                this.allowAllCookies(this.form);
                acceptButton.click();
            });
        }

        cookieBanner() {
            if (!this.checkConsent()) {
                this.formToCookie(this.name, this.form);
                this.setAdditionalServices();
            } else {
                this.setAdditionalServices();
            }
        }

        allowAllCookies(form) {
            let cookiePreferences = form.querySelectorAll('.cookies-checkbox');
            for (let cookie of cookiePreferences) {
                cookie.querySelector('input').checked = true;
            }
        }

        formToCookie(name, form) {
            const thirteenMonthsInMils = 31104000000;

            let date = new Date();
            date.setTime(date.getTime() + thirteenMonthsInMils);

            let formData = new FormData(form);
            for (var pair of formData.entries()) {
                switch (pair[0]) {
                    case "necessary":
                        this.cookiesAccepted.necessary = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    case "preferences":
                        this.cookiesAccepted.preferences = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    case "statistics":
                        this.cookiesAccepted.statistics = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    case "marketing":
                        this.cookiesAccepted.marketing = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    default:
                        break;
                }
            }
            let cookieValue = JSON.stringify(this.cookiesAccepted);

            document.cookie = `${name}=${cookieValue};SameSite=Strict;expires=${date.toGMTString()};path=/`;
        }

        checkConsent() {
            let cookieName = this.name;
            let cookieValue = this.getCookie(cookieName);

            if (cookieValue) {
                if (cookieValue.set === true) {
                    return true;
                } else {
                    return false;
                }
            } else {
                return false;
            }
        }

        getCookie(name) {
            let value = "; " + document.cookie;
            let parts = value.split("; " + name + "=");
            let cValue = "";

            if (parts.length == 2) {
                cValue = parts.pop().split(";").shift();
            }

            if (hasJsonStructure(cValue)) {
                return JSON.parse(cValue);
            } else {
                return cValue;
            }
        }

        setAdditionalServices() {
            let cookieConsent = this.getCookie(this.name);
            for (let [key, value] of Object.entries(cookieConsent)) {
                if (key === 'necessary' && value === true) {
                    new Promise(docsearchLoad)
                        .then(() => {
                            docSearchInit();
                        })
                        .catch(err => console.log(err));
                }
                if (key === 'statistics' && value === true) {
                    googleAnalytics();
                }
            }
        }
    }

    function hasJsonStructure(str) {
        if (typeof str !== 'string') return false;
        try {
            const result = JSON.parse(str);
            const type = Object.prototype.toString.call(result);
            return type === '[object Object]' ||
                type === '[object Array]';
        } catch (err) {
            return false;
        }
    }
</script>
<script class='initialise'>
    new DocsiteCookies();
</script>
</body>
</html>
