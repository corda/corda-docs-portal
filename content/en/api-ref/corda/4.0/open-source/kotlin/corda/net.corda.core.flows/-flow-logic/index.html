<HTML>
<HEAD>
<meta charset="UTF-8">
<title>FlowLogic - corda</title>
<link rel="stylesheet" href="../../../style.css">

<meta name="docsearch:language" content="en">
<meta name="docsearch:version" content="4.0">
<meta name="docsearch:project" content="corda-os">
</head>
<BODY>
<a href="../../index.html">corda</a>&nbsp;/&nbsp;<a href="../index.html">net.corda.core.flows</a>&nbsp;/&nbsp;<a href="./index.html">FlowLogic</a><br/>
<br/>
<h1>FlowLogic</h1>
<code><span class="keyword">abstract</span> <span class="keyword">class </span><span class="identifier">FlowLogic</span><span class="symbol">&lt;</span><span class="keyword">out</span>&nbsp;<span class="identifier">T</span><span class="symbol">&gt;</span></code>
<p>A sub-class of <a href="./index.html">FlowLogic</a> implements a flow using direct, straight line blocking code. Thus you
can write complex flow logic in an ordinary fashion, without having to think about callbacks, restarting after
a node crash, how many instances of your flow there are running and so on.</p>
<p>Invoking the network will cause the call stack to be suspended onto the heap and then serialized to a database using
the Quasar fibers framework. Because of this, if you need access to data that might change over time, you should
request it just-in-time via the <a href="service-hub.html">serviceHub</a> property which is provided. Don't try and keep data you got from a
service across calls to send/receive/sendAndReceive because the world might change in arbitrary ways out from
underneath you, for instance, if the node is restarted or reconfigured!</p>
<p>Additionally, be aware of what data you pin either via the stack or in your <a href="./index.html">FlowLogic</a> implementation. Very large
objects or datasets will hurt performance by increasing the amount of data stored in each checkpoint.</p>
<p>If you'd like to use another FlowLogic class as a component of your own, construct it on the fly and then pass
it to the <a href="sub-flow.html">subFlow</a> method. It will return the result of that flow when it completes.</p>
<p>If your flow (whether it's a top-level flow or a subflow) is supposed to initiate a session with the counterparty
and request they start their counterpart flow, then make sure it's annotated with <a href="../-initiating-flow/index.html">InitiatingFlow</a>. This annotation
also has a version property to allow you to version your flow and enables a node to restrict support for the flow to
that particular version.</p>
<p>Functions that suspend the flow (including all functions on <a href="../-flow-session/index.html">FlowSession</a>) accept a maySkipCheckpoint parameter
defaulting to false, false meaning a checkpoint should always be created on suspend. This parameter may be set to
true which allows the implementation to potentially optimise away the checkpoint, saving a roundtrip to the database.</p>
<p>This option however comes with a big warning sign: Setting the parameter to true requires the flow's code to be
replayable from the previous checkpoint (or start of flow) up until the next checkpoint (or end of flow) in order to
prepare for hard failures. As suspending functions always commit the flow's database transaction regardless of this
parameter the flow must be prepared for scenarios where a previous running of the flow <em>already committed itsrelevant database transactions</em>. Only set this option to true if you know what you're doing.</p>
<h3>Constructors</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="-init-.html">&lt;init&gt;</a></p>
</td>
<td>
<code><span class="identifier">FlowLogic</span><span class="symbol">(</span><span class="symbol">)</span></code>
<p>A sub-class of <a href="./index.html">FlowLogic</a> implements a flow using direct, straight line blocking code. Thus you
can write complex flow logic in an ordinary fashion, without having to think about callbacks, restarting after
a node crash, how many instances of your flow there are running and so on.</p>
</td>
</tr>
</tbody>
</table>
<h3>Properties</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="logger.html">logger</a></p>
</td>
<td>
<code><span class="keyword">val </span><span class="identifier">logger</span><span class="symbol">: </span><span class="identifier">Logger</span></code>
<p>This is where you should log things to.</p>
</td>
</tr>
<tr>
<td>
<p><a href="our-identity.html">ourIdentity</a></p>
</td>
<td>
<code><span class="keyword">val </span><span class="identifier">ourIdentity</span><span class="symbol">: </span><a href="../../net.corda.core.identity/-party/index.html"><span class="identifier">Party</span></a></code>
<p>Specifies the identity to use for this flow. This will be one of the multiple identities that belong to this node.
This is the same as calling <code>ourIdentityAndCert.party</code>.</p>
</td>
</tr>
<tr>
<td>
<p><a href="our-identity-and-cert.html">ourIdentityAndCert</a></p>
</td>
<td>
<code><span class="keyword">val </span><span class="identifier">ourIdentityAndCert</span><span class="symbol">: </span><a href="../../net.corda.core.identity/-party-and-certificate/index.html"><span class="identifier">PartyAndCertificate</span></a></code>
<p>Specifies the identity, with certificate, to use for this flow. This will be one of the multiple identities that
belong to this node.</p>
</td>
</tr>
<tr>
<td>
<p><a href="progress-tracker.html">progressTracker</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">val </span><span class="identifier">progressTracker</span><span class="symbol">: </span><a href="../../net.corda.core.utilities/-progress-tracker/index.html"><span class="identifier">ProgressTracker</span></a><span class="symbol">?</span></code>
<p>Override this to provide a <a href="../../net.corda.core.utilities/-progress-tracker/index.html">ProgressTracker</a>. If one is provided and stepped, the framework will do something
helpful with the progress reports e.g record to the audit service. If this flow is invoked as a subflow of another,
then the tracker will be made a child of the current step in the parent. If it's null, this flow doesn't track
progress.</p>
</td>
</tr>
<tr>
<td>
<p><a href="run-id.html">runId</a></p>
</td>
<td>
<code><span class="keyword">val </span><span class="identifier">runId</span><span class="symbol">: </span><a href="../-state-machine-run-id/index.html"><span class="identifier">StateMachineRunId</span></a></code>
<p>Returns a wrapped <a href="http://docs.oracle.com/javase/8/docs/api/java/util/UUID.html">java.util.UUID</a> object that identifies this state machine run (i.e. subflows have the same
identifier as their parents).</p>
</td>
</tr>
<tr>
<td>
<p><a href="service-hub.html">serviceHub</a></p>
</td>
<td>
<code><span class="keyword">val </span><span class="identifier">serviceHub</span><span class="symbol">: </span><a href="../../net.corda.core.node/-service-hub/index.html"><span class="identifier">ServiceHub</span></a></code>
<p>Provides access to big, heavy classes that may be reconstructed from time to time, e.g. across restarts. It is
only available once the flow has started, which means it cannot be accessed in the constructor. Either
access this lazily or from inside <a href="call.html">call</a>.</p>
</td>
</tr>
</tbody>
</table>
<h3>Functions</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="call.html">call</a></p>
</td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">fun </span><span class="identifier">call</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="index.html#T"><span class="identifier">T</span></a></code>
<p>This is where you fill out your business logic.</p>
</td>
</tr>
<tr>
<td>
<p><a href="check-flow-permission.html">checkFlowPermission</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">checkFlowPermission</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.flows.FlowLogic$checkFlowPermission(kotlin.String, kotlin.collections.Map((kotlin.String, )))/permissionName">permissionName</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.core.flows.FlowLogic$checkFlowPermission(kotlin.String, kotlin.collections.Map((kotlin.String, )))/extraAuditData">extraAuditData</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-map/index.html"><span class="identifier">Map</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">,</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">&gt;</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code>
<p>Flows can call this method to ensure that the active FlowInitiator is authorised for a particular action.
This provides fine grained control over application level permissions, when RPC control over starting the flow is insufficient,
or the permission is runtime dependent upon the choices made inside long lived flow code.
For example some users may have restricted limits on how much cash they can transfer, or whether they can change certain fields.
An audit event is always recorded whenever this method is used.
If the permission is not granted for the FlowInitiator a FlowException is thrown.</p>
</td>
</tr>
<tr>
<td>
<p><a href="flow-stack-snapshot.html">flowStackSnapshot</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">flowStackSnapshot</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="../-flow-stack-snapshot/index.html"><span class="identifier">FlowStackSnapshot</span></a><span class="symbol">?</span></code>
<p>Returns a shallow copy of the Quasar stack frames at the time of call to <a href="flow-stack-snapshot.html">flowStackSnapshot</a>. Use this to inspect
what objects would be serialised at the time of call to a suspending action (e.g. send/receive).
Note: This logic is only available during tests and is not meant to be used during the production deployment.
Therefore the default implementation does nothing.</p>
</td>
</tr>
<tr>
<td>
<p><a href="get-flow-info.html">getFlowInfo</a></p>
</td>
<td>
<code><span class="keyword">fun </span><s><span class="identifier">getFlowInfo</span></s><span class="symbol">(</span><span class="identifier" id="net.corda.core.flows.FlowLogic$getFlowInfo(net.corda.core.identity.Party)/otherParty">otherParty</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.identity/-party/index.html"><span class="identifier">Party</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="../-flow-info/index.html"><span class="identifier">FlowInfo</span></a></code>
<p>Returns a <a href="../-flow-info/index.html">FlowInfo</a> object describing the flow <a href="get-flow-info.html#net.corda.core.flows.FlowLogic$getFlowInfo(net.corda.core.identity.Party)/otherParty">otherParty</a> is using. With <a href="../-flow-info/flow-version.html">FlowInfo.flowVersion</a> it
provides the necessary information needed for the evolution of flows and enabling backwards compatibility.</p>
</td>
</tr>
<tr>
<td>
<p><a href="initiate-flow.html">initiateFlow</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">initiateFlow</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.flows.FlowLogic$initiateFlow(net.corda.core.identity.Party)/party">party</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.identity/-party/index.html"><span class="identifier">Party</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="../-flow-session/index.html"><span class="identifier">FlowSession</span></a></code>
<p>Creates a communication session with <a href="initiate-flow.html#net.corda.core.flows.FlowLogic$initiateFlow(net.corda.core.identity.Party)/party">party</a>. Subsequently you may send/receive using this session object. Note
that this function does not communicate in itself, the counter-flow will be kicked off by the first send/receive.</p>
</td>
</tr>
<tr>
<td>
<p><a href="persist-flow-stack-snapshot.html">persistFlowStackSnapshot</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">persistFlowStackSnapshot</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code>
<p>Persists a shallow copy of the Quasar stack frames at the time of call to <a href="persist-flow-stack-snapshot.html">persistFlowStackSnapshot</a>.
Use this to track the monitor evolution of the quasar stack values during the flow execution.
The flow stack snapshot is stored in a file located in {baseDir}/flowStackSnapshots/YYYY-MM-DD/{flowId}/
where baseDir is the node running directory and flowId is the flow unique identifier generated by the platform.</p>
</td>
</tr>
<tr>
<td>
<p><a href="receive.html">receive</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="symbol">&lt;</span><span class="identifier">R</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html"><span class="identifier">Any</span></a><span class="symbol">&gt;</span> <s><span class="identifier">receive</span></s><span class="symbol">(</span><span class="identifier" id="net.corda.core.flows.FlowLogic$receive(net.corda.core.identity.Party)/otherParty">otherParty</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.identity/-party/index.html"><span class="identifier">Party</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="../../net.corda.core.utilities/-untrustworthy-data/index.html"><span class="identifier">UntrustworthyData</span></a><span class="symbol">&lt;</span><a href="receive.html#R"><span class="identifier">R</span></a><span class="symbol">&gt;</span></code>
<p>Suspends until the specified <a href="receive.html#net.corda.core.flows.FlowLogic$receive(net.corda.core.identity.Party)/otherParty">otherParty</a> sends us a message of type <a href="receive.html#R">R</a>.</p>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="symbol">&lt;</span><span class="identifier">R</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html"><span class="identifier">Any</span></a><span class="symbol">&gt;</span> <s><span class="identifier">receive</span></s><span class="symbol">(</span><span class="identifier" id="net.corda.core.flows.FlowLogic$receive(java.lang.Class((net.corda.core.flows.FlowLogic.receive.R)), net.corda.core.identity.Party)/receiveType">receiveType</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html"><span class="identifier">Class</span></a><span class="symbol">&lt;</span><a href="receive.html#R"><span class="identifier">R</span></a><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.core.flows.FlowLogic$receive(java.lang.Class((net.corda.core.flows.FlowLogic.receive.R)), net.corda.core.identity.Party)/otherParty">otherParty</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.identity/-party/index.html"><span class="identifier">Party</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="../../net.corda.core.utilities/-untrustworthy-data/index.html"><span class="identifier">UntrustworthyData</span></a><span class="symbol">&lt;</span><a href="receive.html#R"><span class="identifier">R</span></a><span class="symbol">&gt;</span></code>
<p>Suspends until the specified <a href="receive.html#net.corda.core.flows.FlowLogic$receive(java.lang.Class((net.corda.core.flows.FlowLogic.receive.R)), net.corda.core.identity.Party)/otherParty">otherParty</a> sends us a message of type <a href="receive.html#net.corda.core.flows.FlowLogic$receive(java.lang.Class((net.corda.core.flows.FlowLogic.receive.R)), net.corda.core.identity.Party)/receiveType">receiveType</a>.</p>
</td>
</tr>
<tr>
<td>
<p><a href="receive-all.html">receiveAll</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="symbol">&lt;</span><span class="identifier">R</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html"><span class="identifier">Any</span></a><span class="symbol">&gt;</span> <span class="identifier">receiveAll</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.flows.FlowLogic$receiveAll(java.lang.Class((net.corda.core.flows.FlowLogic.receiveAll.R)), kotlin.collections.List((net.corda.core.flows.FlowSession)), kotlin.Boolean)/receiveType">receiveType</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html"><span class="identifier">Class</span></a><span class="symbol">&lt;</span><a href="receive-all.html#R"><span class="identifier">R</span></a><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.core.flows.FlowLogic$receiveAll(java.lang.Class((net.corda.core.flows.FlowLogic.receiveAll.R)), kotlin.collections.List((net.corda.core.flows.FlowSession)), kotlin.Boolean)/sessions">sessions</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html"><span class="identifier">List</span></a><span class="symbol">&lt;</span><a href="../-flow-session/index.html"><span class="identifier">FlowSession</span></a><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.core.flows.FlowLogic$receiveAll(java.lang.Class((net.corda.core.flows.FlowLogic.receiveAll.R)), kotlin.collections.List((net.corda.core.flows.FlowSession)), kotlin.Boolean)/maySkipCheckpoint">maySkipCheckpoint</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html"><span class="identifier">Boolean</span></a>&nbsp;<span class="symbol">=</span>&nbsp;false<span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html"><span class="identifier">List</span></a><span class="symbol">&lt;</span><a href="../../net.corda.core.utilities/-untrustworthy-data/index.html"><span class="identifier">UntrustworthyData</span></a><span class="symbol">&lt;</span><a href="receive-all.html#R"><span class="identifier">R</span></a><span class="symbol">&gt;</span><span class="symbol">&gt;</span></code>
<p>Suspends until a message has been received for each session in the specified <a href="receive-all.html#net.corda.core.flows.FlowLogic$receiveAll(java.lang.Class((net.corda.core.flows.FlowLogic.receiveAll.R)), kotlin.collections.List((net.corda.core.flows.FlowSession)), kotlin.Boolean)/sessions">sessions</a>.</p>
</td>
</tr>
<tr>
<td>
<p><a href="receive-all-map.html">receiveAllMap</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">receiveAllMap</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.flows.FlowLogic$receiveAllMap(kotlin.collections.Map((net.corda.core.flows.FlowSession, java.lang.Class((kotlin.Any)))), kotlin.Boolean)/sessions">sessions</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-map/index.html"><span class="identifier">Map</span></a><span class="symbol">&lt;</span><a href="../-flow-session/index.html"><span class="identifier">FlowSession</span></a><span class="symbol">,</span>&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html"><span class="identifier">Class</span></a><span class="symbol">&lt;</span><span class="keyword">out</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html"><span class="identifier">Any</span></a><span class="symbol">&gt;</span><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.core.flows.FlowLogic$receiveAllMap(kotlin.collections.Map((net.corda.core.flows.FlowSession, java.lang.Class((kotlin.Any)))), kotlin.Boolean)/maySkipCheckpoint">maySkipCheckpoint</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html"><span class="identifier">Boolean</span></a>&nbsp;<span class="symbol">=</span>&nbsp;false<span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-map/index.html"><span class="identifier">Map</span></a><span class="symbol">&lt;</span><a href="../-flow-session/index.html"><span class="identifier">FlowSession</span></a><span class="symbol">,</span>&nbsp;<a href="../../net.corda.core.utilities/-untrustworthy-data/index.html"><span class="identifier">UntrustworthyData</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html"><span class="identifier">Any</span></a><span class="symbol">&gt;</span><span class="symbol">&gt;</span></code>
<p>Suspends until a message has been received for each session in the specified <a href="receive-all-map.html#net.corda.core.flows.FlowLogic$receiveAllMap(kotlin.collections.Map((net.corda.core.flows.FlowSession, java.lang.Class((kotlin.Any)))), kotlin.Boolean)/sessions">sessions</a>.</p>
</td>
</tr>
<tr>
<td>
<p><a href="record-audit-event.html">recordAuditEvent</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">recordAuditEvent</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.flows.FlowLogic$recordAuditEvent(kotlin.String, kotlin.String, kotlin.collections.Map((kotlin.String, )))/eventType">eventType</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.core.flows.FlowLogic$recordAuditEvent(kotlin.String, kotlin.String, kotlin.collections.Map((kotlin.String, )))/comment">comment</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.core.flows.FlowLogic$recordAuditEvent(kotlin.String, kotlin.String, kotlin.collections.Map((kotlin.String, )))/extraAuditData">extraAuditData</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-map/index.html"><span class="identifier">Map</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">,</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">&gt;</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code>
<p>Flows can call this method to record application level flow audit events</p>
</td>
</tr>
<tr>
<td>
<p><a href="send.html">send</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><s><span class="identifier">send</span></s><span class="symbol">(</span><span class="identifier" id="net.corda.core.flows.FlowLogic$send(net.corda.core.identity.Party, kotlin.Any)/otherParty">otherParty</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.identity/-party/index.html"><span class="identifier">Party</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.core.flows.FlowLogic$send(net.corda.core.identity.Party, kotlin.Any)/payload">payload</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html"><span class="identifier">Any</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code>
<p>Queues the given <a href="send.html#net.corda.core.flows.FlowLogic$send(net.corda.core.identity.Party, kotlin.Any)/payload">payload</a> for sending to the <a href="send.html#net.corda.core.flows.FlowLogic$send(net.corda.core.identity.Party, kotlin.Any)/otherParty">otherParty</a> and continues without suspending.</p>
</td>
</tr>
<tr>
<td>
<p><a href="send-and-receive.html">sendAndReceive</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="symbol">&lt;</span><span class="identifier">R</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html"><span class="identifier">Any</span></a><span class="symbol">&gt;</span> <s><span class="identifier">sendAndReceive</span></s><span class="symbol">(</span><span class="identifier" id="net.corda.core.flows.FlowLogic$sendAndReceive(net.corda.core.identity.Party, kotlin.Any)/otherParty">otherParty</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.identity/-party/index.html"><span class="identifier">Party</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.core.flows.FlowLogic$sendAndReceive(net.corda.core.identity.Party, kotlin.Any)/payload">payload</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html"><span class="identifier">Any</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="../../net.corda.core.utilities/-untrustworthy-data/index.html"><span class="identifier">UntrustworthyData</span></a><span class="symbol">&lt;</span><a href="send-and-receive.html#R"><span class="identifier">R</span></a><span class="symbol">&gt;</span></code>
<p>Serializes and queues the given <a href="send-and-receive.html#net.corda.core.flows.FlowLogic$sendAndReceive(net.corda.core.identity.Party, kotlin.Any)/payload">payload</a> object for sending to the <a href="send-and-receive.html#net.corda.core.flows.FlowLogic$sendAndReceive(net.corda.core.identity.Party, kotlin.Any)/otherParty">otherParty</a>. Suspends until a response
is received, which must be of the given <a href="send-and-receive.html#R">R</a> type.</p>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="symbol">&lt;</span><span class="identifier">R</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html"><span class="identifier">Any</span></a><span class="symbol">&gt;</span> <s><span class="identifier">sendAndReceive</span></s><span class="symbol">(</span><span class="identifier" id="net.corda.core.flows.FlowLogic$sendAndReceive(java.lang.Class((net.corda.core.flows.FlowLogic.sendAndReceive.R)), net.corda.core.identity.Party, kotlin.Any)/receiveType">receiveType</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html"><span class="identifier">Class</span></a><span class="symbol">&lt;</span><a href="send-and-receive.html#R"><span class="identifier">R</span></a><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.core.flows.FlowLogic$sendAndReceive(java.lang.Class((net.corda.core.flows.FlowLogic.sendAndReceive.R)), net.corda.core.identity.Party, kotlin.Any)/otherParty">otherParty</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.identity/-party/index.html"><span class="identifier">Party</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.core.flows.FlowLogic$sendAndReceive(java.lang.Class((net.corda.core.flows.FlowLogic.sendAndReceive.R)), net.corda.core.identity.Party, kotlin.Any)/payload">payload</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html"><span class="identifier">Any</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="../../net.corda.core.utilities/-untrustworthy-data/index.html"><span class="identifier">UntrustworthyData</span></a><span class="symbol">&lt;</span><a href="send-and-receive.html#R"><span class="identifier">R</span></a><span class="symbol">&gt;</span></code>
<p>Serializes and queues the given <a href="send-and-receive.html#net.corda.core.flows.FlowLogic$sendAndReceive(java.lang.Class((net.corda.core.flows.FlowLogic.sendAndReceive.R)), net.corda.core.identity.Party, kotlin.Any)/payload">payload</a> object for sending to the <a href="send-and-receive.html#net.corda.core.flows.FlowLogic$sendAndReceive(java.lang.Class((net.corda.core.flows.FlowLogic.sendAndReceive.R)), net.corda.core.identity.Party, kotlin.Any)/otherParty">otherParty</a>. Suspends until a response
is received, which must be of the given <a href="send-and-receive.html#net.corda.core.flows.FlowLogic$sendAndReceive(java.lang.Class((net.corda.core.flows.FlowLogic.sendAndReceive.R)), net.corda.core.identity.Party, kotlin.Any)/receiveType">receiveType</a>. Remember that when receiving data from other parties the data
should not be trusted until it's been thoroughly verified for consistency and that all expectations are
satisfied, as a malicious peer may send you subtly corrupted data in order to exploit your code.</p>
</td>
</tr>
<tr>
<td>
<p><a href="sub-flow.html">subFlow</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="symbol">&lt;</span><span class="identifier">R</span><span class="symbol">&gt;</span> <span class="identifier">subFlow</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.flows.FlowLogic$subFlow(net.corda.core.flows.FlowLogic((net.corda.core.flows.FlowLogic.subFlow.R)))/subLogic">subLogic</span><span class="symbol">:</span>&nbsp;<a href="./index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><a href="sub-flow.html#R"><span class="identifier">R</span></a><span class="symbol">&gt;</span><span class="symbol">)</span><span class="symbol">: </span><a href="sub-flow.html#R"><span class="identifier">R</span></a></code>
<p>Invokes the given subflow. This function returns once the subflow completes successfully with the result
returned by that subflow's <a href="call.html">call</a> method. If the subflow has a progress tracker, it is attached to the
current step in this flow's progress tracker.</p>
</td>
</tr>
<tr>
<td>
<p><a href="track.html">track</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">track</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="../../net.corda.core.messaging/-data-feed/index.html"><span class="identifier">DataFeed</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">,</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">&gt;</span><span class="symbol">?</span></code>
<p>Returns a pair of the current progress step, as a string, and an observable of stringified changes to the
<a href="progress-tracker.html">progressTracker</a>.</p>
</td>
</tr>
<tr>
<td>
<p><a href="track-steps-tree.html">trackStepsTree</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">trackStepsTree</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="../../net.corda.core.messaging/-data-feed/index.html"><span class="identifier">DataFeed</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html"><span class="identifier">List</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-pair/index.html"><span class="identifier">Pair</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/index.html"><span class="identifier">Int</span></a><span class="symbol">,</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">&gt;</span><span class="symbol">&gt;</span><span class="symbol">,</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html"><span class="identifier">List</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-pair/index.html"><span class="identifier">Pair</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/index.html"><span class="identifier">Int</span></a><span class="symbol">,</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">&gt;</span><span class="symbol">&gt;</span><span class="symbol">&gt;</span><span class="symbol">?</span></code>
<p>Returns a pair of the current steps tree of current <a href="progress-tracker.html">progressTracker</a> as pairs of zero-based depth and stringified step
label and observable of upcoming changes to the structure.</p>
</td>
</tr>
<tr>
<td>
<p><a href="track-steps-tree-index.html">trackStepsTreeIndex</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">trackStepsTreeIndex</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="../../net.corda.core.messaging/-data-feed/index.html"><span class="identifier">DataFeed</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/index.html"><span class="identifier">Int</span></a><span class="symbol">,</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/index.html"><span class="identifier">Int</span></a><span class="symbol">&gt;</span><span class="symbol">?</span></code>
<p>Returns a pair of the current progress step index (as integer) in steps tree of current <a href="progress-tracker.html">progressTracker</a>, and an observable
of its upcoming changes.</p>
</td>
</tr>
<tr>
<td>
<p><a href="wait-for-ledger-commit.html">waitForLedgerCommit</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">waitForLedgerCommit</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.flows.FlowLogic$waitForLedgerCommit(net.corda.core.crypto.SecureHash, kotlin.Boolean)/hash">hash</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.crypto/-secure-hash/index.html"><span class="identifier">SecureHash</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.core.flows.FlowLogic$waitForLedgerCommit(net.corda.core.crypto.SecureHash, kotlin.Boolean)/maySkipCheckpoint">maySkipCheckpoint</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html"><span class="identifier">Boolean</span></a>&nbsp;<span class="symbol">=</span>&nbsp;false<span class="symbol">)</span><span class="symbol">: </span><a href="../../net.corda.core.transactions/-signed-transaction/index.html"><span class="identifier">SignedTransaction</span></a></code>
<p>Suspends the flow until the transaction with the specified ID is received, successfully verified and
sent to the vault for processing. Note that this call suspends until the transaction is considered
valid by the local node, but that doesn't imply the vault will consider it relevant.</p>
</td>
</tr>
<tr>
<td>
<p><a href="wait-for-state-consumption.html">waitForStateConsumption</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">waitForStateConsumption</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.flows.FlowLogic$waitForStateConsumption(kotlin.collections.Set((net.corda.core.contracts.StateRef)))/stateRefs">stateRefs</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-set/index.html"><span class="identifier">Set</span></a><span class="symbol">&lt;</span><a href="../../net.corda.core.contracts/-state-ref/index.html"><span class="identifier">StateRef</span></a><span class="symbol">&gt;</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code>
<p>Suspends the current flow until all the provided <a href="../../net.corda.core.contracts/-state-ref/index.html">StateRef</a>s have been consumed.</p>
</td>
</tr>
</tbody>
</table>
<h3>Companion Object Properties</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="current-top-level.html">currentTopLevel</a></p>
</td>
<td>
<code><span class="keyword">val </span><span class="identifier">currentTopLevel</span><span class="symbol">: </span><a href="./index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><span class="identifier">*</span><span class="symbol">&gt;</span><span class="symbol">?</span></code>
<p>Return the outermost <a href="./index.html">FlowLogic</a> instance, or null if not in a flow.</p>
</td>
</tr>
</tbody>
</table>
<h3>Companion Object Functions</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="sleep.html">sleep</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">sleep</span><span class="symbol">(</span><span class="identifier" id="net.corda.core.flows.FlowLogic.Companion$sleep(java.time.Duration, kotlin.Boolean)/duration">duration</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/time/Duration.html"><span class="identifier">Duration</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.core.flows.FlowLogic.Companion$sleep(java.time.Duration, kotlin.Boolean)/maySkipCheckpoint">maySkipCheckpoint</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html"><span class="identifier">Boolean</span></a>&nbsp;<span class="symbol">=</span>&nbsp;false<span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code>
<p>If on a flow, suspends the flow and only wakes it up after at least <a href="sleep.html#net.corda.core.flows.FlowLogic.Companion$sleep(java.time.Duration, kotlin.Boolean)/duration">duration</a> time has passed.  Otherwise,
just sleep for <a href="sleep.html#net.corda.core.flows.FlowLogic.Companion$sleep(java.time.Duration, kotlin.Boolean)/duration">duration</a>.  This sleep function is not designed to aid scheduling, for which you should
consider using <a href="../../net.corda.core.contracts/-schedulable-state/index.html">net.corda.core.contracts.SchedulableState</a>.  It is designed to aid with managing contention
for which you have not managed via another means.</p>
</td>
</tr>
</tbody>
</table>
<h3>Extension Functions</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="../../net.corda.core.utilities/kotlin.-any/context-logger.html">contextLogger</a></p>
</td>
<td>
<code><span class="keyword">fun </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html"><span class="identifier">Any</span></a><span class="symbol">.</span><span class="identifier">contextLogger</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Logger</span></code>
<p>When called from a companion object, returns the logger for the enclosing class.</p>
</td>
</tr>
</tbody>
</table>
<h3>Inheritors</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="../../net.corda.finance.flows/-abstract-cash-flow/index.html">AbstractCashFlow</a></p>
</td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">class </span><span class="identifier">AbstractCashFlow</span><span class="symbol">&lt;</span><span class="keyword">out</span>&nbsp;<span class="identifier">T</span><span class="symbol">&gt;</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="./index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><a href="../../net.corda.finance.flows/-abstract-cash-flow/index.html#T"><span class="identifier">T</span></a><span class="symbol">&gt;</span></code>
<p>Initiates a flow that produces an Issue/Move or Exit Cash transaction.</p>
</td>
</tr>
<tr>
<td>
<p><a href="../-abstract-state-replacement-flow/-acceptor/index.html">Acceptor</a></p>
</td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">class </span><span class="identifier">Acceptor</span><span class="symbol">&lt;</span><span class="keyword">in</span>&nbsp;<span class="identifier">T</span><span class="symbol">&gt;</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="./index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Void.html"><span class="identifier">Void</span></a><span class="symbol">?</span><span class="symbol">&gt;</span></code></td>
</tr>
<tr>
<td>
<p><a href="../-contract-upgrade-flow/-authorise/index.html">Authorise</a></p>
</td>
<td>
<code><span class="keyword">class </span><span class="identifier">Authorise</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="./index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Void.html"><span class="identifier">Void</span></a><span class="symbol">?</span><span class="symbol">&gt;</span></code>
<p>Authorise a contract state upgrade.</p>
</td>
</tr>
<tr>
<td>
<p><a href="../../net.corda.finance.flows/-two-party-trade-flow/-buyer/index.html">Buyer</a></p>
</td>
<td>
<code><span class="keyword">class </span><span class="identifier">Buyer</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="./index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><a href="../../net.corda.core.transactions/-signed-transaction/index.html"><span class="identifier">SignedTransaction</span></a><span class="symbol">&gt;</span></code></td>
</tr>
<tr>
<td>
<p><a href="../../net.corda.finance.flows/-cash-exit-responder-flow/index.html">CashExitResponderFlow</a></p>
</td>
<td>
<code><span class="keyword">class </span><span class="identifier">CashExitResponderFlow</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="./index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a><span class="symbol">&gt;</span></code></td>
</tr>
<tr>
<td>
<p><a href="../../net.corda.finance.flows/-cash-payment-receiver-flow/index.html">CashPaymentReceiverFlow</a></p>
</td>
<td>
<code><span class="keyword">class </span><span class="identifier">CashPaymentReceiverFlow</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="./index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a><span class="symbol">&gt;</span></code></td>
</tr>
<tr>
<td>
<p><a href="../-collect-signature-flow/index.html">CollectSignatureFlow</a></p>
</td>
<td>
<code><span class="keyword">class </span><span class="identifier">CollectSignatureFlow</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="./index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html"><span class="identifier">List</span></a><span class="symbol">&lt;</span><a href="../../net.corda.core.crypto/-transaction-signature/index.html"><span class="identifier">TransactionSignature</span></a><span class="symbol">&gt;</span><span class="symbol">&gt;</span></code>
<p>Get and check the required signature.</p>
</td>
</tr>
<tr>
<td>
<p><a href="../-collect-signatures-flow/index.html">CollectSignaturesFlow</a></p>
</td>
<td>
<code><span class="keyword">class </span><span class="identifier">CollectSignaturesFlow</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="./index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><a href="../../net.corda.core.transactions/-signed-transaction/index.html"><span class="identifier">SignedTransaction</span></a><span class="symbol">&gt;</span></code>
<p>The <a href="../-collect-signatures-flow/index.html">CollectSignaturesFlow</a> is used to automate the collection of counterparty signatures for a given transaction.</p>
</td>
</tr>
<tr>
<td>
<p><a href="../-data-vending-flow/index.html">DataVendingFlow</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">class </span><span class="identifier">DataVendingFlow</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="./index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Void.html"><span class="identifier">Void</span></a><span class="symbol">?</span><span class="symbol">&gt;</span></code></td>
</tr>
<tr>
<td>
<p><a href="../-contract-upgrade-flow/-deauthorise/index.html">Deauthorise</a></p>
</td>
<td>
<code><span class="keyword">class </span><span class="identifier">Deauthorise</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="./index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Void.html"><span class="identifier">Void</span></a><span class="symbol">?</span><span class="symbol">&gt;</span></code>
<p>Deauthorise a contract state upgrade.
This will remove the upgrade authorisation from persistent store (and prevent any further upgrade)</p>
</td>
</tr>
<tr>
<td>
<p><a href="../-finality-flow/index.html">FinalityFlow</a></p>
</td>
<td>
<code><span class="keyword">class </span><span class="identifier">FinalityFlow</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="./index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><a href="../../net.corda.core.transactions/-signed-transaction/index.html"><span class="identifier">SignedTransaction</span></a><span class="symbol">&gt;</span></code>
<p>Verifies the given transaction, then sends it to the named notary. If the notary agrees that the transaction
is acceptable then it is from that point onwards committed to the ledger, and will be written through to the
vault. Additionally it will be distributed to the parties reflected in the participants list of the states.</p>
</td>
</tr>
<tr>
<td>
<p><a href="../-abstract-state-replacement-flow/-instigator/index.html">Instigator</a></p>
</td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">class </span><span class="identifier">Instigator</span><span class="symbol">&lt;</span><span class="keyword">out</span>&nbsp;<span class="identifier">S</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.contracts/-contract-state/index.html"><span class="identifier">ContractState</span></a><span class="symbol">, </span><span class="keyword">out</span>&nbsp;<span class="identifier">T</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.contracts/-contract-state/index.html"><span class="identifier">ContractState</span></a><span class="symbol">, </span><span class="keyword">out</span>&nbsp;<span class="identifier">M</span><span class="symbol">&gt;</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="./index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><a href="../../net.corda.core.contracts/-state-and-ref/index.html"><span class="identifier">StateAndRef</span></a><span class="symbol">&lt;</span><a href="../-abstract-state-replacement-flow/-instigator/index.html#T"><span class="identifier">T</span></a><span class="symbol">&gt;</span><span class="symbol">&gt;</span></code>
<p>The <a href="../-abstract-state-replacement-flow/-instigator/index.html">Instigator</a> assembles the transaction for state replacement and sends out change proposals to all participants
(<a href="../-abstract-state-replacement-flow/-acceptor/index.html">Acceptor</a>) of that state. If participants agree to the proposed change, they each sign the transaction.
Finally, <a href="../-abstract-state-replacement-flow/-instigator/index.html">Instigator</a> sends the transaction containing all participants' signatures to the notary for signature, and
then back to each participant so they can record it and use the new updated state for future transactions.</p>
</td>
</tr>
<tr>
<td>
<p><a href="../../net.corda.finance.flows/-two-party-deal-flow/-primary/index.html">Primary</a></p>
</td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">class </span><span class="identifier">Primary</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="./index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><a href="../../net.corda.core.transactions/-signed-transaction/index.html"><span class="identifier">SignedTransaction</span></a><span class="symbol">&gt;</span></code>
<p>Abstracted bilateral deal flow participant that initiates communication/handshake.</p>
</td>
</tr>
<tr>
<td>
<p><a href="../-receive-finality-flow/index.html">ReceiveFinalityFlow</a></p>
</td>
<td>
<code><span class="keyword">class </span><span class="identifier">ReceiveFinalityFlow</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="./index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><a href="../../net.corda.core.transactions/-signed-transaction/index.html"><span class="identifier">SignedTransaction</span></a><span class="symbol">&gt;</span></code>
<p>The receiving counterpart to <a href="../-finality-flow/index.html">FinalityFlow</a>.</p>
</td>
</tr>
<tr>
<td>
<p><a href="../-receive-state-and-ref-flow/index.html">ReceiveStateAndRefFlow</a></p>
</td>
<td>
<code><span class="keyword">class </span><span class="identifier">ReceiveStateAndRefFlow</span><span class="symbol">&lt;</span><span class="keyword">out</span>&nbsp;<span class="identifier">T</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.contracts/-contract-state/index.html"><span class="identifier">ContractState</span></a><span class="symbol">&gt;</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="./index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html"><span class="identifier">List</span></a><span class="symbol">&lt;</span><a href="../../net.corda.core.contracts/-state-and-ref/index.html"><span class="identifier">StateAndRef</span></a><span class="symbol">&lt;</span><a href="../-receive-state-and-ref-flow/index.html#T"><span class="identifier">T</span></a><span class="symbol">&gt;</span><span class="symbol">&gt;</span><span class="symbol">&gt;</span></code>
<p>The <a href="../-receive-state-and-ref-flow/index.html">ReceiveStateAndRefFlow</a> should be called in response to the <a href="../-send-state-and-ref-flow/index.html">SendStateAndRefFlow</a>.</p>
</td>
</tr>
<tr>
<td>
<p><a href="../-receive-transaction-flow/index.html">ReceiveTransactionFlow</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">class </span><span class="identifier">ReceiveTransactionFlow</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="./index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><a href="../../net.corda.core.transactions/-signed-transaction/index.html"><span class="identifier">SignedTransaction</span></a><span class="symbol">&gt;</span></code>
<p>The <a href="../-receive-transaction-flow/index.html">ReceiveTransactionFlow</a> should be called in response to the <a href="../-send-transaction-flow/index.html">SendTransactionFlow</a>.</p>
</td>
</tr>
<tr>
<td>
<p><a href="../../net.corda.finance.flows/-two-party-deal-flow/-secondary/index.html">Secondary</a></p>
</td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">class </span><span class="identifier">Secondary</span><span class="symbol">&lt;</span><span class="identifier">U</span><span class="symbol">&gt;</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="./index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><a href="../../net.corda.core.transactions/-signed-transaction/index.html"><span class="identifier">SignedTransaction</span></a><span class="symbol">&gt;</span></code>
<p>Abstracted bilateral deal flow participant that is recipient of initial communication.</p>
</td>
</tr>
<tr>
<td>
<p><a href="../../net.corda.finance.flows/-two-party-trade-flow/-seller/index.html">Seller</a></p>
</td>
<td>
<code><span class="keyword">class </span><span class="identifier">Seller</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="./index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><a href="../../net.corda.core.transactions/-signed-transaction/index.html"><span class="identifier">SignedTransaction</span></a><span class="symbol">&gt;</span></code></td>
</tr>
<tr>
<td>
<p><a href="../-sign-transaction-flow/index.html">SignTransactionFlow</a></p>
</td>
<td>
<code><span class="keyword">abstract</span> <span class="keyword">class </span><span class="identifier">SignTransactionFlow</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="./index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><a href="../../net.corda.core.transactions/-signed-transaction/index.html"><span class="identifier">SignedTransaction</span></a><span class="symbol">&gt;</span></code>
<p>The <a href="../-sign-transaction-flow/index.html">SignTransactionFlow</a> should be called in response to the <a href="../-collect-signatures-flow/index.html">CollectSignaturesFlow</a>. It automates the signing of
a transaction providing the transaction:</p>
</td>
</tr>
<tr>
<td>
<p><a href="../-with-referenced-states-flow/index.html">WithReferencedStatesFlow</a></p>
</td>
<td>
<code><span class="keyword">class </span><span class="identifier">WithReferencedStatesFlow</span><span class="symbol">&lt;</span><span class="identifier">T</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html"><span class="identifier">Any</span></a><span class="symbol">&gt;</span>&nbsp;<span class="symbol">:</span>&nbsp;<a href="./index.html"><span class="identifier">FlowLogic</span></a><span class="symbol">&lt;</span><a href="../-with-referenced-states-flow/index.html#T"><span class="identifier">T</span></a><span class="symbol">&gt;</span></code>
<p>Given a flow which uses reference states, the <a href="../-with-referenced-states-flow/index.html">WithReferencedStatesFlow</a> will execute the flow as a subFlow.
If the flow fails due to a <a href="../-notary-error/-conflict/index.html">NotaryError.Conflict</a> for a reference state, then WithReferencedStatesFlow will be suspended until the
state refs for the reference states are consumed. In this case, a consumption means that:</p>
</td>
</tr>
</tbody>
</table>

<style>
    @import url("https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,500,600");
    #cookies-eu-banner {
        background-color: rgba(83, 88, 95, 0.9);
        border-radius: 3px;
        color: #fff;
        font-family: 'Source Sans Pro', sans-serif;
        font-size: 13px;
        font-weight: 400;
        left: 3px;
        position: fixed;
        padding: 6px;
        right: 3px;
        text-align: center;
        top: 100px;
        z-index: 1000;
    }
    
    #cookies-eu-banner h3,
    #cookies-eu-banner p {
        color: #fff;
        font-size: 18px;
        letter-spacing: 0;
    }
    
    #cookies-eu-banner h3 {
        font-size: 24px;
        font-style: normal;
        font-weight: 400;
        line-height: 1.2;
        margin: 9px 0 0;
        text-transform: uppercase;
    }
    
    #cookies-eu-banner p {
        margin-bottom: 10px;
        padding: 8px 36px 0;
        text-align: justify;
        line-height: 1.4em;
    }
    
    #cookies-eu-banner fieldset {
        min-width: 0;
        padding: 0;
        margin: 0;
        border: 0;
    }
    
    #cookies-eu-banner legend {
        color: inherit;
        display: block;
        font-size: 18px;
        line-height: inherit;
        max-width: 100%;
        margin-bottom: 16px;
        padding: 0;
        white-space: normal;
        width: 100%;
    }
    
    #cookies-eu-banner a {
        color: #62AAF1;
    }
    
    #cookies-eu-banner .cookies-button-group {
        display: flex;
        justify-content: center;
    }
    
    #cookies-eu-accept,
    #cookies-eu-accept-all {
        background-color: #ec1d24;
        border: none;
        border-radius: 6px;
        color: #fff;
        font-size: 12px;
        font-weight: 600;
        margin: 0 10px 10px;
        max-height: 40px;
        height: 40px;
        line-height: 1.1;
        text-decoration: none;
        width: 150px;
    }
    
    .cookies-checkbox {
        display: inline-block;
        margin: 5px 10px;
    }
    
    .cookies-checkbox label {
        font-size: 16px;
        margin-left: 3px;
    }
    
    @media screen and (min-width: 768px) {
        #cookies-eu-banner {
            bottom: 5px;
            top: inherit;
        }
        #cookies-eu-accept,
        #cookies-eu-accept-all {
            font-size: 14px;
        }
    }
</style>
<div id="cookies-eu-banner" style="display: none;">
    <h3 style="text-transform:none">Your privacy</h3>
    <div class='cookie-flex'>
        <p>
            We use cookies to improve your experience on our site, and to help us understand how people use our documentation. For more detailed information, see our <a href="https://www.r3.com/privacy-policy/">privacy policy</a> and <a href="#">cookie declaration</a>.
        </p>
        <form id='cookie-consent-form'>
            <fieldset>
                <legend>
                    Please select from the following options to continue to our site.
                </legend>
                <div class='cookies-button-group'>
                    <button id="cookies-eu-accept" type="button">
                      Allow cookies selected
                    </button>
                    <button id="cookies-eu-accept-all" type="button">
                      Allow all cookies
                    </button>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="necessary"
                      name="necessary"
                      autocomplete="off"
                      checked
                      disabled />
                        <input
                        name="necessary"
                        type="hidden"
                        value="on"/>
                        <label for="necessary">Necessary</label>
                    </span>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="preferences"
                      name="preferences"
                      autocomplete="off" />
                      <label for="preferences">Preferences</label>
                    </span>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="statistics"
                      name="statistics"
                      autocomplete="off" />
                      <label for="statistics">Statistics</label>
                    </span>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="marketing"
                      name="marketing"
                      autocomplete="off" />
                      <label for="marketing">Marketing</label>
                    </span>
                </div>
            </fieldset>
        </form>
    </div>
</div>
<script class='api-keys'>
    var gaKey = 'UA-87760032-1';
    var algolia_appId = "UX2KMUWFAL";
    var algolia_apiKey = "1fe3367db02689b4aeebc59efad5abaf";
    var algolia_index = "docs.corda.net";
</script>
<script class='cookies-eu-banner'>
    ! function(root, factory) {
        "use strict";
        "function" == typeof define && define.amd ? define([], factory) : "object" == typeof exports ? module.exports = factory() : root.CookiesEuBanner = factory()
    }(window, function() {
        "use strict";
        var document = window.document,
            CookiesEuBanner = function(launchFunction, waitAccept, useLocalStorage, undefined) {
                if (!(this instanceof CookiesEuBanner)) return new CookiesEuBanner(launchFunction);
                this.cookieTimeout = 33696e6, this.bots = /bot|crawler|spider|crawling/i, this.cookieName = "hasConsent", this.trackingCookiesNames = ["__utma", "__utmb", "__utmc", "__utmt", "__utmv", "__utmz", "_ga", "_gat", "_gid"], this.launchFunction = launchFunction, this.waitAccept = waitAccept || !1, this.useLocalStorage = useLocalStorage || !1, this.init()
            };
        return CookiesEuBanner.prototype = {
            init: function() {
                var isBot = this.bots.test(navigator.userAgent);
                navigator.doNotTrack || navigator.msDoNotTrack || window.doNotTrack;
                return isBot || !1 === this.hasConsent() ? (this.removeBanner(0), !1) : !0 === this.hasConsent() ? (this.launchFunction(), !0) : (this.showBanner(), void(this.waitAccept || this.setConsent(!0)))
            },
            showBanner: function() {
                var _this = this,
                    getElementById = document.getElementById.bind(document),
                    banner = getElementById("cookies-eu-banner"),
                    rejectButton = getElementById("cookies-eu-reject"),
                    acceptButton = getElementById("cookies-eu-accept"),
                    moreLink = getElementById("cookies-eu-more"),
                    waitRemove = void 0 === banner.dataset.waitRemove ? 0 : parseInt(banner.dataset.waitRemove),
                    addClickListener = this.addClickListener,
                    removeBanner = _this.removeBanner.bind(_this, waitRemove);
                banner.style.display = "block", moreLink && addClickListener(moreLink, function() {
                    _this.deleteCookie(_this.cookieName)
                }), acceptButton && addClickListener(acceptButton, function() {
                    removeBanner(), _this.setConsent(!0), _this.launchFunction()
                }), rejectButton && addClickListener(rejectButton, function() {
                    removeBanner(), _this.setConsent(!1), _this.trackingCookiesNames.map(_this.deleteCookie)
                })
            },
            setConsent: function(consent) {
                if (this.useLocalStorage) return localStorage.setItem(this.cookieName, consent);
                this.setCookie(this.cookieName, consent)
            },
            hasConsent: function() {
                function isCookieSetTo(value) {
                    return -1 < document.cookie.indexOf(cookieName + "=" + value) || localStorage.getItem(cookieName) === value
                }
                var cookieName = this.cookieName;
                return !!isCookieSetTo("true") || !isCookieSetTo("false") && null
            },
            setCookie: function(name, value) {
                var date = new Date;
                date.setTime(date.getTime() + this.cookieTimeout), document.cookie = name + "=" + value + ";SameSite=Strict;expires=" + date.toGMTString() + ";path=/"
            },
            deleteCookie: function(name) {
                var hostname = document.location.hostname.replace(/^www\./, ""),
                    commonSuffix = "; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/";
                document.cookie = name + "=; domain=." + hostname + commonSuffix, document.cookie = name + "=" + commonSuffix
            },
            addClickListener: function(DOMElement, callback) {
                if (DOMElement.attachEvent) return DOMElement.attachEvent("onclick", callback);
                DOMElement.addEventListener("click", callback)
            },
            removeBanner: function(wait) {
                setTimeout(function() {
                    var banner = document.getElementById("cookies-eu-banner");
                    banner && banner.parentNode && banner.parentNode.removeChild(banner)
                }, wait)
            }
        }, CookiesEuBanner
    });
</script>
<script class='google-analytics'>
    function googleAnalytics() {
        var i, s, o, r, a, m;
        i = window, s = document, o = "script", r = "ga", i.GoogleAnalyticsObject = r, i.ga = i.ga || function() {
            (i.ga.q = i.ga.q || []).push(arguments)
        }, i.ga.l = +new Date, a = s.createElement(o), m = s.getElementsByTagName(o)[0], a.async = 1, a.src = "//www.google-analytics.com/analytics.js", m.parentNode.insertBefore(a, m), window.ga("create", "UA-87760032-1", "auto"), window.ga("send", "pageview")
    }
</script>
<script class='docSearchInit'>
    function docSearchInit() {
        var algoliaOptions;
        document.querySelector("#search-input") && (algoliaOptions = {
            hitsPerPage: 5,
            facetFilters: facetFilters
        }, /404.html/.test(window.location.pathname) && delete algoliaOptions.facetFilters, window.docsearch({
            appId: algolia_appId,
            apiKey: algolia_apiKey,
            indexName: algolia_index,
            inputSelector: "#search-input",
            algoliaOptions: algoliaOptions
        }))
    }
</script>
<script class='corda-cookie-banner'>
    const docsearchLoad = (resolve, reject) => {
        const script = document.createElement('script');
        document.body.appendChild(script);
        script.onload = resolve;
        script.onerror = reject;
        script.async = true;
        script.src = "https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.js";
    };

    class DocsiteCookies {
        constructor() {
            this.name = 'corda_cookie';
            this.cookiesAccepted = {
                set: true,
                necessary: true,
                preferences: false,
                statistics: false,
                marketing: false
            };
            this.form = document.querySelector('#cookie-consent-form');
            this.handleAllCookies();

            new CookiesEuBanner(() => {
                this.cookieBanner();
            }, true);
        }

        handleAllCookies() {
            const acceptButton = document.querySelector('#cookies-eu-accept');
            const allCookiesButton = document.querySelector('#cookies-eu-accept-all');

            allCookiesButton.addEventListener('click', e => {
                e.preventDefault();
                this.allowAllCookies(this.form);
                acceptButton.click();
            });
        }

        cookieBanner() {
            if (!this.checkConsent()) {
                this.formToCookie(this.name, this.form);
                this.setAdditionalServices();
            } else {
                this.setAdditionalServices();
            }
        }

        allowAllCookies(form) {
            let cookiePreferences = form.querySelectorAll('.cookies-checkbox');
            for (let cookie of cookiePreferences) {
                cookie.querySelector('input').checked = true;
            }
        }

        formToCookie(name, form) {
            const thirteenMonthsInMils = 31104000000;

            let date = new Date();
            date.setTime(date.getTime() + thirteenMonthsInMils);

            let formData = new FormData(form);
            for (var pair of formData.entries()) {
                switch (pair[0]) {
                    case "necessary":
                        this.cookiesAccepted.necessary = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    case "preferences":
                        this.cookiesAccepted.preferences = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    case "statistics":
                        this.cookiesAccepted.statistics = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    case "marketing":
                        this.cookiesAccepted.marketing = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    default:
                        break;
                }
            }
            let cookieValue = JSON.stringify(this.cookiesAccepted);

            document.cookie = `${name}=${cookieValue};SameSite=Strict;expires=${date.toGMTString()};path=/`;
        }

        checkConsent() {
            let cookieName = this.name;
            let cookieValue = this.getCookie(cookieName);

            if (cookieValue) {
                if (cookieValue.set === true) {
                    return true;
                } else {
                    return false;
                }
            } else {
                return false;
            }
        }

        getCookie(name) {
            let value = "; " + document.cookie;
            let parts = value.split("; " + name + "=");
            let cValue = "";

            if (parts.length == 2) {
                cValue = parts.pop().split(";").shift();
            }

            if (hasJsonStructure(cValue)) {
                return JSON.parse(cValue);
            } else {
                return cValue;
            }
        }

        setAdditionalServices() {
            let cookieConsent = this.getCookie(this.name);
            for (let [key, value] of Object.entries(cookieConsent)) {
                if (key === 'necessary' && value === true) {
                    new Promise(docsearchLoad)
                        .then(() => {
                            docSearchInit();
                        })
                        .catch(err => console.log(err));
                }
                if (key === 'statistics' && value === true) {
                    googleAnalytics();
                }
            }
        }
    }

    function hasJsonStructure(str) {
        if (typeof str !== 'string') return false;
        try {
            const result = JSON.parse(str);
            const type = Object.prototype.toString.call(result);
            return type === '[object Object]' ||
                type === '[object Array]';
        } catch (err) {
            return false;
        }
    }
</script>
<script class='initialise'>
    new DocsiteCookies();
</script>
</body>
</HTML>
