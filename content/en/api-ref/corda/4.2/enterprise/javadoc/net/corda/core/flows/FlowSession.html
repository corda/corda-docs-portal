<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_202) on Fri Mar 20 11:25:01 GMT 2020 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>FlowSession</title>
<meta name="date" content="2020-03-20">
<meta name="keywords" content="net.corda.core.flows.FlowSession class">
<meta name="keywords" content="getCounterparty()">
<meta name="keywords" content="getCounterpartyFlowInfo()">
<meta name="keywords" content="sendAndReceive()">
<meta name="keywords" content="receive()">
<meta name="keywords" content="send()">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>

<meta name="docsearch:language" content="en">
<meta name="docsearch:version" content="4.2">
<meta name="docsearch:project" content="corda-enterprise">
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="FlowSession";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../net/corda/core/flows/FlowLogicRefFactory.html" title="interface in net.corda.core.flows"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../net/corda/core/flows/FlowStackSnapshot.html" title="class in net.corda.core.flows"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?net/corda/core/flows/FlowSession.html" target="_top">Frames</a></li>
<li><a href="FlowSession.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">net.corda.core.flows</div>
<h2 title="Class FlowSession" class="title">Class FlowSession</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>net.corda.core.flows.FlowSession</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">FlowSession</span></pre>
<div class="block"><p><p>A <a href="../../../../net/corda/core/flows/FlowSession.html" title="class in net.corda.core.flows"><code>class FlowSession</code></a> is a handle on a communication sequence between two paired flows, possibly running on separate nodes.
It is used to send and receive messages between the flows as well as to query information about the counter-flow.</p></p><p><p><p>There are two ways of obtaining such a session:</p><ol><li><p>Calling <a href="../../../../net/corda/core/flows/FlowLogic.html#initiateFlow-party-"><code>FlowLogic.initiateFlow</code></a>. This will create a <a href="../../../../net/corda/core/flows/FlowSession.html" title="class in net.corda.core.flows"><code>class FlowSession</code></a> object on which the first send/receive
operation will attempt to kick off a corresponding <a href="../../../../net/corda/core/flows/InitiatedBy.html" title="interface in net.corda.core.flows"><code>interface InitiatedBy</code></a> flow on the counterparty's node.</p></li><li><p>As constructor parameter to <a href="../../../../net/corda/core/flows/InitiatedBy.html" title="interface in net.corda.core.flows"><code>interface InitiatedBy</code></a> flows. This session is the one corresponding to the initiating flow and
may be used for replies.</p></li></ol><p>To port flows using the old Party-based API:</p><p>Look for <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-deprecated/index.html">Deprecated</a> usages of send/receive/sendAndReceive/getFlowInfo.</p><p>If it's an InitiatingFlow:</p><p>Look for the send/receive that kicks off the counter flow. Insert a</p><code><pre>    val session = initiateFlow(party)</pre></code><p>and use this session afterwards for send/receives.
For example:
    send(party, something)
will become
    session.send(something)</p><p>If it's an InitiatedBy flow:</p><p>Change the constructor to take an otherSideSession: FlowSession instead of a counterparty: Party
Then look for usages of the deprecated functions and change them to use the FlowSession
For example:
    send(counterparty, something)
will become
    otherSideSession.send(something)</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowSession.html" title="class in net.corda.core.flows"><code>class FlowSession</code></a>, 
<a href="../../../../net/corda/core/flows/FlowLogic.html#initiateFlow-party-"><code>FlowLogic.initiateFlow</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html" title="class in net.corda.core.flows"><code>class FlowSession</code></a>, 
<a href="../../../../net/corda/core/flows/InitiatedBy.html" title="interface in net.corda.core.flows"><code>interface InitiatedBy</code></a>, 
<a href="../../../../net/corda/core/flows/InitiatedBy.html" title="interface in net.corda.core.flows"><code>interface InitiatedBy</code></a>, 
<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-deprecated/index.html">Deprecated</a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowSession.html#FlowSession--">FlowSession</a></span>()</code>
<div class="block">A <a href="../../../../net/corda/core/flows/FlowSession.html" title="class in net.corda.core.flows"><code>class FlowSession</code></a> is a handle on a communication sequence between two paired flows, possibly running on separate nodes.
It is used to send and receive messages between the flows as well as to query information about the counter-flow.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/identity/Party.html" title="type parameter in Party">Party</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--">getCounterparty</a></span>()</code>
<div class="block">The <a href="../../../../net/corda/core/identity/Party.html" title="class in net.corda.core.identity"><code>class Party</code></a> on the other side of this session. In the case of a session created by <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a> is the same Party as the one passed to that function.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/flows/FlowInfo.html" title="type parameter in FlowInfo">FlowInfo</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowSession.html#getCounterpartyFlowInfo-maySkipCheckpoint-">getCounterpartyFlowInfo</a></span>(boolean&nbsp;maySkipCheckpoint)</code>
<div class="block">Returns a <a href="../../../../net/corda/core/flows/FlowInfo.html" title="class in net.corda.core.flows"><code>class FlowInfo</code></a> object describing the flow <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a> is using. With FlowInfo.flowVersion it
provides the necessary information needed for the evolution of flows and enabling backwards compatibility.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/flows/FlowInfo.html" title="type parameter in FlowInfo">FlowInfo</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowSession.html#getCounterpartyFlowInfo--">getCounterpartyFlowInfo</a></span>()</code>
<div class="block">Returns a <a href="../../../../net/corda/core/flows/FlowInfo.html" title="class in net.corda.core.flows"><code>class FlowInfo</code></a> object describing the flow <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a> is using. With FlowInfo.flowVersion it
provides the necessary information needed for the evolution of flows and enabling backwards compatibility.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>&lt;R&gt;&nbsp;<a href="../../../../net/corda/core/utilities/UntrustworthyData.html" title="type parameter in UntrustworthyData">UntrustworthyData</a>&lt;R&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowSession.html#receive-receiveType-maySkipCheckpoint-">receive</a></span>(java.lang.Class&lt;R&gt;&nbsp;receiveType,
       boolean&nbsp;maySkipCheckpoint)</code>
<div class="block">Suspends until <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a> sends us a message of type receiveType.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>&lt;R&gt;&nbsp;<a href="../../../../net/corda/core/utilities/UntrustworthyData.html" title="type parameter in UntrustworthyData">UntrustworthyData</a>&lt;R&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowSession.html#receive-receiveType-">receive</a></span>(java.lang.Class&lt;R&gt;&nbsp;receiveType)</code>
<div class="block">Suspends until <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a> sends us a message of type receiveType.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowSession.html#send-payload-maySkipCheckpoint-">send</a></span>(java.lang.Object&nbsp;payload,
    boolean&nbsp;maySkipCheckpoint)</code>
<div class="block">Queues the given payload for sending to the <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a> and continues without suspending.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowSession.html#send-payload-">send</a></span>(java.lang.Object&nbsp;payload)</code>
<div class="block">Queues the given payload for sending to the <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a> and continues without suspending.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>&lt;R&gt;&nbsp;<a href="../../../../net/corda/core/utilities/UntrustworthyData.html" title="type parameter in UntrustworthyData">UntrustworthyData</a>&lt;R&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowSession.html#sendAndReceive-receiveType-payload-maySkipCheckpoint-">sendAndReceive</a></span>(java.lang.Class&lt;R&gt;&nbsp;receiveType,
              java.lang.Object&nbsp;payload,
              boolean&nbsp;maySkipCheckpoint)</code>
<div class="block">Serializes and queues the given payload object for sending to the <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a>. Suspends until a response
is received, which must be of the given receiveType. Remember that when receiving data from other parties the
data should not be trusted until it's been thoroughly verified for consistency and that all expectations are
satisfied, as a malicious peer may send you subtly corrupted data in order to exploit your code.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>&lt;R&gt;&nbsp;<a href="../../../../net/corda/core/utilities/UntrustworthyData.html" title="type parameter in UntrustworthyData">UntrustworthyData</a>&lt;R&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/flows/FlowSession.html#sendAndReceive-receiveType-payload-">sendAndReceive</a></span>(java.lang.Class&lt;R&gt;&nbsp;receiveType,
              java.lang.Object&nbsp;payload)</code>
<div class="block">Serializes and queues the given payload object for sending to the <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a>. Suspends until a response
is received, which must be of the given receiveType. Remember that when receiving data from other parties the
data should not be trusted until it's been thoroughly verified for consistency and that all expectations are
satisfied, as a malicious peer may send you subtly corrupted data in order to exploit your code.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="FlowSession--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>FlowSession</h4>
<pre>public&nbsp;FlowSession()</pre>
<div class="block"><p><p>A <a href="../../../../net/corda/core/flows/FlowSession.html" title="class in net.corda.core.flows"><code>class FlowSession</code></a> is a handle on a communication sequence between two paired flows, possibly running on separate nodes.
It is used to send and receive messages between the flows as well as to query information about the counter-flow.</p></p><p><p><p>There are two ways of obtaining such a session:</p><ol><li><p>Calling <a href="../../../../net/corda/core/flows/FlowLogic.html#initiateFlow-party-"><code>FlowLogic.initiateFlow</code></a>. This will create a <a href="../../../../net/corda/core/flows/FlowSession.html" title="class in net.corda.core.flows"><code>class FlowSession</code></a> object on which the first send/receive
operation will attempt to kick off a corresponding <a href="../../../../net/corda/core/flows/InitiatedBy.html" title="interface in net.corda.core.flows"><code>interface InitiatedBy</code></a> flow on the counterparty's node.</p></li><li><p>As constructor parameter to <a href="../../../../net/corda/core/flows/InitiatedBy.html" title="interface in net.corda.core.flows"><code>interface InitiatedBy</code></a> flows. This session is the one corresponding to the initiating flow and
may be used for replies.</p></li></ol><p>To port flows using the old Party-based API:</p><p>Look for <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-deprecated/index.html">Deprecated</a> usages of send/receive/sendAndReceive/getFlowInfo.</p><p>If it's an InitiatingFlow:</p><p>Look for the send/receive that kicks off the counter flow. Insert a</p><code><pre>    val session = initiateFlow(party)</pre></code><p>and use this session afterwards for send/receives.
For example:
    send(party, something)
will become
    session.send(something)</p><p>If it's an InitiatedBy flow:</p><p>Change the constructor to take an otherSideSession: FlowSession instead of a counterparty: Party
Then look for usages of the deprecated functions and change them to use the FlowSession
For example:
    send(counterparty, something)
will become
    otherSideSession.send(something)</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowSession.html" title="class in net.corda.core.flows"><code>class FlowSession</code></a>, 
<a href="../../../../net/corda/core/flows/FlowLogic.html#initiateFlow-party-"><code>FlowLogic.initiateFlow</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html" title="class in net.corda.core.flows"><code>class FlowSession</code></a>, 
<a href="../../../../net/corda/core/flows/InitiatedBy.html" title="interface in net.corda.core.flows"><code>interface InitiatedBy</code></a>, 
<a href="../../../../net/corda/core/flows/InitiatedBy.html" title="interface in net.corda.core.flows"><code>interface InitiatedBy</code></a>, 
<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-deprecated/index.html">Deprecated</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getCounterparty--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCounterparty</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/identity/Party.html" title="type parameter in Party">Party</a>&nbsp;getCounterparty()</pre>
<div class="block"><p><p>The <a href="../../../../net/corda/core/identity/Party.html" title="class in net.corda.core.identity"><code>class Party</code></a> on the other side of this session. In the case of a session created by <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a> is the same Party as the one passed to that function.</p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/identity/Party.html" title="class in net.corda.core.identity"><code>class Party</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a></dd>
</dl>
</li>
</ul>
<a name="getCounterpartyFlowInfo-maySkipCheckpoint-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCounterpartyFlowInfo</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/flows/FlowInfo.html" title="type parameter in FlowInfo">FlowInfo</a>&nbsp;getCounterpartyFlowInfo(boolean&nbsp;maySkipCheckpoint)</pre>
<div class="block"><p><p>Returns a <a href="../../../../net/corda/core/flows/FlowInfo.html" title="class in net.corda.core.flows"><code>class FlowInfo</code></a> object describing the flow <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a> is using. With FlowInfo.flowVersion it
provides the necessary information needed for the evolution of flows and enabling backwards compatibility.</p></p><p><p><p>This method can be called before any send or receive has been done with <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a>. In such a case this will
force them to start their flow.</p></p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>maySkipCheckpoint</code> - setting it to true indicates to the platform that it may optimise away the checkpoint.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowInfo.html" title="class in net.corda.core.flows"><code>class FlowInfo</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a></dd>
</dl>
</li>
</ul>
<a name="getCounterpartyFlowInfo--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCounterpartyFlowInfo</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/flows/FlowInfo.html" title="type parameter in FlowInfo">FlowInfo</a>&nbsp;getCounterpartyFlowInfo()</pre>
<div class="block"><p><p>Returns a <a href="../../../../net/corda/core/flows/FlowInfo.html" title="class in net.corda.core.flows"><code>class FlowInfo</code></a> object describing the flow <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a> is using. With FlowInfo.flowVersion it
provides the necessary information needed for the evolution of flows and enabling backwards compatibility.</p></p><p><p><p>This method can be called before any send or receive has been done with <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a>. In such a case this will
force them to start their flow.</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowInfo.html" title="class in net.corda.core.flows"><code>class FlowInfo</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a></dd>
</dl>
</li>
</ul>
<a name="sendAndReceive-receiveType-payload-maySkipCheckpoint-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendAndReceive</h4>
<pre>public&nbsp;&lt;R&gt;&nbsp;<a href="../../../../net/corda/core/utilities/UntrustworthyData.html" title="type parameter in UntrustworthyData">UntrustworthyData</a>&lt;R&gt;&nbsp;sendAndReceive(java.lang.Class&lt;R&gt;&nbsp;receiveType,
                                               java.lang.Object&nbsp;payload,
                                               boolean&nbsp;maySkipCheckpoint)</pre>
<div class="block"><p><p>Serializes and queues the given payload object for sending to the <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a>. Suspends until a response
is received, which must be of the given receiveType. Remember that when receiving data from other parties the
data should not be trusted until it's been thoroughly verified for consistency and that all expectations are
satisfied, as a malicious peer may send you subtly corrupted data in order to exploit your code.</p></p><p><p><p>Note that this function is not just a simple send+receive pair: it is more efficient and more correct to
use this when you expect to do a message swap than do use <a href="../../../../net/corda/core/flows/FlowSession.html#send-payload-maySkipCheckpoint-"><code>FlowSession.send</code></a> and then receive in turn.</p></p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>maySkipCheckpoint</code> - setting it to true indicates to the platform that it may optimise away the checkpoint.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an <a href="../../../../net/corda/core/utilities/UntrustworthyData.html" title="class in net.corda.core.utilities"><code>class UntrustworthyData</code></a> wrapper around the received object.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html#send-payload-maySkipCheckpoint-"><code>FlowSession.send</code></a></dd>
</dl>
</li>
</ul>
<a name="sendAndReceive-receiveType-payload-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendAndReceive</h4>
<pre>public&nbsp;&lt;R&gt;&nbsp;<a href="../../../../net/corda/core/utilities/UntrustworthyData.html" title="type parameter in UntrustworthyData">UntrustworthyData</a>&lt;R&gt;&nbsp;sendAndReceive(java.lang.Class&lt;R&gt;&nbsp;receiveType,
                                               java.lang.Object&nbsp;payload)</pre>
<div class="block"><p><p>Serializes and queues the given payload object for sending to the <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a>. Suspends until a response
is received, which must be of the given receiveType. Remember that when receiving data from other parties the
data should not be trusted until it's been thoroughly verified for consistency and that all expectations are
satisfied, as a malicious peer may send you subtly corrupted data in order to exploit your code.</p></p><p><p><p>Note that this function is not just a simple send+receive pair: it is more efficient and more correct to
use this when you expect to do a message swap than do use <a href="../../../../net/corda/core/flows/FlowSession.html#send-payload-maySkipCheckpoint-"><code>FlowSession.send</code></a> and then receive in turn.</p></p></p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an <a href="../../../../net/corda/core/utilities/UntrustworthyData.html" title="class in net.corda.core.utilities"><code>class UntrustworthyData</code></a> wrapper around the received object.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html#send-payload-maySkipCheckpoint-"><code>FlowSession.send</code></a></dd>
</dl>
</li>
</ul>
<a name="receive-receiveType-maySkipCheckpoint-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receive</h4>
<pre>public&nbsp;&lt;R&gt;&nbsp;<a href="../../../../net/corda/core/utilities/UntrustworthyData.html" title="type parameter in UntrustworthyData">UntrustworthyData</a>&lt;R&gt;&nbsp;receive(java.lang.Class&lt;R&gt;&nbsp;receiveType,
                                        boolean&nbsp;maySkipCheckpoint)</pre>
<div class="block"><p><p>Suspends until <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a> sends us a message of type receiveType.</p></p><p><p><p>Remember that when receiving data from other parties the data should not be trusted until it's been thoroughly
verified for consistency and that all expectations are satisfied, as a malicious peer may send you subtly
corrupted data in order to exploit your code.</p></p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>maySkipCheckpoint</code> - setting it to true indicates to the platform that it may optimise away the checkpoint.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an <a href="../../../../net/corda/core/utilities/UntrustworthyData.html" title="class in net.corda.core.utilities"><code>class UntrustworthyData</code></a> wrapper around the received object.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a></dd>
</dl>
</li>
</ul>
<a name="receive-receiveType-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receive</h4>
<pre>public&nbsp;&lt;R&gt;&nbsp;<a href="../../../../net/corda/core/utilities/UntrustworthyData.html" title="type parameter in UntrustworthyData">UntrustworthyData</a>&lt;R&gt;&nbsp;receive(java.lang.Class&lt;R&gt;&nbsp;receiveType)</pre>
<div class="block"><p><p>Suspends until <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a> sends us a message of type receiveType.</p></p><p><p><p>Remember that when receiving data from other parties the data should not be trusted until it's been thoroughly
verified for consistency and that all expectations are satisfied, as a malicious peer may send you subtly
corrupted data in order to exploit your code.</p></p></p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an <a href="../../../../net/corda/core/utilities/UntrustworthyData.html" title="class in net.corda.core.utilities"><code>class UntrustworthyData</code></a> wrapper around the received object.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a></dd>
</dl>
</li>
</ul>
<a name="send-payload-maySkipCheckpoint-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>send</h4>
<pre>public&nbsp;void&nbsp;send(java.lang.Object&nbsp;payload,
                 boolean&nbsp;maySkipCheckpoint)</pre>
<div class="block"><p><p>Queues the given payload for sending to the <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a> and continues without suspending.</p></p><p><p><p>Note that the other party may receive the message at some arbitrary later point or not at all: if <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a>
is offline then message delivery will be retried until it comes back or until the message is older than the
network's event horizon time.</p></p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>maySkipCheckpoint</code> - setting it to true indicates to the platform that it may optimise away the checkpoint.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a></dd>
</dl>
</li>
</ul>
<a name="send-payload-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>send</h4>
<pre>public&nbsp;void&nbsp;send(java.lang.Object&nbsp;payload)</pre>
<div class="block"><p><p>Queues the given payload for sending to the <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a> and continues without suspending.</p></p><p><p><p>Note that the other party may receive the message at some arbitrary later point or not at all: if <a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a>
is offline then message delivery will be retried until it comes back or until the message is older than the
network's event horizon time.</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a>, 
<a href="../../../../net/corda/core/flows/FlowSession.html#getCounterparty--"><code>FlowSession.getCounterparty</code></a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../net/corda/core/flows/FlowLogicRefFactory.html" title="interface in net.corda.core.flows"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../net/corda/core/flows/FlowStackSnapshot.html" title="class in net.corda.core.flows"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?net/corda/core/flows/FlowSession.html" target="_top">Frames</a></li>
<li><a href="FlowSession.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<style>
    @import url("https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,500,600");
    #cookies-eu-banner {
        background-color: rgba(83, 88, 95, 0.9);
        border-radius: 3px;
        color: #fff;
        font-family: 'Source Sans Pro', sans-serif;
        font-size: 13px;
        font-weight: 400;
        left: 3px;
        position: fixed;
        padding: 6px;
        right: 3px;
        text-align: center;
        top: 100px;
        z-index: 1000;
    }
    
    #cookies-eu-banner h3,
    #cookies-eu-banner p {
        color: #fff;
        font-size: 18px;
        letter-spacing: 0;
    }
    
    #cookies-eu-banner h3 {
        font-size: 24px;
        font-style: normal;
        font-weight: 400;
        line-height: 1.2;
        margin: 9px 0 0;
        text-transform: uppercase;
    }
    
    #cookies-eu-banner p {
        margin-bottom: 10px;
        padding: 8px 36px 0;
        text-align: justify;
        line-height: 1.4em;
    }
    
    #cookies-eu-banner fieldset {
        min-width: 0;
        padding: 0;
        margin: 0;
        border: 0;
    }
    
    #cookies-eu-banner legend {
        color: inherit;
        display: block;
        font-size: 18px;
        line-height: inherit;
        max-width: 100%;
        margin-bottom: 16px;
        padding: 0;
        white-space: normal;
        width: 100%;
    }
    
    #cookies-eu-banner a {
        color: #62AAF1;
    }
    
    #cookies-eu-banner .cookies-button-group {
        display: flex;
        justify-content: center;
    }
    
    #cookies-eu-accept,
    #cookies-eu-accept-all {
        background-color: #ec1d24;
        border: none;
        border-radius: 6px;
        color: #fff;
        font-size: 12px;
        font-weight: 600;
        margin: 0 10px 10px;
        max-height: 40px;
        height: 40px;
        line-height: 1.1;
        text-decoration: none;
        width: 150px;
    }
    
    .cookies-checkbox {
        display: inline-block;
        margin: 5px 10px;
    }
    
    .cookies-checkbox label {
        font-size: 16px;
        margin-left: 3px;
    }
    
    @media screen and (min-width: 768px) {
        #cookies-eu-banner {
            bottom: 5px;
            top: inherit;
        }
        #cookies-eu-accept,
        #cookies-eu-accept-all {
            font-size: 14px;
        }
    }
</style>
<div id="cookies-eu-banner" style="display: none;">
    <h3 style="text-transform:none">Your privacy</h3>
    <div class='cookie-flex'>
        <p>
            We use cookies to improve your experience on our site, and to help us understand how people use our documentation. For more detailed information, see our <a href="https://www.r3.com/privacy-policy/">privacy policy</a> and <a href="#">cookie declaration</a>.
        </p>
        <form id='cookie-consent-form'>
            <fieldset>
                <legend>
                    Please select from the following options to continue to our site.
                </legend>
                <div class='cookies-button-group'>
                    <button id="cookies-eu-accept" type="button">
                      Allow cookies selected
                    </button>
                    <button id="cookies-eu-accept-all" type="button">
                      Allow all cookies
                    </button>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="necessary"
                      name="necessary"
                      autocomplete="off"
                      checked
                      disabled />
                        <input
                        name="necessary"
                        type="hidden"
                        value="on"/>
                        <label for="necessary">Necessary</label>
                    </span>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="preferences"
                      name="preferences"
                      autocomplete="off" />
                      <label for="preferences">Preferences</label>
                    </span>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="statistics"
                      name="statistics"
                      autocomplete="off" />
                      <label for="statistics">Statistics</label>
                    </span>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="marketing"
                      name="marketing"
                      autocomplete="off" />
                      <label for="marketing">Marketing</label>
                    </span>
                </div>
            </fieldset>
        </form>
    </div>
</div>
<script class='api-keys'>
    var gaKey = 'UA-87760032-1';
    var algolia_appId = "UX2KMUWFAL";
    var algolia_apiKey = "1fe3367db02689b4aeebc59efad5abaf";
    var algolia_index = "docs.corda.net";
</script>
<script class='cookies-eu-banner'>
    ! function(root, factory) {
        "use strict";
        "function" == typeof define && define.amd ? define([], factory) : "object" == typeof exports ? module.exports = factory() : root.CookiesEuBanner = factory()
    }(window, function() {
        "use strict";
        var document = window.document,
            CookiesEuBanner = function(launchFunction, waitAccept, useLocalStorage, undefined) {
                if (!(this instanceof CookiesEuBanner)) return new CookiesEuBanner(launchFunction);
                this.cookieTimeout = 33696e6, this.bots = /bot|crawler|spider|crawling/i, this.cookieName = "hasConsent", this.trackingCookiesNames = ["__utma", "__utmb", "__utmc", "__utmt", "__utmv", "__utmz", "_ga", "_gat", "_gid"], this.launchFunction = launchFunction, this.waitAccept = waitAccept || !1, this.useLocalStorage = useLocalStorage || !1, this.init()
            };
        return CookiesEuBanner.prototype = {
            init: function() {
                var isBot = this.bots.test(navigator.userAgent);
                navigator.doNotTrack || navigator.msDoNotTrack || window.doNotTrack;
                return isBot || !1 === this.hasConsent() ? (this.removeBanner(0), !1) : !0 === this.hasConsent() ? (this.launchFunction(), !0) : (this.showBanner(), void(this.waitAccept || this.setConsent(!0)))
            },
            showBanner: function() {
                var _this = this,
                    getElementById = document.getElementById.bind(document),
                    banner = getElementById("cookies-eu-banner"),
                    rejectButton = getElementById("cookies-eu-reject"),
                    acceptButton = getElementById("cookies-eu-accept"),
                    moreLink = getElementById("cookies-eu-more"),
                    waitRemove = void 0 === banner.dataset.waitRemove ? 0 : parseInt(banner.dataset.waitRemove),
                    addClickListener = this.addClickListener,
                    removeBanner = _this.removeBanner.bind(_this, waitRemove);
                banner.style.display = "block", moreLink && addClickListener(moreLink, function() {
                    _this.deleteCookie(_this.cookieName)
                }), acceptButton && addClickListener(acceptButton, function() {
                    removeBanner(), _this.setConsent(!0), _this.launchFunction()
                }), rejectButton && addClickListener(rejectButton, function() {
                    removeBanner(), _this.setConsent(!1), _this.trackingCookiesNames.map(_this.deleteCookie)
                })
            },
            setConsent: function(consent) {
                if (this.useLocalStorage) return localStorage.setItem(this.cookieName, consent);
                this.setCookie(this.cookieName, consent)
            },
            hasConsent: function() {
                function isCookieSetTo(value) {
                    return -1 < document.cookie.indexOf(cookieName + "=" + value) || localStorage.getItem(cookieName) === value
                }
                var cookieName = this.cookieName;
                return !!isCookieSetTo("true") || !isCookieSetTo("false") && null
            },
            setCookie: function(name, value) {
                var date = new Date;
                date.setTime(date.getTime() + this.cookieTimeout), document.cookie = name + "=" + value + ";SameSite=Strict;expires=" + date.toGMTString() + ";path=/"
            },
            deleteCookie: function(name) {
                var hostname = document.location.hostname.replace(/^www\./, ""),
                    commonSuffix = "; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/";
                document.cookie = name + "=; domain=." + hostname + commonSuffix, document.cookie = name + "=" + commonSuffix
            },
            addClickListener: function(DOMElement, callback) {
                if (DOMElement.attachEvent) return DOMElement.attachEvent("onclick", callback);
                DOMElement.addEventListener("click", callback)
            },
            removeBanner: function(wait) {
                setTimeout(function() {
                    var banner = document.getElementById("cookies-eu-banner");
                    banner && banner.parentNode && banner.parentNode.removeChild(banner)
                }, wait)
            }
        }, CookiesEuBanner
    });
</script>
<script class='google-analytics'>
    function googleAnalytics() {
        var i, s, o, r, a, m;
        i = window, s = document, o = "script", r = "ga", i.GoogleAnalyticsObject = r, i.ga = i.ga || function() {
            (i.ga.q = i.ga.q || []).push(arguments)
        }, i.ga.l = +new Date, a = s.createElement(o), m = s.getElementsByTagName(o)[0], a.async = 1, a.src = "//www.google-analytics.com/analytics.js", m.parentNode.insertBefore(a, m), window.ga("create", "UA-87760032-1", "auto"), window.ga("send", "pageview")
    }
</script>
<script class='docSearchInit'>
    function docSearchInit() {
        var algoliaOptions;
        document.querySelector("#search-input") && (algoliaOptions = {
            hitsPerPage: 5,
            facetFilters: facetFilters
        }, /404.html/.test(window.location.pathname) && delete algoliaOptions.facetFilters, window.docsearch({
            appId: algolia_appId,
            apiKey: algolia_apiKey,
            indexName: algolia_index,
            inputSelector: "#search-input",
            algoliaOptions: algoliaOptions
        }))
    }
</script>
<script class='corda-cookie-banner'>
    const docsearchLoad = (resolve, reject) => {
        const script = document.createElement('script');
        document.body.appendChild(script);
        script.onload = resolve;
        script.onerror = reject;
        script.async = true;
        script.src = "https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.js";
    };

    class DocsiteCookies {
        constructor() {
            this.name = 'corda_cookie';
            this.cookiesAccepted = {
                set: true,
                necessary: true,
                preferences: false,
                statistics: false,
                marketing: false
            };
            this.form = document.querySelector('#cookie-consent-form');
            this.handleAllCookies();

            new CookiesEuBanner(() => {
                this.cookieBanner();
            }, true);
        }

        handleAllCookies() {
            const acceptButton = document.querySelector('#cookies-eu-accept');
            const allCookiesButton = document.querySelector('#cookies-eu-accept-all');

            allCookiesButton.addEventListener('click', e => {
                e.preventDefault();
                this.allowAllCookies(this.form);
                acceptButton.click();
            });
        }

        cookieBanner() {
            if (!this.checkConsent()) {
                this.formToCookie(this.name, this.form);
                this.setAdditionalServices();
            } else {
                this.setAdditionalServices();
            }
        }

        allowAllCookies(form) {
            let cookiePreferences = form.querySelectorAll('.cookies-checkbox');
            for (let cookie of cookiePreferences) {
                cookie.querySelector('input').checked = true;
            }
        }

        formToCookie(name, form) {
            const thirteenMonthsInMils = 31104000000;

            let date = new Date();
            date.setTime(date.getTime() + thirteenMonthsInMils);

            let formData = new FormData(form);
            for (var pair of formData.entries()) {
                switch (pair[0]) {
                    case "necessary":
                        this.cookiesAccepted.necessary = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    case "preferences":
                        this.cookiesAccepted.preferences = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    case "statistics":
                        this.cookiesAccepted.statistics = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    case "marketing":
                        this.cookiesAccepted.marketing = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    default:
                        break;
                }
            }
            let cookieValue = JSON.stringify(this.cookiesAccepted);

            document.cookie = `${name}=${cookieValue};SameSite=Strict;expires=${date.toGMTString()};path=/`;
        }

        checkConsent() {
            let cookieName = this.name;
            let cookieValue = this.getCookie(cookieName);

            if (cookieValue) {
                if (cookieValue.set === true) {
                    return true;
                } else {
                    return false;
                }
            } else {
                return false;
            }
        }

        getCookie(name) {
            let value = "; " + document.cookie;
            let parts = value.split("; " + name + "=");
            let cValue = "";

            if (parts.length == 2) {
                cValue = parts.pop().split(";").shift();
            }

            if (hasJsonStructure(cValue)) {
                return JSON.parse(cValue);
            } else {
                return cValue;
            }
        }

        setAdditionalServices() {
            let cookieConsent = this.getCookie(this.name);
            for (let [key, value] of Object.entries(cookieConsent)) {
                if (key === 'necessary' && value === true) {
                    new Promise(docsearchLoad)
                        .then(() => {
                            docSearchInit();
                        })
                        .catch(err => console.log(err));
                }
                if (key === 'statistics' && value === true) {
                    googleAnalytics();
                }
            }
        }
    }

    function hasJsonStructure(str) {
        if (typeof str !== 'string') return false;
        try {
            const result = JSON.parse(str);
            const type = Object.prototype.toString.call(result);
            return type === '[object Object]' ||
                type === '[object Array]';
        } catch (err) {
            return false;
        }
    }
</script>
<script class='initialise'>
    new DocsiteCookies();
</script>
</body>
</html>
