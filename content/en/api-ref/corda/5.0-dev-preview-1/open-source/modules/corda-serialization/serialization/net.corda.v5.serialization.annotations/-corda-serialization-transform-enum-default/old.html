<HTML>
<HEAD>
<meta charset="UTF-8">
<title>CordaSerializationTransformEnumDefault.old - serialization</title>
<link rel="stylesheet" href="../../../style.css">
</HEAD>
<BODY>
<a href="../../index.html">serialization</a>&nbsp;/&nbsp;<a href="../index.html">net.corda.v5.serialization.annotations</a>&nbsp;/&nbsp;<a href="index.html">CordaSerializationTransformEnumDefault</a>&nbsp;/&nbsp;<a href="./old.html">old</a><br/>
<br/>
<h1>old</h1>
<a name="net.corda.v5.serialization.annotations.CordaSerializationTransformEnumDefault$old"></a>
<code><span class="keyword">val </span><span class="identifier">old</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a></code>
<p><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html">String</a> equivalent of the value of the existing constant that deserialisers should
favour when de-serialising a value they have no corresponding value for</p>
<p>For Example</p>
<p>Enum before modification:</p>
<pre><code>enum class ExampleEnum {
  A, B, C
}
</code></pre>
<p>Assuming at some point a new constant is added it is required we have some mechanism by which to tell
nodes with an older version of the class on their Class Path what to do if they attempt to deserialize
an example of the class with that new value</p>
<pre><code>@CordaSerializationTransformEnumDefault("D", "C")
enum class ExampleEnum {
  A, B, C, D
}
</code></pre>
<p>So, on deserialisation treat any instance of the enum that is encoded as D as C</p>
<p>Adding a second new constant requires the wrapper annotation <a href="../-corda-serialization-transform-enum-defaults/index.html">CordaSerializationTransformEnumDefaults</a></p>
<pre><code>@CordaSerializationTransformEnumDefaults(
    CordaSerializationTransformEnumDefault("E", "D"),
    CordaSerializationTransformEnumDefault("D", "C"))
enum class ExampleEnum {
  A, B, C, D, E
}
</code></pre>
<p>It's fine to assign the second new value a default that may not be present in all versions as in this
case it will work down the transform hierarchy until it finds a value it can apply, in this case it would
try E -&gt; D -&gt; C (when E -&gt; D fails)</p>
<h3>Property</h3>
<p><a name="old"></a>
<code>old</code> - 
<p><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html">String</a> equivalent of the value of the existing constant that deserialisers should
favour when de-serialising a value they have no corresponding value for</p>


<p>For Example</p>


<p>Enum before modification:</p>

<pre><code>enum class ExampleEnum {
  A, B, C
}
</code></pre>

<p>Assuming at some point a new constant is added it is required we have some mechanism by which to tell
nodes with an older version of the class on their Class Path what to do if they attempt to deserialize
an example of the class with that new value</p>


<pre><code>@CordaSerializationTransformEnumDefault("D", "C")
enum class ExampleEnum {
  A, B, C, D
}
</code></pre>

<p>So, on deserialisation treat any instance of the enum that is encoded as D as C</p>


<p>Adding a second new constant requires the wrapper annotation <a href="../-corda-serialization-transform-enum-defaults/index.html">CordaSerializationTransformEnumDefaults</a></p>


<pre><code>@CordaSerializationTransformEnumDefaults(
    CordaSerializationTransformEnumDefault("E", "D"),
    CordaSerializationTransformEnumDefault("D", "C"))
enum class ExampleEnum {
  A, B, C, D, E
}
</code></pre>

<p>It's fine to assign the second new value a default that may not be present in all versions as in this
case it will work down the transform hierarchy until it finds a value it can apply, in this case it would
try E -&gt; D -&gt; C (when E -&gt; D fails)</p>
</p>
</BODY>
</HTML>
