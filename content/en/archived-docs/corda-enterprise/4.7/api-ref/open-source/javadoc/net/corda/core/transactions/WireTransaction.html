<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_221) on Tue Dec 15 21:52:21 GMT 2020 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>WireTransaction</title>
<meta name="date" content="2020-12-15">
<meta name="keywords" content="net.corda.core.transactions.WireTransaction class">
<meta name="keywords" content="Companion">
<meta name="keywords" content="getId()">
<meta name="keywords" content="getRequiredSigningKeys()">
<meta name="keywords" content="toLedgerTransaction()">
<meta name="keywords" content="buildFilteredTransaction()">
<meta name="keywords" content="getMerkleTree()">
<meta name="keywords" content="checkSignature()">
<meta name="keywords" content="toString()">
<meta name="keywords" content="equals()">
<meta name="keywords" content="hashCode()">
<meta name="keywords" content="getPrivacySalt()">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>

<meta name="docsearch:language" content="en">
<meta name="docsearch:version" content="4.7">
<meta name="docsearch:project" content="corda-os">
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="WireTransaction";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":42,"i10":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"],32:["t6","Deprecated Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../net/corda/core/transactions/TraversableTransaction.html" title="class in net.corda.core.transactions"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?net/corda/core/transactions/WireTransaction.html" target="_top">Frames</a></li>
<li><a href="WireTransaction.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">net.corda.core.transactions</div>
<h2 title="Class WireTransaction" class="title">Class WireTransaction</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="../../../../net/corda/core/transactions/BaseTransaction.html" title="class in net.corda.core.transactions">net.corda.core.transactions.BaseTransaction</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../net/corda/core/transactions/CoreTransaction.html" title="class in net.corda.core.transactions">net.corda.core.transactions.CoreTransaction</a></li>
<li>
<ul class="inheritance">
<li>TraversableTransaction</li>
<li>
<ul class="inheritance">
<li>net.corda.core.transactions.WireTransaction</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../net/corda/core/contracts/NamedByHash.html" title="interface in net.corda.core.contracts">NamedByHash</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">WireTransaction</span>
extends TraversableTransaction</pre>
<div class="block"><p><p>A transaction ready for serialisation, without any signatures attached. A WireTransaction is usually wrapped
by a <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a> that carries the signatures over this payload.
The identity of the transaction is the Merkle tree root of its components (see <a href="../../../../net/corda/core/crypto/MerkleTree.html" title="class in net.corda.core.crypto"><code>class MerkleTree</code></a>).</p></p><p><p><p>For privacy purposes, each part of a transaction should be accompanied by a nonce.
To avoid storing a random number (nonce) per component, an initial privacySalt is the sole value utilised,
so that all component nonces are deterministically computed.</p><p>A few notes about backwards compatibility:
A wire transaction can be backwards compatible, in the sense that if an old client receives a componentGroups with
more elements than expected, it will normally deserialise the required objects and omit any checks in the optional
new fields. Moreover, because the Merkle tree is constructed from the received list of <a href="../../../../net/corda/core/transactions/ComponentGroup.html" title="class in net.corda.core.transactions"><code>class ComponentGroup</code></a>, which internally
deals with bytes, any client can compute the Merkle tree and on the same time relay a <a href="../../../../net/corda/core/transactions/WireTransaction.html" title="class in net.corda.core.transactions"><code>class WireTransaction</code></a> object even
if she is unable to read some of the "optional" component types. We stress that practically, a new type of
<a href="../../../../net/corda/core/transactions/WireTransaction.html" title="class in net.corda.core.transactions"><code>class WireTransaction</code></a> should only be considered compatible if and only if the following rules apply:</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a>, 
<a href="../../../../net/corda/core/crypto/MerkleTree.html" title="class in net.corda.core.crypto"><code>class MerkleTree</code></a>, 
<a href="../../../../net/corda/core/transactions/ComponentGroup.html" title="class in net.corda.core.transactions"><code>class ComponentGroup</code></a>, 
<a href="../../../../net/corda/core/transactions/WireTransaction.html" title="class in net.corda.core.transactions"><code>class WireTransaction</code></a>, 
<a href="../../../../net/corda/core/transactions/WireTransaction.html" title="class in net.corda.core.transactions"><code>class WireTransaction</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/WireTransaction.Companion.html" title="class in net.corda.core.transactions">WireTransaction.Companion</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../../net/corda/core/transactions/WireTransaction.Companion.html" title="type parameter in WireTransaction.Companion">WireTransaction.Companion</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/WireTransaction.html#Companion">Companion</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/WireTransaction.html#WireTransaction-componentGroups-privacySalt-digestService-">WireTransaction</a></span>(java.util.List&lt;? extends net.corda.core.transactions.ComponentGroup&gt;&nbsp;componentGroups,
               <a href="../../../../net/corda/core/contracts/PrivacySalt.html" title="type parameter in PrivacySalt">PrivacySalt</a>&nbsp;privacySalt,
               <a href="../../../../net/corda/core/crypto/DigestService.html" title="type parameter in DigestService">DigestService</a>&nbsp;digestService)</code>
<div class="block">A transaction ready for serialisation, without any signatures attached. A WireTransaction is usually wrapped
by a <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a> that carries the signatures over this payload.
The identity of the transaction is the Merkle tree root of its components (see <a href="../../../../net/corda/core/crypto/MerkleTree.html" title="class in net.corda.core.crypto"><code>class MerkleTree</code></a>).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/WireTransaction.html#WireTransaction-componentGroups-">WireTransaction</a></span>(java.util.List&lt;? extends net.corda.core.transactions.ComponentGroup&gt;&nbsp;componentGroups)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/WireTransaction.html#WireTransaction-componentGroups-privacySalt-">WireTransaction</a></span>(java.util.List&lt;? extends net.corda.core.transactions.ComponentGroup&gt;&nbsp;componentGroups,
               <a href="../../../../net/corda/core/contracts/PrivacySalt.html" title="type parameter in PrivacySalt">PrivacySalt</a>&nbsp;privacySalt)</code>
<div class="block">Old version of <a href="../../../../net/corda/core/transactions/WireTransaction.html" title="class in net.corda.core.transactions"><code>class WireTransaction</code></a> constructor for ABI compatibility.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/WireTransaction.html#WireTransaction-inputs-attachments-outputs-commands-notary-timeWindow-privacySalt-">WireTransaction</a></span>(java.util.List&lt;net.corda.core.contracts.StateRef&gt;&nbsp;inputs,
               java.util.List&lt;? extends net.corda.core.crypto.SecureHash&gt;&nbsp;attachments,
               java.util.List&lt;? extends net.corda.core.contracts.TransactionState&lt;? extends net.corda.core.contracts.ContractState&gt;&gt;&nbsp;outputs,
               java.util.List&lt;? extends net.corda.core.contracts.Command&lt;?&gt;&gt;&nbsp;commands,
               <a href="../../../../net/corda/core/identity/Party.html" title="type parameter in Party">Party</a>&nbsp;notary,
               <a href="../../../../net/corda/core/contracts/TimeWindow.html" title="type parameter in TimeWindow">TimeWindow</a>&nbsp;timeWindow,
               <a href="../../../../net/corda/core/contracts/PrivacySalt.html" title="type parameter in PrivacySalt">PrivacySalt</a>&nbsp;privacySalt)</code>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;&nbsp;</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t6" class="tableTab"><span><a href="javascript:show(32);">Deprecated Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/transactions/FilteredTransaction.html" title="type parameter in FilteredTransaction">FilteredTransaction</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/WireTransaction.html#buildFilteredTransaction-filtering-">buildFilteredTransaction</a></span>(java.util.function.Predicate&lt;java.lang.Object&gt;&nbsp;filtering)</code>
<div class="block">Build filtered transaction using provided filtering functions.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/WireTransaction.html#checkSignature-sig-">checkSignature</a></span>(<a href="../../../../net/corda/core/crypto/TransactionSignature.html" title="type parameter in TransactionSignature">TransactionSignature</a>&nbsp;sig)</code>
<div class="block">Checks that the given signature matches one of the commands and that it is a correct signature over the tx.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/WireTransaction.html#equals-other-">equals</a></span>(java.lang.Object&nbsp;other)</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/crypto/SecureHash.html" title="type parameter in SecureHash">SecureHash</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/WireTransaction.html#getId--">getId</a></span>()</code>
<div class="block">The transaction id is represented by the root hash of Merkle tree over the transaction components.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/crypto/MerkleTree.html" title="type parameter in MerkleTree">MerkleTree</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/WireTransaction.html#getMerkleTree--">getMerkleTree</a></span>()</code>
<div class="block">Builds whole Merkle tree for a transaction.
Briefly, each component group has its own sub Merkle tree and all of the roots of these trees are used as leaves
in a top level Merkle tree.
Note that ordering of elements inside a <a href="../../../../net/corda/core/transactions/ComponentGroup.html" title="class in net.corda.core.transactions"><code>class ComponentGroup</code></a> matters when computing the Merkle root.
On the other hand, insertion group ordering does not affect the top level Merkle tree construction, as it is
actually an ordered Merkle tree, where its leaves are ordered based on the group ordinal in <a href="../../../../net/corda/core/contracts/ComponentGroupEnum.html" title="enum in net.corda.core.contracts"><code>enum ComponentGroupEnum</code></a>.
If any of the groups is an empty list or a null object, then <a href="../../../../net/corda/core/crypto/SecureHash.Companion.html#getAllOnesHash--"><code>SecureHash.Companion.getAllOnesHash</code></a> is used as its hash.
Also, privacySalt is not a Merkle tree leaf, because it is already "inherently" included via the component nonces.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/contracts/PrivacySalt.html" title="type parameter in PrivacySalt">PrivacySalt</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/WireTransaction.html#getPrivacySalt--">getPrivacySalt</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>java.util.Set&lt;java.security.PublicKey&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/WireTransaction.html#getRequiredSigningKeys--">getRequiredSigningKeys</a></span>()</code>
<div class="block">Public keys that need to be fulfilled by signatures in order for the transaction to be valid.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/WireTransaction.html#hashCode--">hashCode</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/transactions/LedgerTransaction.html" title="type parameter in LedgerTransaction">LedgerTransaction</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/WireTransaction.html#toLedgerTransaction-services-">toLedgerTransaction</a></span>(<a href="../../../../net/corda/core/node/ServicesForResolution.html" title="type parameter in ServicesForResolution">ServicesForResolution</a>&nbsp;services)</code>
<div class="block">Looks up identities and attachments from storage to generate a <a href="../../../../net/corda/core/transactions/LedgerTransaction.html" title="class in net.corda.core.transactions"><code>class LedgerTransaction</code></a>. A transaction is expected to
have been fully resolved using the resolution flow by this point.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/transactions/LedgerTransaction.html" title="type parameter in LedgerTransaction">LedgerTransaction</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/WireTransaction.html#toLedgerTransaction-resolveIdentity-resolveAttachment-resolveStateRef-resolveContractAttachment-">toLedgerTransaction</a></span>(Function1&lt;? super java.security.PublicKey,net.corda.core.identity.Party&gt;&nbsp;resolveIdentity,
                   Function1&lt;? super net.corda.core.crypto.SecureHash,? extends net.corda.core.contracts.Attachment&gt;&nbsp;resolveAttachment,
                   Function1&lt;? super net.corda.core.contracts.StateRef,? extends net.corda.core.contracts.TransactionState&lt;?&gt;&gt;&nbsp;resolveStateRef,
                   Function1&lt;? super net.corda.core.contracts.TransactionState&lt;? extends net.corda.core.contracts.ContractState&gt;,? extends net.corda.core.crypto.SecureHash&gt;&nbsp;resolveContractAttachment)</code>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;&nbsp;</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/transactions/WireTransaction.html#toString--">toString</a></span>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.net.corda.core.transactions.TraversableTransaction">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;net.corda.core.transactions.<a href="../../../../net/corda/core/transactions/TraversableTransaction.html" title="class in net.corda.core.transactions">TraversableTransaction</a></h3>
<code><a href="../../../../net/corda/core/transactions/TraversableTransaction.html#getAttachments--">getAttachments</a>, <a href="../../../../net/corda/core/transactions/TraversableTransaction.html#getAvailableComponentGroups--">getAvailableComponentGroups</a>, <a href="../../../../net/corda/core/transactions/TraversableTransaction.html#getCommands--">getCommands</a>, <a href="../../../../net/corda/core/transactions/TraversableTransaction.html#getComponentGroups--">getComponentGroups</a>, <a href="../../../../net/corda/core/transactions/TraversableTransaction.html#getDigestService--">getDigestService</a>, <a href="../../../../net/corda/core/transactions/TraversableTransaction.html#getInputs--">getInputs</a>, <a href="../../../../net/corda/core/transactions/TraversableTransaction.html#getNetworkParametersHash--">getNetworkParametersHash</a>, <a href="../../../../net/corda/core/transactions/TraversableTransaction.html#getNotary--">getNotary</a>, <a href="../../../../net/corda/core/transactions/TraversableTransaction.html#getOutputs--">getOutputs</a>, <a href="../../../../net/corda/core/transactions/TraversableTransaction.html#getReferences--">getReferences</a>, <a href="../../../../net/corda/core/transactions/TraversableTransaction.html#getTimeWindow--">getTimeWindow</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.net.corda.core.transactions.CoreTransaction">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;net.corda.core.transactions.<a href="../../../../net/corda/core/transactions/CoreTransaction.html" title="class in net.corda.core.transactions">CoreTransaction</a></h3>
<code><a href="../../../../net/corda/core/transactions/CoreTransaction.html#getInputs--">getInputs</a>, <a href="../../../../net/corda/core/transactions/CoreTransaction.html#getNetworkParametersHash--">getNetworkParametersHash</a>, <a href="../../../../net/corda/core/transactions/CoreTransaction.html#getReferences--">getReferences</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.net.corda.core.transactions.BaseTransaction">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;net.corda.core.transactions.<a href="../../../../net/corda/core/transactions/BaseTransaction.html" title="class in net.corda.core.transactions">BaseTransaction</a></h3>
<code><a href="../../../../net/corda/core/transactions/BaseTransaction.html#checkBaseInvariants--">checkBaseInvariants</a>, <a href="../../../../net/corda/core/transactions/BaseTransaction.html#filterOutRefs-clazz-predicate-">filterOutRefs</a>, <a href="../../../../net/corda/core/transactions/BaseTransaction.html#filterOutputs-clazz-predicate-">filterOutputs</a>, <a href="../../../../net/corda/core/transactions/BaseTransaction.html#findOutRef-clazz-predicate-">findOutRef</a>, <a href="../../../../net/corda/core/transactions/BaseTransaction.html#findOutput-clazz-predicate-">findOutput</a>, <a href="../../../../net/corda/core/transactions/BaseTransaction.html#getInputs--">getInputs</a>, <a href="../../../../net/corda/core/transactions/BaseTransaction.html#getNotary--">getNotary</a>, <a href="../../../../net/corda/core/transactions/BaseTransaction.html#getOutput-index-">getOutput</a>, <a href="../../../../net/corda/core/transactions/BaseTransaction.html#getOutputStates--">getOutputStates</a>, <a href="../../../../net/corda/core/transactions/BaseTransaction.html#getOutputs--">getOutputs</a>, <a href="../../../../net/corda/core/transactions/BaseTransaction.html#getReferences--">getReferences</a>, <a href="../../../../net/corda/core/transactions/BaseTransaction.html#outRef-index-">outRef</a>, <a href="../../../../net/corda/core/transactions/BaseTransaction.html#outRef-state-">outRef</a>, <a href="../../../../net/corda/core/transactions/BaseTransaction.html#outRefsOfType-clazz-">outRefsOfType</a>, <a href="../../../../net/corda/core/transactions/BaseTransaction.html#outputsOfType-clazz-">outputsOfType</a>, <a href="../../../../net/corda/core/transactions/BaseTransaction.html#toString--">toString</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.net.corda.core.contracts.NamedByHash">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;net.corda.core.contracts.<a href="../../../../net/corda/core/contracts/NamedByHash.html" title="interface in net.corda.core.contracts">NamedByHash</a></h3>
<code><a href="../../../../net/corda/core/contracts/NamedByHash.html#getId--">getId</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="Companion">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Companion</h4>
<pre>public static&nbsp;<a href="../../../../net/corda/core/transactions/WireTransaction.Companion.html" title="type parameter in WireTransaction.Companion">WireTransaction.Companion</a> Companion</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="WireTransaction-componentGroups-privacySalt-digestService-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>WireTransaction</h4>
<pre>public&nbsp;WireTransaction(java.util.List&lt;? extends net.corda.core.transactions.ComponentGroup&gt;&nbsp;componentGroups,
                       <a href="../../../../net/corda/core/contracts/PrivacySalt.html" title="type parameter in PrivacySalt">PrivacySalt</a>&nbsp;privacySalt,
                       <a href="../../../../net/corda/core/crypto/DigestService.html" title="type parameter in DigestService">DigestService</a>&nbsp;digestService)</pre>
<div class="block"><p><p>A transaction ready for serialisation, without any signatures attached. A WireTransaction is usually wrapped
by a <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a> that carries the signatures over this payload.
The identity of the transaction is the Merkle tree root of its components (see <a href="../../../../net/corda/core/crypto/MerkleTree.html" title="class in net.corda.core.crypto"><code>class MerkleTree</code></a>).</p></p><p><p><p>For privacy purposes, each part of a transaction should be accompanied by a nonce.
To avoid storing a random number (nonce) per component, an initial privacySalt is the sole value utilised,
so that all component nonces are deterministically computed.</p><p>A few notes about backwards compatibility:
A wire transaction can be backwards compatible, in the sense that if an old client receives a componentGroups with
more elements than expected, it will normally deserialise the required objects and omit any checks in the optional
new fields. Moreover, because the Merkle tree is constructed from the received list of <a href="../../../../net/corda/core/transactions/ComponentGroup.html" title="class in net.corda.core.transactions"><code>class ComponentGroup</code></a>, which internally
deals with bytes, any client can compute the Merkle tree and on the same time relay a <a href="../../../../net/corda/core/transactions/WireTransaction.html" title="class in net.corda.core.transactions"><code>class WireTransaction</code></a> object even
if she is unable to read some of the "optional" component types. We stress that practically, a new type of
<a href="../../../../net/corda/core/transactions/WireTransaction.html" title="class in net.corda.core.transactions"><code>class WireTransaction</code></a> should only be considered compatible if and only if the following rules apply:</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a>, 
<a href="../../../../net/corda/core/crypto/MerkleTree.html" title="class in net.corda.core.crypto"><code>class MerkleTree</code></a>, 
<a href="../../../../net/corda/core/transactions/ComponentGroup.html" title="class in net.corda.core.transactions"><code>class ComponentGroup</code></a>, 
<a href="../../../../net/corda/core/transactions/WireTransaction.html" title="class in net.corda.core.transactions"><code>class WireTransaction</code></a>, 
<a href="../../../../net/corda/core/transactions/WireTransaction.html" title="class in net.corda.core.transactions"><code>class WireTransaction</code></a></dd>
</dl>
</li>
</ul>
<a name="WireTransaction-componentGroups-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>WireTransaction</h4>
<pre>public&nbsp;WireTransaction(java.util.List&lt;? extends net.corda.core.transactions.ComponentGroup&gt;&nbsp;componentGroups)</pre>
</li>
</ul>
<a name="WireTransaction-componentGroups-privacySalt-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>WireTransaction</h4>
<pre>public&nbsp;WireTransaction(java.util.List&lt;? extends net.corda.core.transactions.ComponentGroup&gt;&nbsp;componentGroups,
                       <a href="../../../../net/corda/core/contracts/PrivacySalt.html" title="type parameter in PrivacySalt">PrivacySalt</a>&nbsp;privacySalt)</pre>
<div class="block"><p><p>Old version of <a href="../../../../net/corda/core/transactions/WireTransaction.html" title="class in net.corda.core.transactions"><code>class WireTransaction</code></a> constructor for ABI compatibility.</p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/transactions/WireTransaction.html" title="class in net.corda.core.transactions"><code>class WireTransaction</code></a></dd>
</dl>
</li>
</ul>
<a name="WireTransaction-inputs-attachments-outputs-commands-notary-timeWindow-privacySalt-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>WireTransaction</h4>
<pre>public&nbsp;WireTransaction(java.util.List&lt;net.corda.core.contracts.StateRef&gt;&nbsp;inputs,
                       java.util.List&lt;? extends net.corda.core.crypto.SecureHash&gt;&nbsp;attachments,
                       java.util.List&lt;? extends net.corda.core.contracts.TransactionState&lt;? extends net.corda.core.contracts.ContractState&gt;&gt;&nbsp;outputs,
                       java.util.List&lt;? extends net.corda.core.contracts.Command&lt;?&gt;&gt;&nbsp;commands,
                       <a href="../../../../net/corda/core/identity/Party.html" title="type parameter in Party">Party</a>&nbsp;notary,
                       <a href="../../../../net/corda/core/contracts/TimeWindow.html" title="type parameter in TimeWindow">TimeWindow</a>&nbsp;timeWindow,
                       <a href="../../../../net/corda/core/contracts/PrivacySalt.html" title="type parameter in PrivacySalt">PrivacySalt</a>&nbsp;privacySalt)</pre>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getId--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getId</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/crypto/SecureHash.html" title="type parameter in SecureHash">SecureHash</a>&nbsp;getId()</pre>
<div class="block"><p><p>The transaction id is represented by the root hash of Merkle tree over the transaction components.</p></p></div>
</li>
</ul>
<a name="getRequiredSigningKeys--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRequiredSigningKeys</h4>
<pre>public&nbsp;java.util.Set&lt;java.security.PublicKey&gt;&nbsp;getRequiredSigningKeys()</pre>
<div class="block"><p><p>Public keys that need to be fulfilled by signatures in order for the transaction to be valid.</p></p></div>
</li>
</ul>
<a name="toLedgerTransaction-services-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toLedgerTransaction</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/transactions/LedgerTransaction.html" title="type parameter in LedgerTransaction">LedgerTransaction</a>&nbsp;toLedgerTransaction(<a href="../../../../net/corda/core/node/ServicesForResolution.html" title="type parameter in ServicesForResolution">ServicesForResolution</a>&nbsp;services)</pre>
<div class="block"><p><p>Looks up identities and attachments from storage to generate a <a href="../../../../net/corda/core/transactions/LedgerTransaction.html" title="class in net.corda.core.transactions"><code>class LedgerTransaction</code></a>. A transaction is expected to
have been fully resolved using the resolution flow by this point.</p></p></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd> - if a required attachment was not found in storage.</dd>
<dd> - if an input points to a transaction not found in storage.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/transactions/LedgerTransaction.html" title="class in net.corda.core.transactions"><code>class LedgerTransaction</code></a></dd>
</dl>
</li>
</ul>
<a name="toLedgerTransaction-resolveIdentity-resolveAttachment-resolveStateRef-resolveContractAttachment-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toLedgerTransaction</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/transactions/LedgerTransaction.html" title="type parameter in LedgerTransaction">LedgerTransaction</a>&nbsp;toLedgerTransaction(Function1&lt;? super java.security.PublicKey,net.corda.core.identity.Party&gt;&nbsp;resolveIdentity,
                                             Function1&lt;? super net.corda.core.crypto.SecureHash,? extends net.corda.core.contracts.Attachment&gt;&nbsp;resolveAttachment,
                                             Function1&lt;? super net.corda.core.contracts.StateRef,? extends net.corda.core.contracts.TransactionState&lt;?&gt;&gt;&nbsp;resolveStateRef,
                                             Function1&lt;? super net.corda.core.contracts.TransactionState&lt;? extends net.corda.core.contracts.ContractState&gt;,? extends net.corda.core.crypto.SecureHash&gt;&nbsp;resolveContractAttachment)</pre>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;</div>
<div class="block"><p><p>Looks up identities, attachments and dependent input states using the provided lookup functions in order to
construct a <a href="../../../../net/corda/core/transactions/LedgerTransaction.html" title="class in net.corda.core.transactions"><code>class LedgerTransaction</code></a>. Note that identity lookup failure does <em>not</em> cause an exception to be thrown.
This invocation doesn't check various rules like no-downgrade or package namespace ownership.</p></p></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd> - if a required attachment was not found using resolveAttachment.</dd>
<dd> - if an input was not found not using resolveStateRef.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/transactions/LedgerTransaction.html" title="class in net.corda.core.transactions"><code>class LedgerTransaction</code></a></dd>
</dl>
</li>
</ul>
<a name="buildFilteredTransaction-filtering-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>buildFilteredTransaction</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/transactions/FilteredTransaction.html" title="type parameter in FilteredTransaction">FilteredTransaction</a>&nbsp;buildFilteredTransaction(java.util.function.Predicate&lt;java.lang.Object&gt;&nbsp;filtering)</pre>
<div class="block"><p><p>Build filtered transaction using provided filtering functions.</p></p></div>
</li>
</ul>
<a name="getMerkleTree--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMerkleTree</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/crypto/MerkleTree.html" title="type parameter in MerkleTree">MerkleTree</a>&nbsp;getMerkleTree()</pre>
<div class="block"><p><p>Builds whole Merkle tree for a transaction.
Briefly, each component group has its own sub Merkle tree and all of the roots of these trees are used as leaves
in a top level Merkle tree.
Note that ordering of elements inside a <a href="../../../../net/corda/core/transactions/ComponentGroup.html" title="class in net.corda.core.transactions"><code>class ComponentGroup</code></a> matters when computing the Merkle root.
On the other hand, insertion group ordering does not affect the top level Merkle tree construction, as it is
actually an ordered Merkle tree, where its leaves are ordered based on the group ordinal in <a href="../../../../net/corda/core/contracts/ComponentGroupEnum.html" title="enum in net.corda.core.contracts"><code>enum ComponentGroupEnum</code></a>.
If any of the groups is an empty list or a null object, then <a href="../../../../net/corda/core/crypto/SecureHash.Companion.html#getAllOnesHash--"><code>SecureHash.Companion.getAllOnesHash</code></a> is used as its hash.
Also, privacySalt is not a Merkle tree leaf, because it is already "inherently" included via the component nonces.</p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/transactions/ComponentGroup.html" title="class in net.corda.core.transactions"><code>class ComponentGroup</code></a>, 
<a href="../../../../net/corda/core/contracts/ComponentGroupEnum.html" title="enum in net.corda.core.contracts"><code>enum ComponentGroupEnum</code></a>, 
<a href="../../../../net/corda/core/crypto/SecureHash.Companion.html#getAllOnesHash--"><code>SecureHash.Companion.getAllOnesHash</code></a></dd>
</dl>
</li>
</ul>
<a name="checkSignature-sig-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkSignature</h4>
<pre>public&nbsp;void&nbsp;checkSignature(<a href="../../../../net/corda/core/crypto/TransactionSignature.html" title="type parameter in TransactionSignature">TransactionSignature</a>&nbsp;sig)</pre>
<div class="block"><p><p>Checks that the given signature matches one of the commands and that it is a correct signature over the tx.</p></p></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd> - if the signature didn't match the transaction contents.</dd>
<dd> - if the signature key doesn't appear in any command.</dd>
</dl>
</li>
</ul>
<a name="toString--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;java.lang.String&nbsp;toString()</pre>
</li>
</ul>
<a name="equals-other-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>equals</h4>
<pre>public&nbsp;boolean&nbsp;equals(java.lang.Object&nbsp;other)</pre>
</li>
</ul>
<a name="hashCode--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hashCode</h4>
<pre>public&nbsp;int&nbsp;hashCode()</pre>
</li>
</ul>
<a name="getPrivacySalt--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getPrivacySalt</h4>
<pre>public&nbsp;<a href="../../../../net/corda/core/contracts/PrivacySalt.html" title="type parameter in PrivacySalt">PrivacySalt</a>&nbsp;getPrivacySalt()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../net/corda/core/transactions/TraversableTransaction.html" title="class in net.corda.core.transactions"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?net/corda/core/transactions/WireTransaction.html" target="_top">Frames</a></li>
<li><a href="WireTransaction.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<style>
    @import url("https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,500,600");
    #cookies-eu-banner {
        background-color: rgba(83, 88, 95, 0.9);
        border-radius: 3px;
        color: #fff;
        font-family: 'Source Sans Pro', sans-serif;
        font-size: 13px;
        font-weight: 400;
        left: 3px;
        position: fixed;
        padding: 6px;
        right: 3px;
        text-align: center;
        top: 100px;
        z-index: 1000;
    }
    
    #cookies-eu-banner h3,
    #cookies-eu-banner p {
        color: #fff;
        font-size: 18px;
        letter-spacing: 0;
    }
    
    #cookies-eu-banner h3 {
        font-size: 24px;
        font-style: normal;
        font-weight: 400;
        line-height: 1.2;
        margin: 9px 0 0;
        text-transform: uppercase;
    }
    
    #cookies-eu-banner p {
        margin-bottom: 10px;
        padding: 8px 36px 0;
        text-align: justify;
        line-height: 1.4em;
    }
    
    #cookies-eu-banner fieldset {
        min-width: 0;
        padding: 0;
        margin: 0;
        border: 0;
    }
    
    #cookies-eu-banner legend {
        color: inherit;
        display: block;
        font-size: 18px;
        line-height: inherit;
        max-width: 100%;
        margin-bottom: 16px;
        padding: 0;
        white-space: normal;
        width: 100%;
    }
    
    #cookies-eu-banner a {
        color: #62AAF1;
    }
    
    #cookies-eu-banner .cookies-button-group {
        display: flex;
        justify-content: center;
    }
    
    #cookies-eu-accept,
    #cookies-eu-accept-all {
        background-color: #ec1d24;
        border: none;
        border-radius: 6px;
        color: #fff;
        font-size: 12px;
        font-weight: 600;
        margin: 0 10px 10px;
        max-height: 40px;
        height: 40px;
        line-height: 1.1;
        text-decoration: none;
        width: 150px;
    }
    
    .cookies-checkbox {
        display: inline-block;
        margin: 5px 10px;
    }
    
    .cookies-checkbox label {
        font-size: 16px;
        margin-left: 3px;
    }
    
    @media screen and (min-width: 768px) {
        #cookies-eu-banner {
            bottom: 5px;
            top: inherit;
        }
        #cookies-eu-accept,
        #cookies-eu-accept-all {
            font-size: 14px;
        }
    }
</style>
<div id="cookies-eu-banner" style="display: none;">
    <h3 style="text-transform:none">Your privacy</h3>
    <div class='cookie-flex'>
        <p>
            We use cookies to improve your experience on our site, and to help us understand how people use our documentation. For more detailed information, see our <a href="https://www.r3.com/privacy-policy/">privacy policy</a> and <a href="#">cookie declaration</a>.
        </p>
        <form id='cookie-consent-form'>
            <fieldset>
                <legend>
                    Please select from the following options to continue to our site.
                </legend>
                <div class='cookies-button-group'>
                    <button id="cookies-eu-accept" type="button">
                      Allow cookies selected
                    </button>
                    <button id="cookies-eu-accept-all" type="button">
                      Allow all cookies
                    </button>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="necessary"
                      name="necessary"
                      autocomplete="off"
                      checked
                      disabled />
                        <input
                        name="necessary"
                        type="hidden"
                        value="on"/>
                        <label for="necessary">Necessary</label>
                    </span>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="preferences"
                      name="preferences"
                      autocomplete="off" />
                      <label for="preferences">Preferences</label>
                    </span>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="statistics"
                      name="statistics"
                      autocomplete="off" />
                      <label for="statistics">Statistics</label>
                    </span>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="marketing"
                      name="marketing"
                      autocomplete="off" />
                      <label for="marketing">Marketing</label>
                    </span>
                </div>
            </fieldset>
        </form>
    </div>
</div>
<script class='api-keys'>
    var gaKey = 'UA-87760032-1';
    var algolia_appId = "UX2KMUWFAL";
    var algolia_apiKey = "1fe3367db02689b4aeebc59efad5abaf";
    var algolia_index = "docs.corda.net";
</script>
<script class='cookies-eu-banner'>
    ! function(root, factory) {
        "use strict";
        "function" == typeof define && define.amd ? define([], factory) : "object" == typeof exports ? module.exports = factory() : root.CookiesEuBanner = factory()
    }(window, function() {
        "use strict";
        var document = window.document,
            CookiesEuBanner = function(launchFunction, waitAccept, useLocalStorage, undefined) {
                if (!(this instanceof CookiesEuBanner)) return new CookiesEuBanner(launchFunction);
                this.cookieTimeout = 33696e6, this.bots = /bot|crawler|spider|crawling/i, this.cookieName = "hasConsent", this.trackingCookiesNames = ["__utma", "__utmb", "__utmc", "__utmt", "__utmv", "__utmz", "_ga", "_gat", "_gid"], this.launchFunction = launchFunction, this.waitAccept = waitAccept || !1, this.useLocalStorage = useLocalStorage || !1, this.init()
            };
        return CookiesEuBanner.prototype = {
            init: function() {
                var isBot = this.bots.test(navigator.userAgent);
                navigator.doNotTrack || navigator.msDoNotTrack || window.doNotTrack;
                return isBot || !1 === this.hasConsent() ? (this.removeBanner(0), !1) : !0 === this.hasConsent() ? (this.launchFunction(), !0) : (this.showBanner(), void(this.waitAccept || this.setConsent(!0)))
            },
            showBanner: function() {
                var _this = this,
                    getElementById = document.getElementById.bind(document),
                    banner = getElementById("cookies-eu-banner"),
                    rejectButton = getElementById("cookies-eu-reject"),
                    acceptButton = getElementById("cookies-eu-accept"),
                    moreLink = getElementById("cookies-eu-more"),
                    waitRemove = void 0 === banner.dataset.waitRemove ? 0 : parseInt(banner.dataset.waitRemove),
                    addClickListener = this.addClickListener,
                    removeBanner = _this.removeBanner.bind(_this, waitRemove);
                banner.style.display = "block", moreLink && addClickListener(moreLink, function() {
                    _this.deleteCookie(_this.cookieName)
                }), acceptButton && addClickListener(acceptButton, function() {
                    removeBanner(), _this.setConsent(!0), _this.launchFunction()
                }), rejectButton && addClickListener(rejectButton, function() {
                    removeBanner(), _this.setConsent(!1), _this.trackingCookiesNames.map(_this.deleteCookie)
                })
            },
            setConsent: function(consent) {
                if (this.useLocalStorage) return localStorage.setItem(this.cookieName, consent);
                this.setCookie(this.cookieName, consent)
            },
            hasConsent: function() {
                function isCookieSetTo(value) {
                    return -1 < document.cookie.indexOf(cookieName + "=" + value) || localStorage.getItem(cookieName) === value
                }
                var cookieName = this.cookieName;
                return !!isCookieSetTo("true") || !isCookieSetTo("false") && null
            },
            setCookie: function(name, value) {
                var date = new Date;
                date.setTime(date.getTime() + this.cookieTimeout), document.cookie = name + "=" + value + ";SameSite=Strict;expires=" + date.toGMTString() + ";path=/"
            },
            deleteCookie: function(name) {
                var hostname = document.location.hostname.replace(/^www\./, ""),
                    commonSuffix = "; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/";
                document.cookie = name + "=; domain=." + hostname + commonSuffix, document.cookie = name + "=" + commonSuffix
            },
            addClickListener: function(DOMElement, callback) {
                if (DOMElement.attachEvent) return DOMElement.attachEvent("onclick", callback);
                DOMElement.addEventListener("click", callback)
            },
            removeBanner: function(wait) {
                setTimeout(function() {
                    var banner = document.getElementById("cookies-eu-banner");
                    banner && banner.parentNode && banner.parentNode.removeChild(banner)
                }, wait)
            }
        }, CookiesEuBanner
    });
</script>
<script class='google-analytics'>
    function googleAnalytics() {
        var i, s, o, r, a, m;
        i = window, s = document, o = "script", r = "ga", i.GoogleAnalyticsObject = r, i.ga = i.ga || function() {
            (i.ga.q = i.ga.q || []).push(arguments)
        }, i.ga.l = +new Date, a = s.createElement(o), m = s.getElementsByTagName(o)[0], a.async = 1, a.src = "//www.google-analytics.com/analytics.js", m.parentNode.insertBefore(a, m), window.ga("create", "UA-87760032-1", "auto"), window.ga("send", "pageview")
    }
</script>
<script class='docSearchInit'>
    function docSearchInit() {
        var algoliaOptions;
        document.querySelector("#search-input") && (algoliaOptions = {
            hitsPerPage: 5,
            facetFilters: facetFilters
        }, /404.html/.test(window.location.pathname) && delete algoliaOptions.facetFilters, window.docsearch({
            appId: algolia_appId,
            apiKey: algolia_apiKey,
            indexName: algolia_index,
            inputSelector: "#search-input",
            algoliaOptions: algoliaOptions
        }))
    }
</script>
<script class='corda-cookie-banner'>
    const docsearchLoad = (resolve, reject) => {
        const script = document.createElement('script');
        document.body.appendChild(script);
        script.onload = resolve;
        script.onerror = reject;
        script.async = true;
        script.src = "https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.js";
    };

    class DocsiteCookies {
        constructor() {
            this.name = 'corda_cookie';
            this.cookiesAccepted = {
                set: true,
                necessary: true,
                preferences: false,
                statistics: false,
                marketing: false
            };
            this.form = document.querySelector('#cookie-consent-form');
            this.handleAllCookies();

            new CookiesEuBanner(() => {
                this.cookieBanner();
            }, true);
        }

        handleAllCookies() {
            const acceptButton = document.querySelector('#cookies-eu-accept');
            const allCookiesButton = document.querySelector('#cookies-eu-accept-all');

            allCookiesButton.addEventListener('click', e => {
                e.preventDefault();
                this.allowAllCookies(this.form);
                acceptButton.click();
            });
        }

        cookieBanner() {
            if (!this.checkConsent()) {
                this.formToCookie(this.name, this.form);
                this.setAdditionalServices();
            } else {
                this.setAdditionalServices();
            }
        }

        allowAllCookies(form) {
            let cookiePreferences = form.querySelectorAll('.cookies-checkbox');
            for (let cookie of cookiePreferences) {
                cookie.querySelector('input').checked = true;
            }
        }

        formToCookie(name, form) {
            const thirteenMonthsInMils = 31104000000;

            let date = new Date();
            date.setTime(date.getTime() + thirteenMonthsInMils);

            let formData = new FormData(form);
            for (var pair of formData.entries()) {
                switch (pair[0]) {
                    case "necessary":
                        this.cookiesAccepted.necessary = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    case "preferences":
                        this.cookiesAccepted.preferences = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    case "statistics":
                        this.cookiesAccepted.statistics = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    case "marketing":
                        this.cookiesAccepted.marketing = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    default:
                        break;
                }
            }
            let cookieValue = JSON.stringify(this.cookiesAccepted);

            document.cookie = `${name}=${cookieValue};SameSite=Strict;expires=${date.toGMTString()};path=/`;
        }

        checkConsent() {
            let cookieName = this.name;
            let cookieValue = this.getCookie(cookieName);

            if (cookieValue) {
                if (cookieValue.set === true) {
                    return true;
                } else {
                    return false;
                }
            } else {
                return false;
            }
        }

        getCookie(name) {
            let value = "; " + document.cookie;
            let parts = value.split("; " + name + "=");
            let cValue = "";

            if (parts.length == 2) {
                cValue = parts.pop().split(";").shift();
            }

            if (hasJsonStructure(cValue)) {
                return JSON.parse(cValue);
            } else {
                return cValue;
            }
        }

        setAdditionalServices() {
            let cookieConsent = this.getCookie(this.name);
            for (let [key, value] of Object.entries(cookieConsent)) {
                if (key === 'necessary' && value === true) {
                    new Promise(docsearchLoad)
                        .then(() => {
                            docSearchInit();
                        })
                        .catch(err => console.log(err));
                }
                if (key === 'statistics' && value === true) {
                    googleAnalytics();
                }
            }
        }
    }

    function hasJsonStructure(str) {
        if (typeof str !== 'string') return false;
        try {
            const result = JSON.parse(str);
            const type = Object.prototype.toString.call(result);
            return type === '[object Object]' ||
                type === '[object Array]';
        } catch (err) {
            return false;
        }
    }
</script>
<script class='initialise'>
    new DocsiteCookies();
</script>
</body>
</html>
