<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_202) on Fri Apr 03 13:47:20 BST 2020 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>ServiceHub</title>
<meta name="date" content="2020-04-03">
<meta name="keywords" content="net.corda.core.node.ServiceHub interface">
<meta name="keywords" content="getVaultService()">
<meta name="keywords" content="getKeyManagementService()">
<meta name="keywords" content="getContractUpgradeService()">
<meta name="keywords" content="getValidatedTransactions()">
<meta name="keywords" content="getNetworkMapCache()">
<meta name="keywords" content="getClock()">
<meta name="keywords" content="getMyInfo()">
<meta name="keywords" content="cordaService()">
<meta name="keywords" content="recordTransactions()">
<meta name="keywords" content="toStateAndRef()">
<meta name="keywords" content="signInitialTransaction()">
<meta name="keywords" content="createSignature()">
<meta name="keywords" content="addSignature()">
<meta name="keywords" content="jdbcSession()">
<meta name="keywords" content="registerUnloadHandler()">
<meta name="keywords" content="getAppContext()">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>

<meta name="docsearch:language" content="en">
<meta name="docsearch:version" content="3.2">
<meta name="docsearch:project" content="corda-enterprise">
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ServiceHub";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":18,"i1":18,"i2":18,"i3":18,"i4":18,"i5":18,"i6":18,"i7":18,"i8":18,"i9":18,"i10":18,"i11":18,"i12":18,"i13":18,"i14":18,"i15":18,"i16":18,"i17":18,"i18":18,"i19":18,"i20":18,"i21":18,"i22":18,"i23":18,"i24":18,"i25":18};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],16:["t5","Default Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../net/corda/core/node/NotaryInfo.html" title="class in net.corda.core.node"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../net/corda/core/node/ServicesForResolution.html" title="interface in net.corda.core.node"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?net/corda/core/node/ServiceHub.html" target="_top">Frames</a></li>
<li><a href="ServiceHub.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">net.corda.core.node</div>
<h2 title="Interface ServiceHub" class="title">Interface ServiceHub</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd><a href="../../../../net/corda/core/node/ServicesForResolution.html" title="interface in net.corda.core.node">ServicesForResolution</a></dd>
</dl>
<dl>
<dt>All Known Subinterfaces:</dt>
<dd><a href="../../../../net/corda/core/node/AppServiceHub.html" title="interface in net.corda.core.node">AppServiceHub</a></dd>
</dl>
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../../net/corda/testing/node/MockServices.html" title="class in net.corda.testing.node">MockServices</a></dd>
</dl>
<hr>
<br>
<pre>public <span class="typeNameLabel">ServiceHub</span>
extends <a href="../../../../net/corda/core/node/ServicesForResolution.html" title="interface in net.corda.core.node">ServicesForResolution</a></pre>
<div class="block"><p><p>A service hub is the starting point for most operations you can do inside the node. You are provided with one
when a class annotated with <a href="../../../../net/corda/core/node/services/CordaService.html" title="interface in net.corda.core.node.services"><code>interface CordaService</code></a> is constructed, and you have access to one inside flows. Most RPCs
simply forward to the services found here after some access checking.</p></p><p><p><p>The APIs are organised roughly by category, with a few very important top level APIs available on the ServiceHub
itself. Inside a flow, it's safe to keep a reference to services found here on the stack: checkpointing will do the
right thing (it won't try to serialise the internals of the service).</p><p>In unit test environments, some of those services may be missing or mocked out.</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/node/services/CordaService.html" title="interface in net.corda.core.node.services"><code>interface CordaService</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Interface and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/node/ServiceHub.DefaultImpls.html" title="class in net.corda.core.node">ServiceHub.DefaultImpls</a></span></code>
<div class="block">A service hub is the starting point for most operations you can do inside the node. You are provided with one
when a class annotated with <a href="../../../../net/corda/core/node/services/CordaService.html" title="interface in net.corda.core.node.services"><code>interface CordaService</code></a> is constructed, and you have access to one inside flows. Most RPCs
simply forward to the services found here after some access checking.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t5" class="tableTab"><span><a href="javascript:show(16);">Default Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="type parameter in SignedTransaction">SignedTransaction</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/node/ServiceHub.html#addSignature-signedTransaction-publicKey-">addSignature</a></span>(<a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="type parameter in SignedTransaction">SignedTransaction</a>&nbsp;signedTransaction,
            java.security.PublicKey&nbsp;publicKey)</code>
<div class="block">Helper method to append an additional signature to an existing (partially) <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a>.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="type parameter in SignedTransaction">SignedTransaction</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/node/ServiceHub.html#addSignature-signedTransaction-">addSignature</a></span>(<a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="type parameter in SignedTransaction">SignedTransaction</a>&nbsp;signedTransaction)</code>
<div class="block">Helper method to append an additional signature for an existing (partially) <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a>
using the default identity signing key of the node.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>&lt;T extends <a href="../../../../net/corda/core/serialization/SerializeAsToken.html" title="type parameter in SerializeAsToken">SerializeAsToken</a>&gt;<br>T</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/node/ServiceHub.html#cordaService-type-">cordaService</a></span>(java.lang.Class&lt;T&gt;&nbsp;type)</code>
<div class="block">Return the singleton instance of the given Corda service type. This is a class that is annotated with
<a href="../../../../net/corda/core/node/services/CordaService.html" title="interface in net.corda.core.node.services"><code>interface CordaService</code></a> and will have automatically been registered by the node.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/crypto/TransactionSignature.html" title="type parameter in TransactionSignature">TransactionSignature</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/node/ServiceHub.html#createSignature-signedTransaction-publicKey-">createSignature</a></span>(<a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="type parameter in SignedTransaction">SignedTransaction</a>&nbsp;signedTransaction,
               java.security.PublicKey&nbsp;publicKey)</code>
<div class="block">Helper method to create an additional signature for an existing (partially) <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a>. Additional
<a href="../../../../net/corda/core/crypto/SignatureMetadata.html" title="class in net.corda.core.crypto"><code>class SignatureMetadata</code></a>, including the
platform version used during signing and the cryptographic signature scheme use, is added to the signature.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/crypto/TransactionSignature.html" title="type parameter in TransactionSignature">TransactionSignature</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/node/ServiceHub.html#createSignature-signedTransaction-">createSignature</a></span>(<a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="type parameter in SignedTransaction">SignedTransaction</a>&nbsp;signedTransaction)</code>
<div class="block">Helper method to create a signature for an existing (partially) <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a>
using the default identity signing key of the node. The legal identity key is used to sign. Additional
<a href="../../../../net/corda/core/crypto/SignatureMetadata.html" title="class in net.corda.core.crypto"><code>class SignatureMetadata</code></a>, including the
platform version used during signing and the cryptographic signature scheme use, is added to the signature.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/crypto/TransactionSignature.html" title="type parameter in TransactionSignature">TransactionSignature</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/node/ServiceHub.html#createSignature-filteredTransaction-publicKey-">createSignature</a></span>(<a href="../../../../net/corda/core/transactions/FilteredTransaction.html" title="type parameter in FilteredTransaction">FilteredTransaction</a>&nbsp;filteredTransaction,
               java.security.PublicKey&nbsp;publicKey)</code>
<div class="block">Helper method to create a signature for a FilteredTransaction. Additional <a href="../../../../net/corda/core/crypto/SignatureMetadata.html" title="class in net.corda.core.crypto"><code>class SignatureMetadata</code></a>, including the
platform version used during signing and the cryptographic signature scheme use, is added to the signature.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/crypto/TransactionSignature.html" title="type parameter in TransactionSignature">TransactionSignature</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/node/ServiceHub.html#createSignature-filteredTransaction-">createSignature</a></span>(<a href="../../../../net/corda/core/transactions/FilteredTransaction.html" title="type parameter in FilteredTransaction">FilteredTransaction</a>&nbsp;filteredTransaction)</code>
<div class="block">Helper method to create a signature for a FilteredTransaction
using the default identity signing key of the node. The legal identity key is used to sign. Additional
<a href="../../../../net/corda/core/crypto/SignatureMetadata.html" title="class in net.corda.core.crypto"><code>class SignatureMetadata</code></a>, including the platform version used during signing and the cryptographic signature scheme use,
is added to the signature.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/cordapp/CordappContext.html" title="type parameter in CordappContext">CordappContext</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/node/ServiceHub.html#getAppContext--">getAppContext</a></span>()</code>
<div class="block">See <a href="../../../../net/corda/core/cordapp/CordappProvider.html#getAppContext--"><code>CordappProvider.getAppContext</code></a></div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>java.time.Clock</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/node/ServiceHub.html#getClock--">getClock</a></span>()</code>
<div class="block">A <a href="http://docs.oracle.com/javase/8/docs/api/java/time/Clock.html">Clock</a> representing the node's current time. This should be used in preference to directly accessing the
clock so the current time can be controlled during unit testing.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/node/services/ContractUpgradeService.html" title="type parameter in ContractUpgradeService">ContractUpgradeService</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/node/ServiceHub.html#getContractUpgradeService--">getContractUpgradeService</a></span>()</code>
<div class="block">The <a href="../../../../net/corda/core/node/services/ContractUpgradeService.html" title="interface in net.corda.core.node.services"><code>interface ContractUpgradeService</code></a> is responsible for securely upgrading contract state objects according to
a specified and mutually agreed (amongst participants) contract version.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/node/services/KeyManagementService.html" title="type parameter in KeyManagementService">KeyManagementService</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/node/ServiceHub.html#getKeyManagementService--">getKeyManagementService</a></span>()</code>
<div class="block">The key management service is responsible for storing and using private keys to sign things. An
implementation of this may, for example, call out to a hardware security module that enforces various
auditing and frequency-of-use requirements.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/node/NodeInfo.html" title="type parameter in NodeInfo">NodeInfo</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/node/ServiceHub.html#getMyInfo--">getMyInfo</a></span>()</code>
<div class="block">The <a href="../../../../net/corda/core/node/NodeInfo.html" title="class in net.corda.core.node"><code>class NodeInfo</code></a> object corresponding to our own entry in the network map.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/node/services/NetworkMapCache.html" title="type parameter in NetworkMapCache">NetworkMapCache</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/node/ServiceHub.html#getNetworkMapCache--">getNetworkMapCache</a></span>()</code>
<div class="block">A network map contains lists of nodes on the network along with information about their identity keys, services
they provide and host names or IP addresses where they can be connected to. The cache wraps around a map fetched
from an authoritative service, and adds easy lookup of the data stored within it. Generally it would be initialised
with a specified network map service, which it fetches data from and then subscribes to updates of.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/node/services/TransactionStorage.html" title="type parameter in TransactionStorage">TransactionStorage</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/node/ServiceHub.html#getValidatedTransactions--">getValidatedTransactions</a></span>()</code>
<div class="block">A map of hash->tx where tx has been signature/contract validated and the states are known to be correct.
The signatures aren't technically needed after that point, but we keep them around so that we can relay
the transaction data to other nodes that need it.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/node/services/VaultService.html" title="type parameter in VaultService">VaultService</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/node/ServiceHub.html#getVaultService--">getVaultService</a></span>()</code>
<div class="block">The vault service lets you observe, soft lock and add notes to states that involve you or are relevant to your
node in some way. Additionally you may query and track states that correspond to various criteria.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>java.sql.Connection</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/node/ServiceHub.html#jdbcSession--">jdbcSession</a></span>()</code>
<div class="block">Exposes a JDBC connection (session) object using the currently configured database.
Applications can use this to execute arbitrary SQL queries (native, direct, prepared, callable)
against its Node database tables (including custom contract tables defined by extending
<a href="../../../../net/corda/core/schemas/QueryableState.html" title="interface in net.corda.core.schemas"><code>interface QueryableState</code></a>).</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/node/ServiceHub.html#recordTransactions-notifyVault-txs-">recordTransactions</a></span>(boolean&nbsp;notifyVault,
                  java.lang.Iterable&lt;net.corda.core.transactions.SignedTransaction&gt;&nbsp;txs)</code>
<div class="block">Stores the given <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a>s in the local transaction storage and then sends them to the vault for
further processing if notifyVault is true. This is expected to be run within a database transaction.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/node/ServiceHub.html#recordTransactions-notifyVault-first-remaining-">recordTransactions</a></span>(boolean&nbsp;notifyVault,
                  <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="type parameter in SignedTransaction">SignedTransaction</a>&nbsp;first,
                  net.corda.core.transactions.SignedTransaction&nbsp;remaining)</code>
<div class="block">Stores the given <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a>s in the local transaction storage and then sends them to the vault for
further processing if notifyVault is true. This is expected to be run within a database transaction.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/node/ServiceHub.html#recordTransactions-statesToRecord-txs-">recordTransactions</a></span>(<a href="../../../../net/corda/core/node/StatesToRecord.html" title="type parameter in StatesToRecord">StatesToRecord</a>&nbsp;statesToRecord,
                  java.lang.Iterable&lt;net.corda.core.transactions.SignedTransaction&gt;&nbsp;txs)</code>
<div class="block">Stores the given <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a>s in the local transaction storage and then sends them to the vault for
further processing if statesToRecord is not StatesToRecord.NONE.
This is expected to be run within a database transaction.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/node/ServiceHub.html#recordTransactions-first-remaining-">recordTransactions</a></span>(<a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="type parameter in SignedTransaction">SignedTransaction</a>&nbsp;first,
                  net.corda.core.transactions.SignedTransaction&nbsp;remaining)</code>
<div class="block">Stores the given <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a>s in the local transaction storage and then sends them to the vault for
further processing. This is expected to be run within a database transaction.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/node/ServiceHub.html#recordTransactions-txs-">recordTransactions</a></span>(java.lang.Iterable&lt;net.corda.core.transactions.SignedTransaction&gt;&nbsp;txs)</code>
<div class="block">Stores the given <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a>s in the local transaction storage and then sends them to the vault for
further processing. This is expected to be run within a database transaction.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/node/ServiceHub.html#registerUnloadHandler-runOnStop-">registerUnloadHandler</a></span>(kotlin.jvm.functions.Function0&lt;kotlin.Unit&gt;&nbsp;runOnStop)</code>
<div class="block">Allows the registration of a callback that may inform services when the app is shutting down.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="type parameter in SignedTransaction">SignedTransaction</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/node/ServiceHub.html#signInitialTransaction-builder-publicKey-">signInitialTransaction</a></span>(<a href="../../../../net/corda/core/transactions/TransactionBuilder.html" title="type parameter in TransactionBuilder">TransactionBuilder</a>&nbsp;builder,
                      java.security.PublicKey&nbsp;publicKey)</code>
<div class="block">Helper method to construct an initial partially signed transaction from a <a href="../../../../net/corda/core/transactions/TransactionBuilder.html" title="class in net.corda.core.transactions"><code>class TransactionBuilder</code></a>
using keys stored inside the node. Signature metadata is added automatically.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="type parameter in SignedTransaction">SignedTransaction</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/node/ServiceHub.html#signInitialTransaction-builder-">signInitialTransaction</a></span>(<a href="../../../../net/corda/core/transactions/TransactionBuilder.html" title="type parameter in TransactionBuilder">TransactionBuilder</a>&nbsp;builder)</code>
<div class="block">Helper method to construct an initial partially signed transaction from a TransactionBuilder
using the default identity key contained in the node. The legal identity key is used to sign.</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code><a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="type parameter in SignedTransaction">SignedTransaction</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/node/ServiceHub.html#signInitialTransaction-builder-signingPubKeys-">signInitialTransaction</a></span>(<a href="../../../../net/corda/core/transactions/TransactionBuilder.html" title="type parameter in TransactionBuilder">TransactionBuilder</a>&nbsp;builder,
                      java.lang.Iterable&lt;? extends java.security.PublicKey&gt;&nbsp;signingPubKeys)</code>
<div class="block">Helper method to construct an initial partially signed transaction from a <a href="../../../../net/corda/core/transactions/TransactionBuilder.html" title="class in net.corda.core.transactions"><code>class TransactionBuilder</code></a>
using a set of keys all held in this node.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>&lt;T extends <a href="../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;<br><a href="../../../../net/corda/core/contracts/StateAndRef.html" title="type parameter in StateAndRef">StateAndRef</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/corda/core/node/ServiceHub.html#toStateAndRef-stateRef-">toStateAndRef</a></span>(<a href="../../../../net/corda/core/contracts/StateRef.html" title="type parameter in StateRef">StateRef</a>&nbsp;stateRef)</code>
<div class="block">Converts the given <a href="../../../../net/corda/core/contracts/StateRef.html" title="class in net.corda.core.contracts"><code>class StateRef</code></a> into a <a href="../../../../net/corda/core/contracts/StateAndRef.html" title="class in net.corda.core.contracts"><code>class StateAndRef</code></a> object.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.net.corda.core.node.ServicesForResolution">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;net.corda.core.node.<a href="../../../../net/corda/core/node/ServicesForResolution.html" title="interface in net.corda.core.node">ServicesForResolution</a></h3>
<code><a href="../../../../net/corda/core/node/ServicesForResolution.html#getAttachments--">getAttachments</a>, <a href="../../../../net/corda/core/node/ServicesForResolution.html#getCordappProvider--">getCordappProvider</a>, <a href="../../../../net/corda/core/node/ServicesForResolution.html#getIdentityService--">getIdentityService</a>, <a href="../../../../net/corda/core/node/ServicesForResolution.html#getNetworkParameters--">getNetworkParameters</a>, <a href="../../../../net/corda/core/node/ServicesForResolution.html#loadState-stateRef-">loadState</a>, <a href="../../../../net/corda/core/node/ServicesForResolution.html#loadStates-stateRefs-">loadStates</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getVaultService--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVaultService</h4>
<pre><a href="../../../../net/corda/core/node/services/VaultService.html" title="type parameter in VaultService">VaultService</a>&nbsp;getVaultService()</pre>
<div class="block"><p><p>The vault service lets you observe, soft lock and add notes to states that involve you or are relevant to your
node in some way. Additionally you may query and track states that correspond to various criteria.</p></p></div>
</li>
</ul>
<a name="getKeyManagementService--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getKeyManagementService</h4>
<pre><a href="../../../../net/corda/core/node/services/KeyManagementService.html" title="type parameter in KeyManagementService">KeyManagementService</a>&nbsp;getKeyManagementService()</pre>
<div class="block"><p><p>The key management service is responsible for storing and using private keys to sign things. An
implementation of this may, for example, call out to a hardware security module that enforces various
auditing and frequency-of-use requirements.</p></p><p><p><p>You don't normally need to use this directly. If you have a <a href="../../../../net/corda/core/transactions/TransactionBuilder.html" title="class in net.corda.core.transactions"><code>class TransactionBuilder</code></a> and wish to sign it to
get a <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a>, look at signInitialTransaction.</p></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/transactions/TransactionBuilder.html" title="class in net.corda.core.transactions"><code>class TransactionBuilder</code></a>, 
<a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a></dd>
</dl>
</li>
</ul>
<a name="getContractUpgradeService--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getContractUpgradeService</h4>
<pre><a href="../../../../net/corda/core/node/services/ContractUpgradeService.html" title="type parameter in ContractUpgradeService">ContractUpgradeService</a>&nbsp;getContractUpgradeService()</pre>
<div class="block"><p><p>The <a href="../../../../net/corda/core/node/services/ContractUpgradeService.html" title="interface in net.corda.core.node.services"><code>interface ContractUpgradeService</code></a> is responsible for securely upgrading contract state objects according to
a specified and mutually agreed (amongst participants) contract version.</p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/node/services/ContractUpgradeService.html" title="interface in net.corda.core.node.services"><code>interface ContractUpgradeService</code></a>, 
<a href="../../../../net/corda/core/flows/ContractUpgradeFlow.html" title="class in net.corda.core.flows"><code>class ContractUpgradeFlow</code></a></dd>
</dl>
</li>
</ul>
<a name="getValidatedTransactions--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getValidatedTransactions</h4>
<pre><a href="../../../../net/corda/core/node/services/TransactionStorage.html" title="type parameter in TransactionStorage">TransactionStorage</a>&nbsp;getValidatedTransactions()</pre>
<div class="block"><p><p>A map of hash->tx where tx has been signature/contract validated and the states are known to be correct.
The signatures aren't technically needed after that point, but we keep them around so that we can relay
the transaction data to other nodes that need it.</p></p></div>
</li>
</ul>
<a name="getNetworkMapCache--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNetworkMapCache</h4>
<pre><a href="../../../../net/corda/core/node/services/NetworkMapCache.html" title="type parameter in NetworkMapCache">NetworkMapCache</a>&nbsp;getNetworkMapCache()</pre>
<div class="block"><p><p>A network map contains lists of nodes on the network along with information about their identity keys, services
they provide and host names or IP addresses where they can be connected to. The cache wraps around a map fetched
from an authoritative service, and adds easy lookup of the data stored within it. Generally it would be initialised
with a specified network map service, which it fetches data from and then subscribes to updates of.</p></p></div>
</li>
</ul>
<a name="getClock--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getClock</h4>
<pre>java.time.Clock&nbsp;getClock()</pre>
<div class="block"><p><p>A <a href="http://docs.oracle.com/javase/8/docs/api/java/time/Clock.html">Clock</a> representing the node's current time. This should be used in preference to directly accessing the
clock so the current time can be controlled during unit testing.</p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="http://docs.oracle.com/javase/8/docs/api/java/time/Clock.html">Clock</a></dd>
</dl>
</li>
</ul>
<a name="getMyInfo--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMyInfo</h4>
<pre><a href="../../../../net/corda/core/node/NodeInfo.html" title="type parameter in NodeInfo">NodeInfo</a>&nbsp;getMyInfo()</pre>
<div class="block"><p><p>The <a href="../../../../net/corda/core/node/NodeInfo.html" title="class in net.corda.core.node"><code>class NodeInfo</code></a> object corresponding to our own entry in the network map.</p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/node/NodeInfo.html" title="class in net.corda.core.node"><code>class NodeInfo</code></a></dd>
</dl>
</li>
</ul>
<a name="cordaService-type-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cordaService</h4>
<pre>&lt;T extends <a href="../../../../net/corda/core/serialization/SerializeAsToken.html" title="type parameter in SerializeAsToken">SerializeAsToken</a>&gt;&nbsp;T&nbsp;cordaService(java.lang.Class&lt;T&gt;&nbsp;type)</pre>
<div class="block"><p><p>Return the singleton instance of the given Corda service type. This is a class that is annotated with
<a href="../../../../net/corda/core/node/services/CordaService.html" title="interface in net.corda.core.node.services"><code>interface CordaService</code></a> and will have automatically been registered by the node.</p></p></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd> - If type is not annotated with <a href="../../../../net/corda/core/node/services/CordaService.html" title="interface in net.corda.core.node.services"><code>interface CordaService</code></a> or if the instance is not found.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/node/services/CordaService.html" title="interface in net.corda.core.node.services"><code>interface CordaService</code></a></dd>
</dl>
</li>
</ul>
<a name="recordTransactions-notifyVault-txs-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recordTransactions</h4>
<pre>void&nbsp;recordTransactions(boolean&nbsp;notifyVault,
                        java.lang.Iterable&lt;net.corda.core.transactions.SignedTransaction&gt;&nbsp;txs)</pre>
<div class="block"><p><p>Stores the given <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a>s in the local transaction storage and then sends them to the vault for
further processing if notifyVault is true. This is expected to be run within a database transaction.</p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>txs</code> - The transactions to record.</dd>
<dd><code>notifyVault</code> - indicate if the vault should be notified for the update.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a></dd>
</dl>
</li>
</ul>
<a name="recordTransactions-notifyVault-first-remaining-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recordTransactions</h4>
<pre>void&nbsp;recordTransactions(boolean&nbsp;notifyVault,
                        <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="type parameter in SignedTransaction">SignedTransaction</a>&nbsp;first,
                        net.corda.core.transactions.SignedTransaction&nbsp;remaining)</pre>
<div class="block"><p><p>Stores the given <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a>s in the local transaction storage and then sends them to the vault for
further processing if notifyVault is true. This is expected to be run within a database transaction.</p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a></dd>
</dl>
</li>
</ul>
<a name="recordTransactions-statesToRecord-txs-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recordTransactions</h4>
<pre>void&nbsp;recordTransactions(<a href="../../../../net/corda/core/node/StatesToRecord.html" title="type parameter in StatesToRecord">StatesToRecord</a>&nbsp;statesToRecord,
                        java.lang.Iterable&lt;net.corda.core.transactions.SignedTransaction&gt;&nbsp;txs)</pre>
<div class="block"><p><p>Stores the given <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a>s in the local transaction storage and then sends them to the vault for
further processing if statesToRecord is not StatesToRecord.NONE.
This is expected to be run within a database transaction.</p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>txs</code> - The transactions to record.</dd>
<dd><code>statesToRecord</code> - how the vault should treat the output states of the transaction.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a></dd>
</dl>
</li>
</ul>
<a name="recordTransactions-first-remaining-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recordTransactions</h4>
<pre>void&nbsp;recordTransactions(<a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="type parameter in SignedTransaction">SignedTransaction</a>&nbsp;first,
                        net.corda.core.transactions.SignedTransaction&nbsp;remaining)</pre>
<div class="block"><p><p>Stores the given <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a>s in the local transaction storage and then sends them to the vault for
further processing. This is expected to be run within a database transaction.</p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a></dd>
</dl>
</li>
</ul>
<a name="recordTransactions-txs-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recordTransactions</h4>
<pre>void&nbsp;recordTransactions(java.lang.Iterable&lt;net.corda.core.transactions.SignedTransaction&gt;&nbsp;txs)</pre>
<div class="block"><p><p>Stores the given <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a>s in the local transaction storage and then sends them to the vault for
further processing. This is expected to be run within a database transaction.</p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a></dd>
</dl>
</li>
</ul>
<a name="toStateAndRef-stateRef-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toStateAndRef</h4>
<pre>&lt;T extends <a href="../../../../net/corda/core/contracts/ContractState.html" title="type parameter in ContractState">ContractState</a>&gt;&nbsp;<a href="../../../../net/corda/core/contracts/StateAndRef.html" title="type parameter in StateAndRef">StateAndRef</a>&lt;T&gt;&nbsp;toStateAndRef(<a href="../../../../net/corda/core/contracts/StateRef.html" title="type parameter in StateRef">StateRef</a>&nbsp;stateRef)</pre>
<div class="block"><p><p>Converts the given <a href="../../../../net/corda/core/contracts/StateRef.html" title="class in net.corda.core.contracts"><code>class StateRef</code></a> into a <a href="../../../../net/corda/core/contracts/StateAndRef.html" title="class in net.corda.core.contracts"><code>class StateAndRef</code></a> object.</p></p></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd> - if stateRef points to a non-existent transaction.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/contracts/StateRef.html" title="class in net.corda.core.contracts"><code>class StateRef</code></a>, 
<a href="../../../../net/corda/core/contracts/StateAndRef.html" title="class in net.corda.core.contracts"><code>class StateAndRef</code></a></dd>
</dl>
</li>
</ul>
<a name="signInitialTransaction-builder-publicKey-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>signInitialTransaction</h4>
<pre><a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="type parameter in SignedTransaction">SignedTransaction</a>&nbsp;signInitialTransaction(<a href="../../../../net/corda/core/transactions/TransactionBuilder.html" title="type parameter in TransactionBuilder">TransactionBuilder</a>&nbsp;builder,
                                         java.security.PublicKey&nbsp;publicKey)</pre>
<div class="block"><p><p>Helper method to construct an initial partially signed transaction from a <a href="../../../../net/corda/core/transactions/TransactionBuilder.html" title="class in net.corda.core.transactions"><code>class TransactionBuilder</code></a>
using keys stored inside the node. Signature metadata is added automatically.</p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>builder</code> - The <a href="../../../../net/corda/core/transactions/TransactionBuilder.html" title="class in net.corda.core.transactions"><code>class TransactionBuilder</code></a> to seal with the node's signature.
Any existing signatures on the builder will be preserved.</dd>
<dd><code>publicKey</code> - The <a href="http://docs.oracle.com/javase/8/docs/api/java/security/PublicKey.html">PublicKey</a> matched to the internal <a href="http://docs.oracle.com/javase/8/docs/api/java/security/PrivateKey.html">java.security.PrivateKey</a> to use in signing this transaction.
If the passed in key is actually a CompositeKey the code searches for the first child key hosted within this node
to sign with.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns a SignedTransaction with the new node signature attached.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/transactions/TransactionBuilder.html" title="class in net.corda.core.transactions"><code>class TransactionBuilder</code></a></dd>
</dl>
</li>
</ul>
<a name="signInitialTransaction-builder-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>signInitialTransaction</h4>
<pre><a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="type parameter in SignedTransaction">SignedTransaction</a>&nbsp;signInitialTransaction(<a href="../../../../net/corda/core/transactions/TransactionBuilder.html" title="type parameter in TransactionBuilder">TransactionBuilder</a>&nbsp;builder)</pre>
<div class="block"><p><p>Helper method to construct an initial partially signed transaction from a TransactionBuilder
using the default identity key contained in the node. The legal identity key is used to sign.</p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>builder</code> - The TransactionBuilder to seal with the node's signature.
Any existing signatures on the builder will be preserved.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns a SignedTransaction with the new node signature attached.</dd>
</dl>
</li>
</ul>
<a name="signInitialTransaction-builder-signingPubKeys-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>signInitialTransaction</h4>
<pre><a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="type parameter in SignedTransaction">SignedTransaction</a>&nbsp;signInitialTransaction(<a href="../../../../net/corda/core/transactions/TransactionBuilder.html" title="type parameter in TransactionBuilder">TransactionBuilder</a>&nbsp;builder,
                                         java.lang.Iterable&lt;? extends java.security.PublicKey&gt;&nbsp;signingPubKeys)</pre>
<div class="block"><p><p>Helper method to construct an initial partially signed transaction from a <a href="../../../../net/corda/core/transactions/TransactionBuilder.html" title="class in net.corda.core.transactions"><code>class TransactionBuilder</code></a>
using a set of keys all held in this node.</p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>builder</code> - The <a href="../../../../net/corda/core/transactions/TransactionBuilder.html" title="class in net.corda.core.transactions"><code>class TransactionBuilder</code></a> to seal with the node's signature.
Any existing signatures on the builder will be preserved.</dd>
<dd><code>signingPubKeys</code> - A list of <a href="http://docs.oracle.com/javase/8/docs/api/java/security/PublicKey.html">PublicKey</a>s used to lookup the matching <a href="http://docs.oracle.com/javase/8/docs/api/java/security/PrivateKey.html">java.security.PrivateKey</a> and sign.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns a <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a> with the new node signature attached.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd> - is thrown if any keys are unavailable locally.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/transactions/TransactionBuilder.html" title="class in net.corda.core.transactions"><code>class TransactionBuilder</code></a></dd>
</dl>
</li>
</ul>
<a name="createSignature-signedTransaction-publicKey-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createSignature</h4>
<pre><a href="../../../../net/corda/core/crypto/TransactionSignature.html" title="type parameter in TransactionSignature">TransactionSignature</a>&nbsp;createSignature(<a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="type parameter in SignedTransaction">SignedTransaction</a>&nbsp;signedTransaction,
                                     java.security.PublicKey&nbsp;publicKey)</pre>
<div class="block"><p><p>Helper method to create an additional signature for an existing (partially) <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a>. Additional
<a href="../../../../net/corda/core/crypto/SignatureMetadata.html" title="class in net.corda.core.crypto"><code>class SignatureMetadata</code></a>, including the
platform version used during signing and the cryptographic signature scheme use, is added to the signature.</p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>signedTransaction</code> - The <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a> to which the signature will apply.</dd>
<dd><code>publicKey</code> - The <a href="http://docs.oracle.com/javase/8/docs/api/java/security/PublicKey.html">PublicKey</a> matching to a signing <a href="http://docs.oracle.com/javase/8/docs/api/java/security/PrivateKey.html">java.security.PrivateKey</a> hosted in the node.
If the <a href="http://docs.oracle.com/javase/8/docs/api/java/security/PublicKey.html">PublicKey</a> is actually a <a href="../../../../net/corda/core/crypto/CompositeKey.html" title="class in net.corda.core.crypto"><code>class CompositeKey</code></a> the first leaf key found locally will be used
for signing.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The <a href="../../../../net/corda/core/crypto/TransactionSignature.html" title="class in net.corda.core.crypto"><code>class TransactionSignature</code></a> generated by signing with the internally held <a href="http://docs.oracle.com/javase/8/docs/api/java/security/PrivateKey.html">java.security.PrivateKey</a>.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a>, 
<a href="../../../../net/corda/core/crypto/SignatureMetadata.html" title="class in net.corda.core.crypto"><code>class SignatureMetadata</code></a></dd>
</dl>
</li>
</ul>
<a name="createSignature-signedTransaction-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createSignature</h4>
<pre><a href="../../../../net/corda/core/crypto/TransactionSignature.html" title="type parameter in TransactionSignature">TransactionSignature</a>&nbsp;createSignature(<a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="type parameter in SignedTransaction">SignedTransaction</a>&nbsp;signedTransaction)</pre>
<div class="block"><p><p>Helper method to create a signature for an existing (partially) <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a>
using the default identity signing key of the node. The legal identity key is used to sign. Additional
<a href="../../../../net/corda/core/crypto/SignatureMetadata.html" title="class in net.corda.core.crypto"><code>class SignatureMetadata</code></a>, including the
platform version used during signing and the cryptographic signature scheme use, is added to the signature.</p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>signedTransaction</code> - The SignedTransaction to which the signature will apply.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the TransactionSignature generated by signing with the internally held identity PrivateKey.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a>, 
<a href="../../../../net/corda/core/crypto/SignatureMetadata.html" title="class in net.corda.core.crypto"><code>class SignatureMetadata</code></a></dd>
</dl>
</li>
</ul>
<a name="addSignature-signedTransaction-publicKey-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addSignature</h4>
<pre><a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="type parameter in SignedTransaction">SignedTransaction</a>&nbsp;addSignature(<a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="type parameter in SignedTransaction">SignedTransaction</a>&nbsp;signedTransaction,
                               java.security.PublicKey&nbsp;publicKey)</pre>
<div class="block"><p><p>Helper method to append an additional signature to an existing (partially) <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a>.</p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>signedTransaction</code> - The <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a> to which the signature will be added.</dd>
<dd><code>publicKey</code> - The <a href="http://docs.oracle.com/javase/8/docs/api/java/security/PublicKey.html">PublicKey</a> matching to a signing <a href="http://docs.oracle.com/javase/8/docs/api/java/security/PrivateKey.html">java.security.PrivateKey</a> hosted in the node.
If the <a href="http://docs.oracle.com/javase/8/docs/api/java/security/PublicKey.html">PublicKey</a> is actually a <a href="../../../../net/corda/core/crypto/CompositeKey.html" title="class in net.corda.core.crypto"><code>class CompositeKey</code></a> the first leaf key found locally will be used
for signing.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A new <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a> with the addition of the new signature.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a></dd>
</dl>
</li>
</ul>
<a name="addSignature-signedTransaction-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addSignature</h4>
<pre><a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="type parameter in SignedTransaction">SignedTransaction</a>&nbsp;addSignature(<a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="type parameter in SignedTransaction">SignedTransaction</a>&nbsp;signedTransaction)</pre>
<div class="block"><p><p>Helper method to append an additional signature for an existing (partially) <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a>
using the default identity signing key of the node.</p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>signedTransaction</code> - The <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a> to which the signature will be added.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A new <a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a> with the addition of the new signature.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/transactions/SignedTransaction.html" title="class in net.corda.core.transactions"><code>class SignedTransaction</code></a></dd>
</dl>
</li>
</ul>
<a name="createSignature-filteredTransaction-publicKey-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createSignature</h4>
<pre><a href="../../../../net/corda/core/crypto/TransactionSignature.html" title="type parameter in TransactionSignature">TransactionSignature</a>&nbsp;createSignature(<a href="../../../../net/corda/core/transactions/FilteredTransaction.html" title="type parameter in FilteredTransaction">FilteredTransaction</a>&nbsp;filteredTransaction,
                                     java.security.PublicKey&nbsp;publicKey)</pre>
<div class="block"><p><p>Helper method to create a signature for a FilteredTransaction. Additional <a href="../../../../net/corda/core/crypto/SignatureMetadata.html" title="class in net.corda.core.crypto"><code>class SignatureMetadata</code></a>, including the
platform version used during signing and the cryptographic signature scheme use, is added to the signature.</p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>filteredTransaction</code> - the <a href="../../../../net/corda/core/transactions/FilteredTransaction.html" title="class in net.corda.core.transactions"><code>class FilteredTransaction</code></a> to which the signature will apply.</dd>
<dd><code>publicKey</code> - The <a href="http://docs.oracle.com/javase/8/docs/api/java/security/PublicKey.html">PublicKey</a> matching to a signing <a href="http://docs.oracle.com/javase/8/docs/api/java/security/PrivateKey.html">java.security.PrivateKey</a> hosted in the node.
If the <a href="http://docs.oracle.com/javase/8/docs/api/java/security/PublicKey.html">PublicKey</a> is actually a <a href="../../../../net/corda/core/crypto/CompositeKey.html" title="class in net.corda.core.crypto"><code>class CompositeKey</code></a> the first leaf key found locally will be used
for signing.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The <a href="../../../../net/corda/core/crypto/TransactionSignature.html" title="class in net.corda.core.crypto"><code>class TransactionSignature</code></a> generated by signing with the internally held <a href="http://docs.oracle.com/javase/8/docs/api/java/security/PrivateKey.html">java.security.PrivateKey</a>.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/crypto/SignatureMetadata.html" title="class in net.corda.core.crypto"><code>class SignatureMetadata</code></a></dd>
</dl>
</li>
</ul>
<a name="createSignature-filteredTransaction-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createSignature</h4>
<pre><a href="../../../../net/corda/core/crypto/TransactionSignature.html" title="type parameter in TransactionSignature">TransactionSignature</a>&nbsp;createSignature(<a href="../../../../net/corda/core/transactions/FilteredTransaction.html" title="type parameter in FilteredTransaction">FilteredTransaction</a>&nbsp;filteredTransaction)</pre>
<div class="block"><p><p>Helper method to create a signature for a FilteredTransaction
using the default identity signing key of the node. The legal identity key is used to sign. Additional
<a href="../../../../net/corda/core/crypto/SignatureMetadata.html" title="class in net.corda.core.crypto"><code>class SignatureMetadata</code></a>, including the platform version used during signing and the cryptographic signature scheme use,
is added to the signature.</p></p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>filteredTransaction</code> - the FilteredTransaction to which the signature will apply.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the <a href="../../../../net/corda/core/crypto/TransactionSignature.html" title="class in net.corda.core.crypto"><code>class TransactionSignature</code></a> generated by signing with the internally held identity <a href="http://docs.oracle.com/javase/8/docs/api/java/security/PrivateKey.html">java.security.PrivateKey</a>.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/crypto/SignatureMetadata.html" title="class in net.corda.core.crypto"><code>class SignatureMetadata</code></a></dd>
</dl>
</li>
</ul>
<a name="jdbcSession--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>jdbcSession</h4>
<pre>java.sql.Connection&nbsp;jdbcSession()</pre>
<div class="block"><p><p>Exposes a JDBC connection (session) object using the currently configured database.
Applications can use this to execute arbitrary SQL queries (native, direct, prepared, callable)
against its Node database tables (including custom contract tables defined by extending
<a href="../../../../net/corda/core/schemas/QueryableState.html" title="interface in net.corda.core.schemas"><code>interface QueryableState</code></a>).</p></p><p><p><p>When used within a flow, this session automatically forms part of the enclosing flow transaction boundary,
and thus queryable data will include everything committed as of the last checkpoint.</p></p></p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A new <a href="http://docs.oracle.com/javase/8/docs/api/java/sql/Connection.html">Connection</a></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd> - if called outside of a transaction.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/schemas/QueryableState.html" title="interface in net.corda.core.schemas"><code>interface QueryableState</code></a></dd>
</dl>
</li>
</ul>
<a name="registerUnloadHandler-runOnStop-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>registerUnloadHandler</h4>
<pre>void&nbsp;registerUnloadHandler(kotlin.jvm.functions.Function0&lt;kotlin.Unit&gt;&nbsp;runOnStop)</pre>
<div class="block"><p><p>Allows the registration of a callback that may inform services when the app is shutting down.</p></p><p><p><p>The intent is to allow the cleaning up of resources - e.g. releasing ports.</p><p>You should not rely on this to clean up executing flows - that's what quasar is for.</p><p>Please note that the shutdown handler is not guaranteed to be called. In production the node process may crash,
be killed by the operating system and other forms of fatal termination may occur that result in this code never
running. So you should use this functionality only for unit/integration testing or for code that can optimise
this shutdown e.g. by cleaning up things that would otherwise trigger a slow recovery process next time the
node starts.</p></p></p></div>
</li>
</ul>
<a name="getAppContext--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getAppContext</h4>
<pre><a href="../../../../net/corda/core/cordapp/CordappContext.html" title="type parameter in CordappContext">CordappContext</a>&nbsp;getAppContext()</pre>
<div class="block"><p><p>See <a href="../../../../net/corda/core/cordapp/CordappProvider.html#getAppContext--"><code>CordappProvider.getAppContext</code></a></p></p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/corda/core/cordapp/CordappProvider.html#getAppContext--"><code>CordappProvider.getAppContext</code></a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../net/corda/core/node/NotaryInfo.html" title="class in net.corda.core.node"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../net/corda/core/node/ServicesForResolution.html" title="interface in net.corda.core.node"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?net/corda/core/node/ServiceHub.html" target="_top">Frames</a></li>
<li><a href="ServiceHub.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<style>
    @import url("https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,500,600");
    #cookies-eu-banner {
        background-color: rgba(83, 88, 95, 0.9);
        border-radius: 3px;
        color: #fff;
        font-family: 'Source Sans Pro', sans-serif;
        font-size: 13px;
        font-weight: 400;
        left: 3px;
        position: fixed;
        padding: 6px;
        right: 3px;
        text-align: center;
        top: 100px;
        z-index: 1000;
    }
    
    #cookies-eu-banner h3,
    #cookies-eu-banner p {
        color: #fff;
        font-size: 18px;
        letter-spacing: 0;
    }
    
    #cookies-eu-banner h3 {
        font-size: 24px;
        font-style: normal;
        font-weight: 400;
        line-height: 1.2;
        margin: 9px 0 0;
        text-transform: uppercase;
    }
    
    #cookies-eu-banner p {
        margin-bottom: 10px;
        padding: 8px 36px 0;
        text-align: justify;
        line-height: 1.4em;
    }
    
    #cookies-eu-banner fieldset {
        min-width: 0;
        padding: 0;
        margin: 0;
        border: 0;
    }
    
    #cookies-eu-banner legend {
        color: inherit;
        display: block;
        font-size: 18px;
        line-height: inherit;
        max-width: 100%;
        margin-bottom: 16px;
        padding: 0;
        white-space: normal;
        width: 100%;
    }
    
    #cookies-eu-banner a {
        color: #62AAF1;
    }
    
    #cookies-eu-banner .cookies-button-group {
        display: flex;
        justify-content: center;
    }
    
    #cookies-eu-accept,
    #cookies-eu-accept-all {
        background-color: #ec1d24;
        border: none;
        border-radius: 6px;
        color: #fff;
        font-size: 12px;
        font-weight: 600;
        margin: 0 10px 10px;
        max-height: 40px;
        height: 40px;
        line-height: 1.1;
        text-decoration: none;
        width: 150px;
    }
    
    .cookies-checkbox {
        display: inline-block;
        margin: 5px 10px;
    }
    
    .cookies-checkbox label {
        font-size: 16px;
        margin-left: 3px;
    }
    
    @media screen and (min-width: 768px) {
        #cookies-eu-banner {
            bottom: 5px;
            top: inherit;
        }
        #cookies-eu-accept,
        #cookies-eu-accept-all {
            font-size: 14px;
        }
    }
</style>
<div id="cookies-eu-banner" style="display: none;">
    <h3 style="text-transform:none">Your privacy</h3>
    <div class='cookie-flex'>
        <p>
            We use cookies to improve your experience on our site, and to help us understand how people use our documentation. For more detailed information, see our <a href="https://www.r3.com/privacy-policy/">privacy policy</a> and <a href="#">cookie declaration</a>.
        </p>
        <form id='cookie-consent-form'>
            <fieldset>
                <legend>
                    Please select from the following options to continue to our site.
                </legend>
                <div class='cookies-button-group'>
                    <button id="cookies-eu-accept" type="button">
                      Allow cookies selected
                    </button>
                    <button id="cookies-eu-accept-all" type="button">
                      Allow all cookies
                    </button>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="necessary"
                      name="necessary"
                      autocomplete="off"
                      checked
                      disabled />
                        <input
                        name="necessary"
                        type="hidden"
                        value="on"/>
                        <label for="necessary">Necessary</label>
                    </span>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="preferences"
                      name="preferences"
                      autocomplete="off" />
                      <label for="preferences">Preferences</label>
                    </span>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="statistics"
                      name="statistics"
                      autocomplete="off" />
                      <label for="statistics">Statistics</label>
                    </span>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="marketing"
                      name="marketing"
                      autocomplete="off" />
                      <label for="marketing">Marketing</label>
                    </span>
                </div>
            </fieldset>
        </form>
    </div>
</div>
<script class='api-keys'>
    var gaKey = 'UA-87760032-1';
    var algolia_appId = "UX2KMUWFAL";
    var algolia_apiKey = "1fe3367db02689b4aeebc59efad5abaf";
    var algolia_index = "docs.corda.net";
</script>
<script class='cookies-eu-banner'>
    ! function(root, factory) {
        "use strict";
        "function" == typeof define && define.amd ? define([], factory) : "object" == typeof exports ? module.exports = factory() : root.CookiesEuBanner = factory()
    }(window, function() {
        "use strict";
        var document = window.document,
            CookiesEuBanner = function(launchFunction, waitAccept, useLocalStorage, undefined) {
                if (!(this instanceof CookiesEuBanner)) return new CookiesEuBanner(launchFunction);
                this.cookieTimeout = 33696e6, this.bots = /bot|crawler|spider|crawling/i, this.cookieName = "hasConsent", this.trackingCookiesNames = ["__utma", "__utmb", "__utmc", "__utmt", "__utmv", "__utmz", "_ga", "_gat", "_gid"], this.launchFunction = launchFunction, this.waitAccept = waitAccept || !1, this.useLocalStorage = useLocalStorage || !1, this.init()
            };
        return CookiesEuBanner.prototype = {
            init: function() {
                var isBot = this.bots.test(navigator.userAgent);
                navigator.doNotTrack || navigator.msDoNotTrack || window.doNotTrack;
                return isBot || !1 === this.hasConsent() ? (this.removeBanner(0), !1) : !0 === this.hasConsent() ? (this.launchFunction(), !0) : (this.showBanner(), void(this.waitAccept || this.setConsent(!0)))
            },
            showBanner: function() {
                var _this = this,
                    getElementById = document.getElementById.bind(document),
                    banner = getElementById("cookies-eu-banner"),
                    rejectButton = getElementById("cookies-eu-reject"),
                    acceptButton = getElementById("cookies-eu-accept"),
                    moreLink = getElementById("cookies-eu-more"),
                    waitRemove = void 0 === banner.dataset.waitRemove ? 0 : parseInt(banner.dataset.waitRemove),
                    addClickListener = this.addClickListener,
                    removeBanner = _this.removeBanner.bind(_this, waitRemove);
                banner.style.display = "block", moreLink && addClickListener(moreLink, function() {
                    _this.deleteCookie(_this.cookieName)
                }), acceptButton && addClickListener(acceptButton, function() {
                    removeBanner(), _this.setConsent(!0), _this.launchFunction()
                }), rejectButton && addClickListener(rejectButton, function() {
                    removeBanner(), _this.setConsent(!1), _this.trackingCookiesNames.map(_this.deleteCookie)
                })
            },
            setConsent: function(consent) {
                if (this.useLocalStorage) return localStorage.setItem(this.cookieName, consent);
                this.setCookie(this.cookieName, consent)
            },
            hasConsent: function() {
                function isCookieSetTo(value) {
                    return -1 < document.cookie.indexOf(cookieName + "=" + value) || localStorage.getItem(cookieName) === value
                }
                var cookieName = this.cookieName;
                return !!isCookieSetTo("true") || !isCookieSetTo("false") && null
            },
            setCookie: function(name, value) {
                var date = new Date;
                date.setTime(date.getTime() + this.cookieTimeout), document.cookie = name + "=" + value + ";SameSite=Strict;expires=" + date.toGMTString() + ";path=/"
            },
            deleteCookie: function(name) {
                var hostname = document.location.hostname.replace(/^www\./, ""),
                    commonSuffix = "; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/";
                document.cookie = name + "=; domain=." + hostname + commonSuffix, document.cookie = name + "=" + commonSuffix
            },
            addClickListener: function(DOMElement, callback) {
                if (DOMElement.attachEvent) return DOMElement.attachEvent("onclick", callback);
                DOMElement.addEventListener("click", callback)
            },
            removeBanner: function(wait) {
                setTimeout(function() {
                    var banner = document.getElementById("cookies-eu-banner");
                    banner && banner.parentNode && banner.parentNode.removeChild(banner)
                }, wait)
            }
        }, CookiesEuBanner
    });
</script>
<script class='google-analytics'>
    function googleAnalytics() {
        var i, s, o, r, a, m;
        i = window, s = document, o = "script", r = "ga", i.GoogleAnalyticsObject = r, i.ga = i.ga || function() {
            (i.ga.q = i.ga.q || []).push(arguments)
        }, i.ga.l = +new Date, a = s.createElement(o), m = s.getElementsByTagName(o)[0], a.async = 1, a.src = "//www.google-analytics.com/analytics.js", m.parentNode.insertBefore(a, m), window.ga("create", "UA-87760032-1", "auto"), window.ga("send", "pageview")
    }
</script>
<script class='docSearchInit'>
    function docSearchInit() {
        var algoliaOptions;
        document.querySelector("#search-input") && (algoliaOptions = {
            hitsPerPage: 5,
            facetFilters: facetFilters
        }, /404.html/.test(window.location.pathname) && delete algoliaOptions.facetFilters, window.docsearch({
            appId: algolia_appId,
            apiKey: algolia_apiKey,
            indexName: algolia_index,
            inputSelector: "#search-input",
            algoliaOptions: algoliaOptions
        }))
    }
</script>
<script class='corda-cookie-banner'>
    const docsearchLoad = (resolve, reject) => {
        const script = document.createElement('script');
        document.body.appendChild(script);
        script.onload = resolve;
        script.onerror = reject;
        script.async = true;
        script.src = "https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.js";
    };

    class DocsiteCookies {
        constructor() {
            this.name = 'corda_cookie';
            this.cookiesAccepted = {
                set: true,
                necessary: true,
                preferences: false,
                statistics: false,
                marketing: false
            };
            this.form = document.querySelector('#cookie-consent-form');
            this.handleAllCookies();

            new CookiesEuBanner(() => {
                this.cookieBanner();
            }, true);
        }

        handleAllCookies() {
            const acceptButton = document.querySelector('#cookies-eu-accept');
            const allCookiesButton = document.querySelector('#cookies-eu-accept-all');

            allCookiesButton.addEventListener('click', e => {
                e.preventDefault();
                this.allowAllCookies(this.form);
                acceptButton.click();
            });
        }

        cookieBanner() {
            if (!this.checkConsent()) {
                this.formToCookie(this.name, this.form);
                this.setAdditionalServices();
            } else {
                this.setAdditionalServices();
            }
        }

        allowAllCookies(form) {
            let cookiePreferences = form.querySelectorAll('.cookies-checkbox');
            for (let cookie of cookiePreferences) {
                cookie.querySelector('input').checked = true;
            }
        }

        formToCookie(name, form) {
            const thirteenMonthsInMils = 31104000000;

            let date = new Date();
            date.setTime(date.getTime() + thirteenMonthsInMils);

            let formData = new FormData(form);
            for (var pair of formData.entries()) {
                switch (pair[0]) {
                    case "necessary":
                        this.cookiesAccepted.necessary = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    case "preferences":
                        this.cookiesAccepted.preferences = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    case "statistics":
                        this.cookiesAccepted.statistics = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    case "marketing":
                        this.cookiesAccepted.marketing = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    default:
                        break;
                }
            }
            let cookieValue = JSON.stringify(this.cookiesAccepted);

            document.cookie = `${name}=${cookieValue};SameSite=Strict;expires=${date.toGMTString()};path=/`;
        }

        checkConsent() {
            let cookieName = this.name;
            let cookieValue = this.getCookie(cookieName);

            if (cookieValue) {
                if (cookieValue.set === true) {
                    return true;
                } else {
                    return false;
                }
            } else {
                return false;
            }
        }

        getCookie(name) {
            let value = "; " + document.cookie;
            let parts = value.split("; " + name + "=");
            let cValue = "";

            if (parts.length == 2) {
                cValue = parts.pop().split(";").shift();
            }

            if (hasJsonStructure(cValue)) {
                return JSON.parse(cValue);
            } else {
                return cValue;
            }
        }

        setAdditionalServices() {
            let cookieConsent = this.getCookie(this.name);
            for (let [key, value] of Object.entries(cookieConsent)) {
                if (key === 'necessary' && value === true) {
                    new Promise(docsearchLoad)
                        .then(() => {
                            docSearchInit();
                        })
                        .catch(err => console.log(err));
                }
                if (key === 'statistics' && value === true) {
                    googleAnalytics();
                }
            }
        }
    }

    function hasJsonStructure(str) {
        if (typeof str !== 'string') return false;
        try {
            const result = JSON.parse(str);
            const type = Object.prototype.toString.call(result);
            return type === '[object Object]' ||
                type === '[object Array]';
        } catch (err) {
            return false;
        }
    }
</script>
<script class='initialise'>
    new DocsiteCookies();
</script>
</body>
</html>
