<HTML>
<HEAD>
<meta charset="UTF-8">
<title>CordaRPCClient - corda</title>
<link rel="stylesheet" href="../../../style.css">

<meta name="docsearch:language" content="en">
<meta name="docsearch:version" content="4.0">
<meta name="docsearch:project" content="corda-enterprise">
</head>
<BODY>
<a href="../../index.html">corda</a>&nbsp;/&nbsp;<a href="../index.html">net.corda.client.rpc</a>&nbsp;/&nbsp;<a href="./index.html">CordaRPCClient</a><br/>
<br/>
<h1>CordaRPCClient</h1>
<code><span class="keyword">class </span><span class="identifier">CordaRPCClient</span></code>
<p>An RPC client connects to the specified server and allows you to make calls to the server that perform various
useful tasks. Please see the Client RPC section of docs.corda.net to learn more about how this API works. A brief
description is provided here.</p>
<p>Calling <a href="start.html">start</a> returns an <a href="../-r-p-c-connection/index.html">RPCConnection</a> containing a proxy that lets you invoke RPCs on the server. Calls on
it block, and if the server throws an exception then it will be rethrown on the client. Proxies are thread safe and
may be used to invoke multiple RPCs in parallel.</p>
<p>RPC sends and receives are logged on the net.corda.rpc logger.</p>
<p>The <a href="../../net.corda.core.messaging/-corda-r-p-c-ops/index.html">CordaRPCOps</a> defines what client RPCs are available. If an RPC returns an <a href="#">rx.Observable</a> anywhere in the object
graph returned then the server-side observable is transparently forwarded to the client side here.
<em>You are expected to use it</em>. The server will begin sending messages immediately that will be buffered on the
client, you are expected to drain by subscribing to the returned observer. You can opt-out of this by simply
calling the <a href="../rx.-observable/not-used.html">net.corda.client.rpc.notUsed</a> method on it.</p>
<p>You don't have to explicitly close the observable if you actually subscribe to it: it will close itself and free up
the server-side resources either when the client or JVM itself is shutdown, or when there are no more subscribers to
it. Once all the subscribers to a returned observable are unsubscribed or the observable completes successfully or
with an error, the observable is closed and you can't then re-subscribe again: you'll have to re-request a fresh
observable with another RPC.</p>
<p>In case of loss of connection to the server, the client will try to reconnect using the settings provided via
<a href="../-corda-r-p-c-client-configuration/index.html">CordaRPCClientConfiguration</a>. While attempting failover, current and future RPC calls will throw
<a href="../-r-p-c-exception/index.html">RPCException</a> and previously returned observables will call onError().</p>
<p>If the client was created using a list of hosts, automatic failover will occur (the servers have to be started in
HA mode).</p>
<h3>Parameters</h3>
<p><a name="hostAndPort"></a>
<code>hostAndPort</code> - The network address to connect to.</p>
<p><a name="configuration"></a>
<code>configuration</code> - An optional configuration used to tweak client behaviour.</p>
<p><a name="sslConfiguration"></a>
<code>sslConfiguration</code> - An optional <a href="../../net.corda.core.messaging/-client-rpc-ssl-options/index.html">ClientRpcSslOptions</a> used to enable secure communication with the server.</p>
<p><a name="haAddressPool"></a>
<code>haAddressPool</code> - A list of <a href="../../net.corda.core.utilities/-network-host-and-port/index.html">NetworkHostAndPort</a> representing the addresses of servers in HA mode.
The client will attempt to connect to a live server by trying each address in the list. If the servers are not in
HA mode, the client will round-robin from the beginning of the list and try all servers.</p>
<p><a name="classLoader"></a>
<code>classLoader</code> - a classloader, which will be used (if provided) to discover available <a href="../../net.corda.core.serialization/-serialization-custom-serializer/index.html">SerializationCustomSerializer</a>s and <a href="../../net.corda.core.serialization/-serialization-whitelist/index.html">SerializationWhitelist</a>s
If the created RPC client is intended to use types with custom serializers / whitelists,
a classloader will need to be provided that contains the associated CorDapp jars.</p>
<h3>Constructors</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="-init-.html">&lt;init&gt;</a></p>
</td>
<td>
<code><span class="identifier">CordaRPCClient</span><span class="symbol">(</span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$<init>(net.corda.core.utilities.NetworkHostAndPort, net.corda.client.rpc.CordaRPCClientConfiguration)/hostAndPort">hostAndPort</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.utilities/-network-host-and-port/index.html"><span class="identifier">NetworkHostAndPort</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$<init>(net.corda.core.utilities.NetworkHostAndPort, net.corda.client.rpc.CordaRPCClientConfiguration)/configuration">configuration</span><span class="symbol">:</span>&nbsp;<a href="../-corda-r-p-c-client-configuration/index.html"><span class="identifier">CordaRPCClientConfiguration</span></a>&nbsp;<span class="symbol">=</span>&nbsp;CordaRPCClientConfiguration.DEFAULT<span class="symbol">)</span></code><br/>
<code><span class="identifier">CordaRPCClient</span><span class="symbol">(</span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$<init>(net.corda.core.utilities.NetworkHostAndPort, net.corda.client.rpc.CordaRPCClientConfiguration, java.lang.ClassLoader)/hostAndPort">hostAndPort</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.utilities/-network-host-and-port/index.html"><span class="identifier">NetworkHostAndPort</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$<init>(net.corda.core.utilities.NetworkHostAndPort, net.corda.client.rpc.CordaRPCClientConfiguration, java.lang.ClassLoader)/configuration">configuration</span><span class="symbol">:</span>&nbsp;<a href="../-corda-r-p-c-client-configuration/index.html"><span class="identifier">CordaRPCClientConfiguration</span></a>&nbsp;<span class="symbol">=</span>&nbsp;CordaRPCClientConfiguration.DEFAULT<span class="symbol">, </span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$<init>(net.corda.core.utilities.NetworkHostAndPort, net.corda.client.rpc.CordaRPCClientConfiguration, java.lang.ClassLoader)/classLoader">classLoader</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/ClassLoader.html"><span class="identifier">ClassLoader</span></a><span class="symbol">)</span></code><br/>
<code><span class="identifier">CordaRPCClient</span><span class="symbol">(</span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$<init>(net.corda.core.utilities.NetworkHostAndPort, net.corda.core.messaging.ClientRpcSslOptions, java.lang.ClassLoader)/hostAndPort">hostAndPort</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.utilities/-network-host-and-port/index.html"><span class="identifier">NetworkHostAndPort</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$<init>(net.corda.core.utilities.NetworkHostAndPort, net.corda.core.messaging.ClientRpcSslOptions, java.lang.ClassLoader)/sslConfiguration">sslConfiguration</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.messaging/-client-rpc-ssl-options/index.html"><span class="identifier">ClientRpcSslOptions</span></a><span class="symbol">?</span>&nbsp;<span class="symbol">=</span>&nbsp;null<span class="symbol">, </span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$<init>(net.corda.core.utilities.NetworkHostAndPort, net.corda.core.messaging.ClientRpcSslOptions, java.lang.ClassLoader)/classLoader">classLoader</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/ClassLoader.html"><span class="identifier">ClassLoader</span></a><span class="symbol">?</span>&nbsp;<span class="symbol">=</span>&nbsp;null<span class="symbol">)</span></code><br/>
<code><span class="identifier">CordaRPCClient</span><span class="symbol">(</span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$<init>(net.corda.core.utilities.NetworkHostAndPort, net.corda.client.rpc.CordaRPCClientConfiguration, net.corda.core.messaging.ClientRpcSslOptions, java.lang.ClassLoader)/hostAndPort">hostAndPort</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.utilities/-network-host-and-port/index.html"><span class="identifier">NetworkHostAndPort</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$<init>(net.corda.core.utilities.NetworkHostAndPort, net.corda.client.rpc.CordaRPCClientConfiguration, net.corda.core.messaging.ClientRpcSslOptions, java.lang.ClassLoader)/configuration">configuration</span><span class="symbol">:</span>&nbsp;<a href="../-corda-r-p-c-client-configuration/index.html"><span class="identifier">CordaRPCClientConfiguration</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$<init>(net.corda.core.utilities.NetworkHostAndPort, net.corda.client.rpc.CordaRPCClientConfiguration, net.corda.core.messaging.ClientRpcSslOptions, java.lang.ClassLoader)/sslConfiguration">sslConfiguration</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.messaging/-client-rpc-ssl-options/index.html"><span class="identifier">ClientRpcSslOptions</span></a><span class="symbol">?</span><span class="symbol">, </span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$<init>(net.corda.core.utilities.NetworkHostAndPort, net.corda.client.rpc.CordaRPCClientConfiguration, net.corda.core.messaging.ClientRpcSslOptions, java.lang.ClassLoader)/classLoader">classLoader</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/ClassLoader.html"><span class="identifier">ClassLoader</span></a><span class="symbol">?</span>&nbsp;<span class="symbol">=</span>&nbsp;null<span class="symbol">)</span></code><br/>
<code><span class="identifier">CordaRPCClient</span><span class="symbol">(</span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$<init>(kotlin.collections.List((net.corda.core.utilities.NetworkHostAndPort)), net.corda.client.rpc.CordaRPCClientConfiguration, net.corda.core.messaging.ClientRpcSslOptions, java.lang.ClassLoader)/haAddressPool">haAddressPool</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-list/index.html"><span class="identifier">List</span></a><span class="symbol">&lt;</span><a href="../../net.corda.core.utilities/-network-host-and-port/index.html"><span class="identifier">NetworkHostAndPort</span></a><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$<init>(kotlin.collections.List((net.corda.core.utilities.NetworkHostAndPort)), net.corda.client.rpc.CordaRPCClientConfiguration, net.corda.core.messaging.ClientRpcSslOptions, java.lang.ClassLoader)/configuration">configuration</span><span class="symbol">:</span>&nbsp;<a href="../-corda-r-p-c-client-configuration/index.html"><span class="identifier">CordaRPCClientConfiguration</span></a>&nbsp;<span class="symbol">=</span>&nbsp;CordaRPCClientConfiguration.DEFAULT<span class="symbol">, </span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$<init>(kotlin.collections.List((net.corda.core.utilities.NetworkHostAndPort)), net.corda.client.rpc.CordaRPCClientConfiguration, net.corda.core.messaging.ClientRpcSslOptions, java.lang.ClassLoader)/sslConfiguration">sslConfiguration</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.messaging/-client-rpc-ssl-options/index.html"><span class="identifier">ClientRpcSslOptions</span></a><span class="symbol">?</span>&nbsp;<span class="symbol">=</span>&nbsp;null<span class="symbol">, </span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$<init>(kotlin.collections.List((net.corda.core.utilities.NetworkHostAndPort)), net.corda.client.rpc.CordaRPCClientConfiguration, net.corda.core.messaging.ClientRpcSslOptions, java.lang.ClassLoader)/classLoader">classLoader</span><span class="symbol">:</span>&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/ClassLoader.html"><span class="identifier">ClassLoader</span></a><span class="symbol">?</span>&nbsp;<span class="symbol">=</span>&nbsp;null<span class="symbol">)</span></code></td>
</tr>
</tbody>
</table>
<h3>Functions</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="start.html">start</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="identifier">start</span><span class="symbol">(</span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$start(kotlin.String, kotlin.String)/username">username</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$start(kotlin.String, kotlin.String)/password">password</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="../-corda-r-p-c-connection.html"><span class="identifier">CordaRPCConnection</span></a></code><br/>
<code><span class="keyword">fun </span><span class="identifier">start</span><span class="symbol">(</span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$start(kotlin.String, kotlin.String, net.corda.core.identity.CordaX500Name)/username">username</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$start(kotlin.String, kotlin.String, net.corda.core.identity.CordaX500Name)/password">password</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$start(kotlin.String, kotlin.String, net.corda.core.identity.CordaX500Name)/targetLegalIdentity">targetLegalIdentity</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.identity/-corda-x500-name/index.html"><span class="identifier">CordaX500Name</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="../-corda-r-p-c-connection.html"><span class="identifier">CordaRPCConnection</span></a></code><br/>
<code><span class="keyword">fun </span><span class="identifier">start</span><span class="symbol">(</span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$start(kotlin.String, kotlin.String, net.corda.core.context.Trace, net.corda.core.context.Actor)/username">username</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$start(kotlin.String, kotlin.String, net.corda.core.context.Trace, net.corda.core.context.Actor)/password">password</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$start(kotlin.String, kotlin.String, net.corda.core.context.Trace, net.corda.core.context.Actor)/externalTrace">externalTrace</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.context/-trace/index.html"><span class="identifier">Trace</span></a><span class="symbol">?</span><span class="symbol">, </span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$start(kotlin.String, kotlin.String, net.corda.core.context.Trace, net.corda.core.context.Actor)/impersonatedActor">impersonatedActor</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.context/-actor/index.html"><span class="identifier">Actor</span></a><span class="symbol">?</span><span class="symbol">)</span><span class="symbol">: </span><a href="../-corda-r-p-c-connection.html"><span class="identifier">CordaRPCConnection</span></a></code><br/>
<code><span class="keyword">fun </span><span class="identifier">start</span><span class="symbol">(</span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$start(kotlin.String, kotlin.String, net.corda.core.context.Trace, net.corda.core.context.Actor, net.corda.core.identity.CordaX500Name)/username">username</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$start(kotlin.String, kotlin.String, net.corda.core.context.Trace, net.corda.core.context.Actor, net.corda.core.identity.CordaX500Name)/password">password</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$start(kotlin.String, kotlin.String, net.corda.core.context.Trace, net.corda.core.context.Actor, net.corda.core.identity.CordaX500Name)/externalTrace">externalTrace</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.context/-trace/index.html"><span class="identifier">Trace</span></a><span class="symbol">?</span><span class="symbol">, </span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$start(kotlin.String, kotlin.String, net.corda.core.context.Trace, net.corda.core.context.Actor, net.corda.core.identity.CordaX500Name)/impersonatedActor">impersonatedActor</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.context/-actor/index.html"><span class="identifier">Actor</span></a><span class="symbol">?</span><span class="symbol">, </span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$start(kotlin.String, kotlin.String, net.corda.core.context.Trace, net.corda.core.context.Actor, net.corda.core.identity.CordaX500Name)/targetLegalIdentity">targetLegalIdentity</span><span class="symbol">:</span>&nbsp;<a href="../../net.corda.core.identity/-corda-x500-name/index.html"><span class="identifier">CordaX500Name</span></a><span class="symbol">?</span><span class="symbol">)</span><span class="symbol">: </span><a href="../-corda-r-p-c-connection.html"><span class="identifier">CordaRPCConnection</span></a></code>
<p>Logs in to the target server and returns an active connection. The returned connection is a <a href="http://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html">java.io.Closeable</a>
and can be used with a try-with-resources statement. If you don't use that, you should use the
<a href="../-r-p-c-connection/notify-server-and-close.html">RPCConnection.notifyServerAndClose</a> or <a href="../-r-p-c-connection/force-close.html">RPCConnection.forceClose</a> methods to dispose of the connection object
when done.</p>
</td>
</tr>
<tr>
<td>
<p><a href="use.html">use</a></p>
</td>
<td>
<code><span class="keyword">fun </span><span class="symbol">&lt;</span><span class="identifier">A</span><span class="symbol">&gt;</span> <span class="identifier">use</span><span class="symbol">(</span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$use(kotlin.String, kotlin.String, kotlin.Function1((net.corda.client.rpc.CordaRPCConnection, net.corda.client.rpc.CordaRPCClient.use.A)))/username">username</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$use(kotlin.String, kotlin.String, kotlin.Function1((net.corda.client.rpc.CordaRPCConnection, net.corda.client.rpc.CordaRPCClient.use.A)))/password">password</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">, </span><span class="identifier" id="net.corda.client.rpc.CordaRPCClient$use(kotlin.String, kotlin.String, kotlin.Function1((net.corda.client.rpc.CordaRPCConnection, net.corda.client.rpc.CordaRPCClient.use.A)))/block">block</span><span class="symbol">:</span>&nbsp;<span class="symbol">(</span><a href="../-corda-r-p-c-connection.html"><span class="identifier">CordaRPCConnection</span></a><span class="symbol">)</span>&nbsp;<span class="symbol">-&gt;</span>&nbsp;<a href="use.html#A"><span class="identifier">A</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="use.html#A"><span class="identifier">A</span></a></code>
<p>A helper for Kotlin users that simply closes the connection after the block has executed. Be careful not to
over-use this, as setting up and closing connections takes time.</p>
</td>
</tr>
</tbody>
</table>
<h3>Extension Functions</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="../../net.corda.core.utilities/kotlin.-any/context-logger.html">contextLogger</a></p>
</td>
<td>
<code><span class="keyword">fun </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html"><span class="identifier">Any</span></a><span class="symbol">.</span><span class="identifier">contextLogger</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">Logger</span></code>
<p>When called from a companion object, returns the logger for the enclosing class.</p>
</td>
</tr>
</tbody>
</table>

<style>
    @import url("https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,500,600");
    #cookies-eu-banner {
        background-color: rgba(83, 88, 95, 0.9);
        border-radius: 3px;
        color: #fff;
        font-family: 'Source Sans Pro', sans-serif;
        font-size: 13px;
        font-weight: 400;
        left: 3px;
        position: fixed;
        padding: 6px;
        right: 3px;
        text-align: center;
        top: 100px;
        z-index: 1000;
    }
    
    #cookies-eu-banner h3,
    #cookies-eu-banner p {
        color: #fff;
        font-size: 18px;
        letter-spacing: 0;
    }
    
    #cookies-eu-banner h3 {
        font-size: 24px;
        font-style: normal;
        font-weight: 400;
        line-height: 1.2;
        margin: 9px 0 0;
        text-transform: uppercase;
    }
    
    #cookies-eu-banner p {
        margin-bottom: 10px;
        padding: 8px 36px 0;
        text-align: justify;
        line-height: 1.4em;
    }
    
    #cookies-eu-banner fieldset {
        min-width: 0;
        padding: 0;
        margin: 0;
        border: 0;
    }
    
    #cookies-eu-banner legend {
        color: inherit;
        display: block;
        font-size: 18px;
        line-height: inherit;
        max-width: 100%;
        margin-bottom: 16px;
        padding: 0;
        white-space: normal;
        width: 100%;
    }
    
    #cookies-eu-banner a {
        color: #62AAF1;
    }
    
    #cookies-eu-banner .cookies-button-group {
        display: flex;
        justify-content: center;
    }
    
    #cookies-eu-accept,
    #cookies-eu-accept-all {
        background-color: #ec1d24;
        border: none;
        border-radius: 6px;
        color: #fff;
        font-size: 12px;
        font-weight: 600;
        margin: 0 10px 10px;
        max-height: 40px;
        height: 40px;
        line-height: 1.1;
        text-decoration: none;
        width: 150px;
    }
    
    .cookies-checkbox {
        display: inline-block;
        margin: 5px 10px;
    }
    
    .cookies-checkbox label {
        font-size: 16px;
        margin-left: 3px;
    }
    
    @media screen and (min-width: 768px) {
        #cookies-eu-banner {
            bottom: 5px;
            top: inherit;
        }
        #cookies-eu-accept,
        #cookies-eu-accept-all {
            font-size: 14px;
        }
    }
</style>
<div id="cookies-eu-banner" style="display: none;">
    <h3 style="text-transform:none">Your privacy</h3>
    <div class='cookie-flex'>
        <p>
            We use cookies to improve your experience on our site, and to help us understand how people use our documentation. For more detailed information, see our <a href="https://www.r3.com/privacy-policy/">privacy policy</a> and <a href="#">cookie declaration</a>.
        </p>
        <form id='cookie-consent-form'>
            <fieldset>
                <legend>
                    Please select from the following options to continue to our site.
                </legend>
                <div class='cookies-button-group'>
                    <button id="cookies-eu-accept" type="button">
                      Allow cookies selected
                    </button>
                    <button id="cookies-eu-accept-all" type="button">
                      Allow all cookies
                    </button>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="necessary"
                      name="necessary"
                      autocomplete="off"
                      checked
                      disabled />
                        <input
                        name="necessary"
                        type="hidden"
                        value="on"/>
                        <label for="necessary">Necessary</label>
                    </span>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="preferences"
                      name="preferences"
                      autocomplete="off" />
                      <label for="preferences">Preferences</label>
                    </span>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="statistics"
                      name="statistics"
                      autocomplete="off" />
                      <label for="statistics">Statistics</label>
                    </span>
                    <span class='cookies-checkbox'>
                      <input
                      type="checkbox"
                      id="marketing"
                      name="marketing"
                      autocomplete="off" />
                      <label for="marketing">Marketing</label>
                    </span>
                </div>
            </fieldset>
        </form>
    </div>
</div>
<script class='api-keys'>
    var gaKey = 'UA-87760032-1';
    var algolia_appId = "UX2KMUWFAL";
    var algolia_apiKey = "1fe3367db02689b4aeebc59efad5abaf";
    var algolia_index = "docs.corda.net";
</script>
<script class='cookies-eu-banner'>
    ! function(root, factory) {
        "use strict";
        "function" == typeof define && define.amd ? define([], factory) : "object" == typeof exports ? module.exports = factory() : root.CookiesEuBanner = factory()
    }(window, function() {
        "use strict";
        var document = window.document,
            CookiesEuBanner = function(launchFunction, waitAccept, useLocalStorage, undefined) {
                if (!(this instanceof CookiesEuBanner)) return new CookiesEuBanner(launchFunction);
                this.cookieTimeout = 33696e6, this.bots = /bot|crawler|spider|crawling/i, this.cookieName = "hasConsent", this.trackingCookiesNames = ["__utma", "__utmb", "__utmc", "__utmt", "__utmv", "__utmz", "_ga", "_gat", "_gid"], this.launchFunction = launchFunction, this.waitAccept = waitAccept || !1, this.useLocalStorage = useLocalStorage || !1, this.init()
            };
        return CookiesEuBanner.prototype = {
            init: function() {
                var isBot = this.bots.test(navigator.userAgent);
                navigator.doNotTrack || navigator.msDoNotTrack || window.doNotTrack;
                return isBot || !1 === this.hasConsent() ? (this.removeBanner(0), !1) : !0 === this.hasConsent() ? (this.launchFunction(), !0) : (this.showBanner(), void(this.waitAccept || this.setConsent(!0)))
            },
            showBanner: function() {
                var _this = this,
                    getElementById = document.getElementById.bind(document),
                    banner = getElementById("cookies-eu-banner"),
                    rejectButton = getElementById("cookies-eu-reject"),
                    acceptButton = getElementById("cookies-eu-accept"),
                    moreLink = getElementById("cookies-eu-more"),
                    waitRemove = void 0 === banner.dataset.waitRemove ? 0 : parseInt(banner.dataset.waitRemove),
                    addClickListener = this.addClickListener,
                    removeBanner = _this.removeBanner.bind(_this, waitRemove);
                banner.style.display = "block", moreLink && addClickListener(moreLink, function() {
                    _this.deleteCookie(_this.cookieName)
                }), acceptButton && addClickListener(acceptButton, function() {
                    removeBanner(), _this.setConsent(!0), _this.launchFunction()
                }), rejectButton && addClickListener(rejectButton, function() {
                    removeBanner(), _this.setConsent(!1), _this.trackingCookiesNames.map(_this.deleteCookie)
                })
            },
            setConsent: function(consent) {
                if (this.useLocalStorage) return localStorage.setItem(this.cookieName, consent);
                this.setCookie(this.cookieName, consent)
            },
            hasConsent: function() {
                function isCookieSetTo(value) {
                    return -1 < document.cookie.indexOf(cookieName + "=" + value) || localStorage.getItem(cookieName) === value
                }
                var cookieName = this.cookieName;
                return !!isCookieSetTo("true") || !isCookieSetTo("false") && null
            },
            setCookie: function(name, value) {
                var date = new Date;
                date.setTime(date.getTime() + this.cookieTimeout), document.cookie = name + "=" + value + ";SameSite=Strict;expires=" + date.toGMTString() + ";path=/"
            },
            deleteCookie: function(name) {
                var hostname = document.location.hostname.replace(/^www\./, ""),
                    commonSuffix = "; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/";
                document.cookie = name + "=; domain=." + hostname + commonSuffix, document.cookie = name + "=" + commonSuffix
            },
            addClickListener: function(DOMElement, callback) {
                if (DOMElement.attachEvent) return DOMElement.attachEvent("onclick", callback);
                DOMElement.addEventListener("click", callback)
            },
            removeBanner: function(wait) {
                setTimeout(function() {
                    var banner = document.getElementById("cookies-eu-banner");
                    banner && banner.parentNode && banner.parentNode.removeChild(banner)
                }, wait)
            }
        }, CookiesEuBanner
    });
</script>
<script class='google-analytics'>
    function googleAnalytics() {
        var i, s, o, r, a, m;
        i = window, s = document, o = "script", r = "ga", i.GoogleAnalyticsObject = r, i.ga = i.ga || function() {
            (i.ga.q = i.ga.q || []).push(arguments)
        }, i.ga.l = +new Date, a = s.createElement(o), m = s.getElementsByTagName(o)[0], a.async = 1, a.src = "//www.google-analytics.com/analytics.js", m.parentNode.insertBefore(a, m), window.ga("create", "UA-87760032-1", "auto"), window.ga("send", "pageview")
    }
</script>
<script class='docSearchInit'>
    function docSearchInit() {
        var algoliaOptions;
        document.querySelector("#search-input") && (algoliaOptions = {
            hitsPerPage: 5,
            facetFilters: facetFilters
        }, /404.html/.test(window.location.pathname) && delete algoliaOptions.facetFilters, window.docsearch({
            appId: algolia_appId,
            apiKey: algolia_apiKey,
            indexName: algolia_index,
            inputSelector: "#search-input",
            algoliaOptions: algoliaOptions
        }))
    }
</script>
<script class='corda-cookie-banner'>
    const docsearchLoad = (resolve, reject) => {
        const script = document.createElement('script');
        document.body.appendChild(script);
        script.onload = resolve;
        script.onerror = reject;
        script.async = true;
        script.src = "https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.js";
    };

    class DocsiteCookies {
        constructor() {
            this.name = 'corda_cookie';
            this.cookiesAccepted = {
                set: true,
                necessary: true,
                preferences: false,
                statistics: false,
                marketing: false
            };
            this.form = document.querySelector('#cookie-consent-form');
            this.handleAllCookies();

            new CookiesEuBanner(() => {
                this.cookieBanner();
            }, true);
        }

        handleAllCookies() {
            const acceptButton = document.querySelector('#cookies-eu-accept');
            const allCookiesButton = document.querySelector('#cookies-eu-accept-all');

            allCookiesButton.addEventListener('click', e => {
                e.preventDefault();
                this.allowAllCookies(this.form);
                acceptButton.click();
            });
        }

        cookieBanner() {
            if (!this.checkConsent()) {
                this.formToCookie(this.name, this.form);
                this.setAdditionalServices();
            } else {
                this.setAdditionalServices();
            }
        }

        allowAllCookies(form) {
            let cookiePreferences = form.querySelectorAll('.cookies-checkbox');
            for (let cookie of cookiePreferences) {
                cookie.querySelector('input').checked = true;
            }
        }

        formToCookie(name, form) {
            const thirteenMonthsInMils = 31104000000;

            let date = new Date();
            date.setTime(date.getTime() + thirteenMonthsInMils);

            let formData = new FormData(form);
            for (var pair of formData.entries()) {
                switch (pair[0]) {
                    case "necessary":
                        this.cookiesAccepted.necessary = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    case "preferences":
                        this.cookiesAccepted.preferences = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    case "statistics":
                        this.cookiesAccepted.statistics = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    case "marketing":
                        this.cookiesAccepted.marketing = (pair[1] === 'on') ?
                            true :
                            false;
                        break;
                    default:
                        break;
                }
            }
            let cookieValue = JSON.stringify(this.cookiesAccepted);

            document.cookie = `${name}=${cookieValue};SameSite=Strict;expires=${date.toGMTString()};path=/`;
        }

        checkConsent() {
            let cookieName = this.name;
            let cookieValue = this.getCookie(cookieName);

            if (cookieValue) {
                if (cookieValue.set === true) {
                    return true;
                } else {
                    return false;
                }
            } else {
                return false;
            }
        }

        getCookie(name) {
            let value = "; " + document.cookie;
            let parts = value.split("; " + name + "=");
            let cValue = "";

            if (parts.length == 2) {
                cValue = parts.pop().split(";").shift();
            }

            if (hasJsonStructure(cValue)) {
                return JSON.parse(cValue);
            } else {
                return cValue;
            }
        }

        setAdditionalServices() {
            let cookieConsent = this.getCookie(this.name);
            for (let [key, value] of Object.entries(cookieConsent)) {
                if (key === 'necessary' && value === true) {
                    new Promise(docsearchLoad)
                        .then(() => {
                            docSearchInit();
                        })
                        .catch(err => console.log(err));
                }
                if (key === 'statistics' && value === true) {
                    googleAnalytics();
                }
            }
        }
    }

    function hasJsonStructure(str) {
        if (typeof str !== 'string') return false;
        try {
            const result = JSON.parse(str);
            const type = Object.prototype.toString.call(result);
            return type === '[object Object]' ||
                type === '[object Array]';
        } catch (err) {
            return false;
        }
    }
</script>
<script class='initialise'>
    new DocsiteCookies();
</script>
</body>
</HTML>
